!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,t;function n(){return e.apply(null,arguments)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){return void 0===e}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var n in t)u(t,n)&&(e[n]=t[n]);return u(t,"toString")&&(e.toString=t.toString),u(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return Tt(e,t,n,r,!0).utc()}function d(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function h(e){if(null==e._isValid){var n=d(e),r=t.call(n.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&r);if(e._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function p(e){var t=f(NaN);return null!=e?c(d(t),e):d(t).userInvalidated=!0,t}t=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var m=n.momentProperties=[];function g(e,t){var n,r,i;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=d(t)),o(t._locale)||(e._locale=t._locale),0<m.length)for(n=0;n<m.length;n++)o(i=t[r=m[n]])||(e[r]=i);return e}var v=!1;function y(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,n.updateOffset(this),v=!1)}function b(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function w(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function C(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=w(t)),n}function x(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&C(e[r])!==C(t[r]))&&a++;return a+o}function S(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function k(e,t){var r=!0;return c(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}S(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)},t)}var T,N={};function _(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),N[e]||(S(t),N[e]=!0)}function E(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e,t){var n,r=c({},e);for(n in t)u(t,n)&&(i(e[n])&&i(t[n])?(r[n]={},c(r[n],e[n]),c(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)u(e,n)&&!u(t,n)&&i(e[n])&&(r[n]=c({},r[n]));return r}function O(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,T=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)u(e,t)&&n.push(t);return n};var M={};function A(e,t){var n=e.toLowerCase();M[n]=M[n+"s"]=M[t]=e}function L(e){return"string"==typeof e?M[e]||M[e.toLowerCase()]:void 0}function R(e){var t,n,r={};for(n in e)u(e,n)&&(t=L(n))&&(r[t]=e[n]);return r}var P={};function B(e,t){P[e]=t}function I(e,t,n){var r=""+Math.abs(e);return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,t-r.length)).toString().substr(1)+r}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,W={},z={};function U(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(z[e]=i),t&&(z[t[0]]=function(){return I(i.apply(this,arguments),t[1],t[2])}),n&&(z[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function Y(e,t){return e.isValid()?(t=V(t,e.localeData()),W[t]=W[t]||function(e){var t,n,r,i=e.match(F);for(t=0,n=i.length;t<n;t++)i[t]=z[i[t]]?z[i[t]]:(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,o="";for(r=0;r<n;r++)o+=E(i[r])?i[r].call(t,e):i[r];return o}}(t),W[t](e)):e.localeData().invalidDate()}function V(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(H.lastIndex=0;0<=n&&H.test(e);)e=e.replace(H,r),H.lastIndex=0,n-=1;return e}var j=/\d/,q=/\d\d/,$=/\d{3}/,G=/\d{4}/,K=/[+-]?\d{6}/,X=/\d\d?/,Z=/\d\d\d\d?/,J=/\d\d\d\d\d\d?/,Q=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ne=/\d+/,re=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,oe=/Z|[+-]\d\d(?::?\d\d)?/gi,ae=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,se={};function le(e,t,n){se[e]=E(t)?t:function(e,r){return e&&n?n:t}}function ue(e,t){return u(se,e)?se[e](t._strict,t._locale):new RegExp(ce(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})))}function ce(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var fe={};function de(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),a(t)&&(r=function(e,n){n[t]=C(e)}),n=0;n<e.length;n++)fe[e[n]]=r}function he(e,t){de(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}var pe=0,me=1,ge=2,ve=3,ye=4,be=5,we=6,Ce=7,xe=8;function Se(e){return ke(e)?366:365}function ke(e){return e%4==0&&e%100!=0||e%400==0}U("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),A("year","y"),B("year",1),le("Y",re),le("YY",X,q),le("YYYY",ee,G),le("YYYYY",te,K),le("YYYYYY",te,K),de(["YYYYY","YYYYYY"],pe),de("YYYY",function(e,t){t[pe]=2===e.length?n.parseTwoDigitYear(e):C(e)}),de("YY",function(e,t){t[pe]=n.parseTwoDigitYear(e)}),de("Y",function(e,t){t[pe]=parseInt(e,10)}),n.parseTwoDigitYear=function(e){return C(e)+(68<C(e)?1900:2e3)};var Te,Ne=_e("FullYear",!0);function _e(e,t){return function(r){return null!=r?(De(this,e,r),n.updateOffset(this,t),this):Ee(this,e)}}function Ee(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function De(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ke(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Oe(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Oe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%12+12)%12;return e+=(t-n)/12,1===n?ke(e)?29:28:31-n%7%2}Te=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),U("MMMM",0,0,function(e){return this.localeData().months(this,e)}),A("month","M"),B("month",8),le("M",X),le("MM",X,q),le("MMM",function(e,t){return t.monthsShortRegex(e)}),le("MMMM",function(e,t){return t.monthsRegex(e)}),de(["M","MM"],function(e,t){t[me]=C(e)-1}),de(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[me]=i:d(n).invalidMonth=e});var Me=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ae="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Le="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Re(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=C(t);else if(!a(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Oe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Pe(e){return null!=e?(Re(this,e),n.updateOffset(this,!0),this):Ee(this,"Month")}var Be=ae,Ie=ae;function Fe(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=f([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=ce(r[t]),i[t]=ce(i[t]);for(t=0;t<24;t++)o[t]=ce(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function He(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&0<=e&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function We(e,t,n){var r=7+t-n;return-(7+He(e,0,r).getUTCDay()-t)%7+r-1}function ze(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+We(e,r,i);return a=s<=0?Se(o=e-1)+s:s>Se(e)?(o=e+1,s-Se(e)):(o=e,s),{year:o,dayOfYear:a}}function Ue(e,t,n){var r,i,o=We(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+Ye(i=e.year()-1,t,n):a>Ye(e.year(),t,n)?(r=a-Ye(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Ye(e,t,n){var r=We(e,t,n),i=We(e+1,t,n);return(Se(e)-r+i)/7}U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),B("week",5),B("isoWeek",5),le("w",X),le("ww",X,q),le("W",X),le("WW",X,q),he(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=C(e)}),U("d",0,"do","day"),U("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),U("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),U("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),B("day",11),B("weekday",11),B("isoWeekday",11),le("d",X),le("e",X),le("E",X),le("dd",function(e,t){return t.weekdaysMinRegex(e)}),le("ddd",function(e,t){return t.weekdaysShortRegex(e)}),le("dddd",function(e,t){return t.weekdaysRegex(e)}),he(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:d(n).invalidWeekday=e}),he(["d","e","E"],function(e,t,n,r){t[r]=C(e)});var Ve="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),je="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$e=ae,Ge=ae,Ke=ae;function Xe(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],l=[],u=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),l.push(o),u.push(r),u.push(i),u.push(o);for(a.sort(e),s.sort(e),l.sort(e),u.sort(e),t=0;t<7;t++)s[t]=ce(s[t]),l[t]=ce(l[t]),u[t]=ce(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ze(){return this.hours()%12||12}function Je(e,t){U(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Qe(e,t){return t._meridiemParse}U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Ze),U("k",["kk",2],0,function(){return this.hours()||24}),U("hmm",0,0,function(){return""+Ze.apply(this)+I(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Ze.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),Je("a",!0),Je("A",!1),A("hour","h"),B("hour",13),le("a",Qe),le("A",Qe),le("H",X),le("h",X),le("k",X),le("HH",X,q),le("hh",X,q),le("kk",X,q),le("hmm",Z),le("hmmss",J),le("Hmm",Z),le("Hmmss",J),de(["H","HH"],ve),de(["k","kk"],function(e,t,n){var r=C(e);t[ve]=24===r?0:r}),de(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),de(["h","hh"],function(e,t,n){t[ve]=C(e),d(n).bigHour=!0}),de("hmm",function(e,t,n){var r=e.length-2;t[ve]=C(e.substr(0,r)),t[ye]=C(e.substr(r)),d(n).bigHour=!0}),de("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[ve]=C(e.substr(0,r)),t[ye]=C(e.substr(r,2)),t[be]=C(e.substr(i)),d(n).bigHour=!0}),de("Hmm",function(e,t,n){var r=e.length-2;t[ve]=C(e.substr(0,r)),t[ye]=C(e.substr(r))}),de("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[ve]=C(e.substr(0,r)),t[ye]=C(e.substr(r,2)),t[be]=C(e.substr(i))});var et,tt=_e("Hours",!0),nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ae,monthsShort:Le,week:{dow:0,doy:6},weekdays:Ve,weekdaysMin:qe,weekdaysShort:je,meridiemParse:/[ap]\.?m?\.?/i},rt={},it={};function ot(e){return e?e.toLowerCase().replace("_","-"):e}function at(e){var t=null;if(!rt[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=et._abbr,require("./locale/"+e),st(t)}catch(e){}return rt[e]}function st(e,t){var n;return e&&((n=o(t)?ut(e):lt(e,t))?et=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),et._abbr}function lt(e,t){if(null===t)return delete rt[e],null;var n,r=nt;if(t.abbr=e,null!=rt[e])_("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=rt[e]._config;else if(null!=t.parentLocale)if(null!=rt[t.parentLocale])r=rt[t.parentLocale]._config;else{if(null==(n=at(t.parentLocale)))return it[t.parentLocale]||(it[t.parentLocale]=[]),it[t.parentLocale].push({name:e,config:t}),null;r=n._config}return rt[e]=new O(D(r,t)),it[e]&&it[e].forEach(function(e){lt(e.name,e.config)}),st(e),rt[e]}function ut(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return et;if(!r(e)){if(t=at(e))return t;e=[e]}return function(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=ot(e[o]).split("-")).length,n=(n=ot(e[o+1]))?n.split("-"):null;0<t;){if(r=at(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&x(i,n,!0)>=t-1)break;t--}o++}return et}(e)}function ct(e){var t,n=e._a;return n&&-2===d(e).overflow&&(t=n[me]<0||11<n[me]?me:n[ge]<1||n[ge]>Oe(n[pe],n[me])?ge:n[ve]<0||24<n[ve]||24===n[ve]&&(0!==n[ye]||0!==n[be]||0!==n[we])?ve:n[ye]<0||59<n[ye]?ye:n[be]<0||59<n[be]?be:n[we]<0||999<n[we]?we:-1,d(e)._overflowDayOfYear&&(t<pe||ge<t)&&(t=ge),d(e)._overflowWeeks&&-1===t&&(t=Ce),d(e)._overflowWeekday&&-1===t&&(t=xe),d(e).overflow=t),e}function ft(e,t,n){return null!=e?e:null!=t?t:n}function dt(e){var t,r,i,o,a,s=[];if(!e._d){var l,u;for(l=e,u=new Date(n.now()),i=l._useUTC?[u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()]:[u.getFullYear(),u.getMonth(),u.getDate()],e._w&&null==e._a[ge]&&null==e._a[me]&&function(e){var t,n,r,i,o,a,s,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,a=4,n=ft(t.GG,e._a[pe],Ue(Nt(),1,4).year),r=ft(t.W,1),((i=ft(t.E,1))<1||7<i)&&(l=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var u=Ue(Nt(),o,a);n=ft(t.gg,e._a[pe],u.year),r=ft(t.w,u.week),null!=t.d?((i=t.d)<0||6<i)&&(l=!0):null!=t.e?(i=t.e+o,(t.e<0||6<t.e)&&(l=!0)):i=o}r<1||r>Ye(n,o,a)?d(e)._overflowWeeks=!0:null!=l?d(e)._overflowWeekday=!0:(s=ze(n,r,i,o,a),e._a[pe]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=ft(e._a[pe],i[pe]),(e._dayOfYear>Se(a)||0===e._dayOfYear)&&(d(e)._overflowDayOfYear=!0),r=He(a,0,e._dayOfYear),e._a[me]=r.getUTCMonth(),e._a[ge]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ve]&&0===e._a[ye]&&0===e._a[be]&&0===e._a[we]&&(e._nextDay=!0,e._a[ve]=0),e._d=(e._useUTC?He:function(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<100&&0<=e&&isFinite(s.getFullYear())&&s.setFullYear(e),s}).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ve]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(d(e).weekdayMismatch=!0)}}var ht=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],vt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],yt=/^\/?Date\((\-?\d+)/i;function bt(e){var t,n,r,i,o,a,s=e._i,l=ht.exec(s)||pt.exec(s);if(l){for(d(e).iso=!0,t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(l[1])){i=gt[t][0],r=!1!==gt[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,n=vt.length;t<n;t++)if(vt[t][1].exec(l[3])){o=(l[2]||" ")+vt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(l[4]){if(!mt.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),St(e)}else e._isValid=!1}var wt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ct={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function xt(e){var t,n,r,i=wt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(i){var o=function(e,t,n,r,i,o){var a=[function(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}(e),Le.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}(i[4],i[3],i[2],i[5],i[6],i[7]);if(n=o,r=e,(t=i[1])&&je.indexOf(t)!==new Date(n[0],n[1],n[2]).getDay()&&(d(r).weekdayMismatch=!0,!(r._isValid=!1)))return;e._a=o,e._tzm=function(e,t,n){if(e)return Ct[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(i[8],i[9],i[10]),e._d=He.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),d(e).rfc2822=!0}else e._isValid=!1}function St(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],d(e).empty=!0;var t,r,i,o,a,s,l,c,f=""+e._i,h=f.length,p=0;for(i=V(e._f,e._locale).match(F)||[],t=0;t<i.length;t++)(r=(f.match(ue(o=i[t],e))||[])[0])&&(0<(a=f.substr(0,f.indexOf(r))).length&&d(e).unusedInput.push(a),f=f.slice(f.indexOf(r)+r.length),p+=r.length),z[o]?(r?d(e).empty=!1:d(e).unusedTokens.push(o),s=o,c=e,null!=(l=r)&&u(fe,s)&&fe[s](l,c._a,c,s)):e._strict&&!r&&d(e).unusedTokens.push(o);d(e).charsLeftOver=h-p,0<f.length&&d(e).unusedInput.push(f),e._a[ve]<=12&&!0===d(e).bigHour&&0<e._a[ve]&&(d(e).bigHour=void 0),d(e).parsedDateParts=e._a.slice(0),d(e).meridiem=e._meridiem,e._a[ve]=function(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0)),t)}(e._locale,e._a[ve],e._meridiem),dt(e),ct(e)}else xt(e);else bt(e)}function kt(e){var t,u,f,m,v=e._i,w=e._f;return e._locale=e._locale||ut(e._l),null===v||void 0===w&&""===v?p({nullInput:!0}):("string"==typeof v&&(e._i=v=e._locale.preparse(v)),b(v)?new y(ct(v)):(s(v)?e._d=v:r(w)?function(e){var t,n,r,i,o;if(0===e._f.length)return d(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],St(t),h(t)&&(o+=d(t).charsLeftOver,o+=10*d(t).unusedTokens.length,d(t).score=o,(null==r||o<r)&&(r=o,n=t));c(e,n||t)}(e):w?St(e):o(u=(t=e)._i)?t._d=new Date(n.now()):s(u)?t._d=new Date(u.valueOf()):"string"==typeof u?null===(m=yt.exec((f=t)._i))?(bt(f),!1===f._isValid&&(delete f._isValid,xt(f),!1===f._isValid&&(delete f._isValid,n.createFromInputFallback(f)))):f._d=new Date(+m[1]):r(u)?(t._a=l(u.slice(0),function(e){return parseInt(e,10)}),dt(t)):i(u)?function(e){if(!e._d){var t=R(e._i);e._a=l([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),dt(e)}}(t):a(u)?t._d=new Date(u):n.createFromInputFallback(t),h(e)||(e._d=null),e))}function Tt(e,t,n,o,a){var s,l={};return!0!==n&&!1!==n||(o=n,n=void 0),(i(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||r(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=a,l._l=n,l._i=e,l._f=t,l._strict=o,(s=new y(ct(kt(l))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Nt(e,t,n,r){return Tt(e,t,n,r,!1)}n.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var _t=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Nt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:p()}),Et=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Nt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:p()});function Dt(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Nt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Ot=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Mt(e){var t=R(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Te.call(Ot,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Ot.length;++r)if(e[Ot[r]]){if(n)return!1;parseFloat(e[Ot[r]])!==C(e[Ot[r]])&&(n=!0)}return!0}(t),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ut(),this._bubble()}function At(e){return e instanceof Mt}function Lt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Rt(e,t){U(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+I(~~(e/60),2)+t+I(~~e%60,2)})}Rt("Z",":"),Rt("ZZ",""),le("Z",oe),le("ZZ",oe),de(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Bt(oe,e)});var Pt=/([\+\-]|\d\d)/gi;function Bt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Pt)||["-",0,0],i=60*r[1]+C(r[2]);return 0===i?0:"+"===r[0]?i:-i}function It(e,t){var r,i;return t._isUTC?(r=t.clone(),i=(b(e)||s(e)?e.valueOf():Nt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):Nt(e).local()}function Ft(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ht(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var Wt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,zt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ut(e,t){var n,r,i,o=e,s=null;return At(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(o={},t?o[t]=e:o.milliseconds=e):(s=Wt.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:C(s[ge])*n,h:C(s[ve])*n,m:C(s[ye])*n,s:C(s[be])*n,ms:C(Lt(1e3*s[we]))*n}):(s=zt.exec(e))?o={y:Yt(s[2],n="-"===s[1]?-1:1),M:Yt(s[3],n),w:Yt(s[4],n),d:Yt(s[5],n),h:Yt(s[6],n),m:Yt(s[7],n),s:Yt(s[8],n)}:null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=function(e,t){var n;return e.isValid()&&t.isValid()?(t=It(t,e),e.isBefore(t)?n=Vt(e,t):((n=Vt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(Nt(o.from),Nt(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new Mt(o),At(e)&&u(e,"_locale")&&(r._locale=e._locale),r}function Yt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Vt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function jt(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(_(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),qt(this,Ut(n="string"==typeof n?+n:n,r),e),this}}function qt(e,t,r,i){var o=t._milliseconds,a=Lt(t._days),s=Lt(t._months);e.isValid()&&(i=null==i||i,s&&Re(e,Ee(e,"Month")+s*r),a&&De(e,"Date",Ee(e,"Date")+a*r),o&&e._d.setTime(e._d.valueOf()+o*r),i&&n.updateOffset(e,a||s))}Ut.fn=Mt.prototype,Ut.invalid=function(){return Ut(NaN)};var $t=jt(1,"add"),Gt=jt(-1,"subtract");function Kt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Xt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ut(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Zt=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Jt(){return this._locale}function Qt(e,t){U(0,[e,e.length],0,t)}function en(e,t,n,r,i){var o;return null==e?Ue(this,r,i).year:((o=Ye(e,r,i))<t&&(t=o),(function(e,t,n,r,i){var o=ze(e,t,n,r,i),a=He(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}).call(this,e,t,n,r,i))}U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Qt("gggg","weekYear"),Qt("ggggg","weekYear"),Qt("GGGG","isoWeekYear"),Qt("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),B("weekYear",1),B("isoWeekYear",1),le("G",re),le("g",re),le("GG",X,q),le("gg",X,q),le("GGGG",ee,G),le("gggg",ee,G),le("GGGGG",te,K),le("ggggg",te,K),he(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=C(e)}),he(["gg","GG"],function(e,t,r,i){t[i]=n.parseTwoDigitYear(e)}),U("Q",0,"Qo","quarter"),A("quarter","Q"),B("quarter",7),le("Q",j),de("Q",function(e,t){t[me]=3*(C(e)-1)}),U("D",["DD",2],"Do","date"),A("date","D"),B("date",9),le("D",X),le("DD",X,q),le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),de(["D","DD"],ge),de("Do",function(e,t){t[ge]=C(e.match(X)[0])});var tn=_e("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),B("dayOfYear",4),le("DDD",Q),le("DDDD",$),de(["DDD","DDDD"],function(e,t,n){n._dayOfYear=C(e)}),U("m",["mm",2],0,"minute"),A("minute","m"),B("minute",14),le("m",X),le("mm",X,q),de(["m","mm"],ye);var nn=_e("Minutes",!1);U("s",["ss",2],0,"second"),A("second","s"),B("second",15),le("s",X),le("ss",X,q),de(["s","ss"],be);var rn,on=_e("Seconds",!1);for(U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),B("millisecond",16),le("S",Q,j),le("SS",Q,q),le("SSS",Q,$),rn="SSSS";rn.length<=9;rn+="S")le(rn,ne);function an(e,t){t[we]=C(1e3*("0."+e))}for(rn="S";rn.length<=9;rn+="S")de(rn,an);var sn=_e("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var ln=y.prototype;function un(e){return e}ln.add=$t,ln.calendar=function(e,t){var r=e||Nt(),i=It(r,this).startOf("day"),o=n.calendarFormat(this,i)||"sameElse",a=t&&(E(t[o])?t[o].call(this,r):t[o]);return this.format(a||this.localeData().calendar(o,this,Nt(r)))},ln.clone=function(){return new y(this)},ln.diff=function(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=It(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=L(t)){case"year":o=Kt(this,r)/12;break;case"month":o=Kt(this,r);break;case"quarter":o=Kt(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:w(o)},ln.endOf=function(e){return void 0===(e=L(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},ln.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=Y(this,e);return this.localeData().postformat(t)},ln.from=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||Nt(e).isValid())?Ut({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.fromNow=function(e){return this.from(Nt(),e)},ln.to=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||Nt(e).isValid())?Ut({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.toNow=function(e){return this.to(Nt(),e)},ln.get=function(e){return E(this[e=L(e)])?this[e]():this},ln.invalidAt=function(){return d(this).overflow},ln.isAfter=function(e,t){var n=b(e)?e:Nt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=L(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},ln.isBefore=function(e,t){var n=b(e)?e:Nt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=L(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},ln.isBetween=function(e,t,n,r){var i=b(e)?e:Nt(e),o=b(t)?t:Nt(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},ln.isSame=function(e,t){var n,r=b(e)?e:Nt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=L(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},ln.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ln.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ln.isValid=function(){return h(this)},ln.lang=Zt,ln.locale=Xt,ln.localeData=Jt,ln.max=Et,ln.min=_t,ln.parsingFlags=function(){return c({},d(this))},ln.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:P[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=R(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(E(this[e=L(e)]))return this[e](t);return this},ln.startOf=function(e){switch(e=L(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},ln.subtract=Gt,ln.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ln.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ln.toDate=function(){return new Date(this.valueOf())},ln.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?Y(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Y(n,"Z")):Y(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ln.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+t+'[")]')},ln.toJSON=function(){return this.isValid()?this.toISOString():null},ln.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ln.unix=function(){return Math.floor(this.valueOf()/1e3)},ln.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ln.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ln.year=Ne,ln.isLeapYear=function(){return ke(this.year())},ln.weekYear=function(e){return en.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ln.isoWeekYear=function(e){return en.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ln.quarter=ln.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ln.month=Pe,ln.daysInMonth=function(){return Oe(this.year(),this.month())},ln.week=ln.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ln.isoWeek=ln.isoWeeks=function(e){var t=Ue(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ln.weeksInYear=function(){var e=this.localeData()._week;return Ye(this.year(),e.dow,e.doy)},ln.isoWeeksInYear=function(){return Ye(this.year(),1,4)},ln.date=tn,ln.day=ln.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,r=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-r,"d")):r},ln.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ln.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,r=(t=e,n=this.localeData(),"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?r:r-7)},ln.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ln.hour=ln.hours=tt,ln.minute=ln.minutes=nn,ln.second=ln.seconds=on,ln.millisecond=ln.milliseconds=sn,ln.utcOffset=function(e,t,r){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?o:Ft(this);if("string"==typeof e){if(null===(e=Bt(oe,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(i=Ft(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?qt(this,Ut(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this},ln.utc=function(e){return this.utcOffset(0,e)},ln.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ft(this),"m")),this},ln.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Bt(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ln.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Nt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ln.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ln.isLocal=function(){return!!this.isValid()&&!this._isUTC},ln.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ln.isUtc=Ht,ln.isUTC=Ht,ln.zoneAbbr=function(){return this._isUTC?"UTC":""},ln.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ln.dates=k("dates accessor is deprecated. Use date instead.",tn),ln.months=k("months accessor is deprecated. Use month instead",Pe),ln.years=k("years accessor is deprecated. Use year instead",Ne),ln.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),ln.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),(e=kt(e))._a){var t=e._isUTC?f(e._a):Nt(e._a);this._isDSTShifted=this.isValid()&&0<x(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var cn=O.prototype;function fn(e,t,n,r){var i=ut(),o=f().set(r,t);return i[n](o,e)}function dn(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return fn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=fn(e,r,n,"month");return i}function hn(e,t,n,r){"boolean"==typeof e?a(t)&&(n=t,t=void 0):(t=e,e=!1,a(n=t)&&(n=t,t=void 0)),t=t||"";var i,o=ut(),s=e?o._week.dow:0;if(null!=n)return fn(t,(n+s)%7,r,"day");var l=[];for(i=0;i<7;i++)l[i]=fn(t,(i+s)%7,r,"day");return l}cn.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return E(r)?r.call(t,n):r},cn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},cn.invalidDate=function(){return this._invalidDate},cn.ordinal=function(e){return this._ordinal.replace("%d",e)},cn.preparse=un,cn.postformat=un,cn.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return E(i)?i(e,t,n,r):i.replace(/%d/i,e)},cn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)},cn.set=function(e){var t,n;for(n in e)E(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},cn.months=function(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Me).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone},cn.monthsShort=function(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Me.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},cn.monthsParse=function(e,t,n){var r,i,o;if(this._monthsParseExact)return(function(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Te.call(this._shortMonthsParse,a))?i:null:-1!==(i=Te.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Te.call(this._shortMonthsParse,a))?i:-1!==(i=Te.call(this._longMonthsParse,a))?i:null:-1!==(i=Te.call(this._longMonthsParse,a))?i:-1!==(i=Te.call(this._shortMonthsParse,a))?i:null}).call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},cn.monthsRegex=function(e){return this._monthsParseExact?(u(this,"_monthsRegex")||Fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=Ie),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},cn.monthsShortRegex=function(e){return this._monthsParseExact?(u(this,"_monthsRegex")||Fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Be),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},cn.week=function(e){return Ue(e,this._week.dow,this._week.doy).week},cn.firstDayOfYear=function(){return this._week.doy},cn.firstDayOfWeek=function(){return this._week.dow},cn.weekdays=function(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone},cn.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},cn.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},cn.weekdaysParse=function(e,t,n){var r,i,o;if(this._weekdaysParseExact)return(function(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Te.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Te.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Te.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Te.call(this._weekdaysParse,a))?i:-1!==(i=Te.call(this._shortWeekdaysParse,a))?i:-1!==(i=Te.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Te.call(this._shortWeekdaysParse,a))?i:-1!==(i=Te.call(this._weekdaysParse,a))?i:-1!==(i=Te.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Te.call(this._minWeekdaysParse,a))?i:-1!==(i=Te.call(this._weekdaysParse,a))?i:-1!==(i=Te.call(this._shortWeekdaysParse,a))?i:null}).call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},cn.weekdaysRegex=function(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=$e),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},cn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ge),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},cn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ke),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},cn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},cn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},st("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===C(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=k("moment.lang is deprecated. Use moment.locale instead.",st),n.langData=k("moment.langData is deprecated. Use moment.localeData instead.",ut);var pn=Math.abs;function mn(e,t,n,r){var i=Ut(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function gn(e){return e<0?Math.floor(e):Math.ceil(e)}function vn(e){return 4800*e/146097}function yn(e){return 146097*e/4800}function bn(e){return function(){return this.as(e)}}var wn=bn("ms"),Cn=bn("s"),xn=bn("m"),Sn=bn("h"),kn=bn("d"),Tn=bn("w"),Nn=bn("M"),_n=bn("y");function En(e){return function(){return this.isValid()?this._data[e]:NaN}}var Dn=En("milliseconds"),On=En("seconds"),Mn=En("minutes"),An=En("hours"),Ln=En("days"),Rn=En("months"),Pn=En("years"),Bn=Math.round,In={ss:44,s:45,m:45,h:22,d:26,M:11},Fn=Math.abs;function Hn(e){return(0<e)-(e<0)||+e}function Wn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Fn(this._milliseconds)/1e3,r=Fn(this._days),i=Fn(this._months);t=w((e=w(n/60))/60),n%=60,e%=60;var o=w(i/12),a=i%=12,s=r,l=t,u=e,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",f=this.asSeconds();if(!f)return"P0D";var d=f<0?"-":"",h=Hn(this._months)!==Hn(f)?"-":"",p=Hn(this._days)!==Hn(f)?"-":"",m=Hn(this._milliseconds)!==Hn(f)?"-":"";return d+"P"+(o?h+o+"Y":"")+(a?h+a+"M":"")+(s?p+s+"D":"")+(l||u||c?"T":"")+(l?m+l+"H":"")+(u?m+u+"M":"")+(c?m+c+"S":"")}var zn=Mt.prototype;return zn.isValid=function(){return this._isValid},zn.abs=function(){var e=this._data;return this._milliseconds=pn(this._milliseconds),this._days=pn(this._days),this._months=pn(this._months),e.milliseconds=pn(e.milliseconds),e.seconds=pn(e.seconds),e.minutes=pn(e.minutes),e.hours=pn(e.hours),e.months=pn(e.months),e.years=pn(e.years),this},zn.add=function(e,t){return mn(this,e,t,1)},zn.subtract=function(e,t){return mn(this,e,t,-1)},zn.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=L(e))||"year"===e)return n=this._months+vn(t=this._days+r/864e5),"month"===e?n:n/12;switch(t=this._days+Math.round(yn(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},zn.asMilliseconds=wn,zn.asSeconds=Cn,zn.asMinutes=xn,zn.asHours=Sn,zn.asDays=kn,zn.asWeeks=Tn,zn.asMonths=Nn,zn.asYears=_n,zn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*C(this._months/12):NaN},zn._bubble=function(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return 0<=o&&0<=a&&0<=s||o<=0&&a<=0&&s<=0||(o+=864e5*gn(yn(s)+a),s=a=0),l.milliseconds=o%1e3,e=w(o/1e3),l.seconds=e%60,t=w(e/60),l.minutes=t%60,n=w(t/60),l.hours=n%24,s+=i=w(vn(a+=w(n/24))),a-=gn(yn(i)),r=w(s/12),s%=12,l.days=a,l.months=s,l.years=r,this},zn.clone=function(){return Ut(this)},zn.get=function(e){return e=L(e),this.isValid()?this[e+"s"]():NaN},zn.milliseconds=Dn,zn.seconds=On,zn.minutes=Mn,zn.hours=An,zn.days=Ln,zn.weeks=function(){return w(this.days()/7)},zn.months=Rn,zn.years=Pn,zn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,n,r,i,o,a,s,l,u,c,f=this.localeData(),d=(t=!e,n=f,r=Ut(this).abs(),i=Bn(r.as("s")),o=Bn(r.as("m")),a=Bn(r.as("h")),s=Bn(r.as("d")),l=Bn(r.as("M")),u=Bn(r.as("y")),(c=i<=In.ss&&["s",i]||i<In.s&&["ss",i]||o<=1&&["m"]||o<In.m&&["mm",o]||a<=1&&["h"]||a<In.h&&["hh",a]||s<=1&&["d"]||s<In.d&&["dd",s]||l<=1&&["M"]||l<In.M&&["MM",l]||u<=1&&["y"]||["yy",u])[2]=t,c[3]=0<+this,c[4]=n,(function(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}).apply(null,c));return e&&(d=f.pastFuture(+this,d)),f.postformat(d)},zn.toISOString=Wn,zn.toString=Wn,zn.toJSON=Wn,zn.locale=Xt,zn.localeData=Jt,zn.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Wn),zn.lang=Zt,U("X",0,0,"unix"),U("x",0,0,"valueOf"),le("x",re),le("X",/[+-]?\d+(\.\d{1,3})?/),de("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),de("x",function(e,t,n){n._d=new Date(C(e))}),n.version="2.23.0",e=Nt,n.fn=ln,n.min=function(){return Dt("isBefore",[].slice.call(arguments,0))},n.max=function(){return Dt("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=f,n.unix=function(e){return Nt(1e3*e)},n.months=function(e,t){return dn(e,t,"months")},n.isDate=s,n.locale=st,n.invalid=p,n.duration=Ut,n.isMoment=b,n.weekdays=function(e,t,n){return hn(e,t,n,"weekdays")},n.parseZone=function(){return Nt.apply(null,arguments).parseZone()},n.localeData=ut,n.isDuration=At,n.monthsShort=function(e,t){return dn(e,t,"monthsShort")},n.weekdaysMin=function(e,t,n){return hn(e,t,n,"weekdaysMin")},n.defineLocale=lt,n.updateLocale=function(e,t){if(null!=t){var n,r,i=nt;null!=(r=at(e))&&(i=r._config),(n=new O(t=D(i,t))).parentLocale=rt[e],rt[e]=n,st(e)}else null!=rt[e]&&(null!=rt[e].parentLocale?rt[e]=rt[e].parentLocale:null!=rt[e]&&delete rt[e]);return rt[e]},n.locales=function(){return T(rt)},n.weekdaysShort=function(e,t,n){return hn(e,t,n,"weekdaysShort")},n.normalizeUnits=L,n.relativeTimeRounding=function(e){return void 0===e?Bn:"function"==typeof e&&(Bn=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==In[e]&&(void 0===t?In[e]:(In[e]=t,"s"===e&&(In.ss=t-1),!0))},n.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},n.prototype=ln,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}),function(){"use strict";var e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},n=function(e){return function(){return e}},r=function(e){return e};function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.concat(n);return e.apply(null,i)}}var o,a,s,l,u,c,f,d,h,p,m,g,v,y,b,w,C,x=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},S=n(!1),k=n(!0),T=S,N=k,_=function(){return E},E=(l={fold:function(e,t){return e()},is:T,isSome:T,isNone:N,getOr:s=function(e){return e},getOrThunk:a=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:s,orThunk:a,map:_,ap:_,each:function(){},bind:_,flatten:_,exists:T,forall:N,filter:_,equals:o=function(e){return e.isNone()},equals_:o,toArray:function(){return[]},toString:n("none()")},Object.freeze&&Object.freeze(l),l),D=function(e){var t=function(){return e},n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:N,isNone:T,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return D(t(e))},ap:function(t){return t.fold(_,function(t){return D(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?i:E},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(T,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},O={some:D,none:_,from:function(e){return null===e||void 0===e?E:D(e)}},M=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},A=M("string"),L=M("object"),R=M("array"),P=M("null"),B=M("boolean"),I=M("function"),F=M("number"),H=void 0===(u=Array.prototype.indexOf)?function(e,t){return G(e,t)}:function(e,t){return u.call(e,t)},W=function(e,t){return-1<H(e,t)},z=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=t(e[i],i,e);return r},U=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},Y=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},V=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},j=function(e,t,n){return U(e,function(e){n=t(n,e)}),n},q=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return O.some(i)}return O.none()},$=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return O.some(n);return O.none()},G=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},K=Array.prototype.push,X=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);K.apply(t,e[n])}return t}(z(e,t))},Z=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},J=Array.prototype.slice,Q=function(e,t){return V(e,function(e){return!W(t,e)})},ee=function(e){return 0===e.length?O.none():O.some(e[0])},te=function(e){return 0===e.length?O.none():O.some(e[e.length-1])},ne=I(Array.from)?Array.from:function(e){return J.call(e)},re="undefined"!=typeof window?window:Function("return this;")(),ie={getOrDie:function(e,t){var n=function(e,t){return function(e,t){for(var n=void 0!==t&&null!==t?t:re,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n}(e.split("."),t)}(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n}},oe=function(){return ie.getOrDie("URL")},ae={createObjectURL:function(e){return oe().createObjectURL(e)},revokeObjectURL:function(e){oe().revokeObjectURL(e)}},se=navigator,le=se.userAgent,ue=function(e){return"matchMedia"in window&&matchMedia(e).matches};v=/Android/.test(le),f=(f=!(c=/WebKit/.test(le))&&/MSIE/gi.test(le)&&/Explorer/gi.test(se.appName))&&/MSIE (\w+)\./.exec(le)[1],d=-1!==le.indexOf("Trident/")&&(-1!==le.indexOf("rv:")||-1!==se.appName.indexOf("Netscape"))&&11,h=-1!==le.indexOf("Edge/")&&!f&&!d&&12,f=f||d||h,p=!c&&!d&&/Gecko/.test(le),m=-1!==le.indexOf("Mac"),g=/(iPad|iPhone)/.test(le),y="FormData"in window&&"FileReader"in window&&"URL"in window&&!!ae.createObjectURL,b=ue("only screen and (max-device-width: 480px)")&&(v||g),w=ue("only screen and (min-width: 800px)")&&(v||g),C=-1!==le.indexOf("Windows Phone"),h&&(c=!1);var ce,fe={opera:!1,webkit:c,ie:f,gecko:p,mac:m,iOS:g,android:v,contentEditable:!g||y||534<=parseInt(le.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==f,range:window.getSelection&&"Range"in window,documentMode:f&&!h?document.documentMode||7:10,fileApi:y,ceFalse:!1===f||8<f,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===f||11<f,desktop:!b&&!w,windowsPhone:C},de=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(t,e(o,this),e(a,this))},r=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function i(e){var t=this;null!==this._state?r(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function o(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void l(e(n,t),e(o,this),e(a,this))}this._state=!0,this._value=t,s.call(this)}catch(e){a.call(this,e)}}function a(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)i.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var r=this;return new n(function(n,o){i.call(r,new function(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}(e,t,n,o))})},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new n(function(t,n){if(0===e.length)return t([]);var r=e.length;function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(o,e)},n)}e[o]=a,0==--r&&t(e)}catch(e){n(e)}}for(var o=0;o<e.length;o++)i(o,e[o])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},n}(),he=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},pe=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},me=function(e,t){var n,r;return(r=function(){var r=arguments;clearTimeout(n),n=he(function(){e.apply(this,r)},t)}).stop=function(){clearTimeout(n)},r},ge={requestAnimationFrame:function(e,t){ce?ce.then(e):ce=new de(function(e){t||(t=document.body),function(e,t){var n,r=window.requestAnimationFrame,i=["ms","moz","webkit"];for(n=0;n<i.length&&!r;n++)r=window[i[n]+"RequestAnimationFrame"];r||(r=function(e){window.setTimeout(e,0)}),r(e,t)}(e,t)}).then(e)},setTimeout:he,setInterval:pe,setEditorTimeout:function(e,t,n){return he(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=pe(function(){e.removed?clearInterval(r):t()},n)},debounce:me,throttle:me,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},ve=/^(?:mouse|contextmenu)|click/,ye={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},be=function(){return!1},we=function(){return!0},Ce=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},xe=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Se=function(e,t){var n,r,i=t||{};for(n in e)ye[n]||(i[n]=e[n]);if(i.target||(i.target=i.srcElement||document),fe.experimentalShadowDom&&(i.target=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&0<n.length)return n[0]}return t}(e,i.target)),e&&ve.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var o=i.target.ownerDocument||document,a=o.documentElement,s=o.body;i.pageX=e.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),i.pageY=e.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}return i.preventDefault=function(){i.isDefaultPrevented=we,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=we,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},!(i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=we,i.stopPropagation()})==((r=i).isDefaultPrevented===we||r.isDefaultPrevented===be)&&(i.isDefaultPrevented=be,i.isPropagationStopped=be,i.isImmediatePropagationStopped=be),void 0===i.metaKey&&(i.metaKey=!1),i},ke=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded)t(i);else{var o=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(i))},s=function(){o()&&(xe(r,"readystatechange",s),a())},l=function(){try{r.documentElement.doScroll("left")}catch(e){return void ge.setTimeout(l)}a()};!r.addEventListener||fe.ie&&fe.ie<11?(Ce(r,"readystatechange",s),r.documentElement.doScroll&&e.self===e.top&&l()):o()?a():Ce(e,"DOMContentLoaded",a),Ce(e,"load",a)}},Te=function(){var e,t,n,r,i,o=this,a={};t="mce-data-"+(+new Date).toString(32),r="onmouseenter"in document.documentElement,n="onfocusin"in document.documentElement,i={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,o.domLoaded=!1,o.events=a;var s=function(e,t){var n,r,i,o,s=a[t];if(n=s&&s[e.type])for(r=0,i=n.length;r<i;r++)if((o=n[r])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};o.bind=function(l,u,c,f){var d,h,p,m,g,v,y,b=window,w=function(e){s(Se(e||b.event),d)};if(l&&3!==l.nodeType&&8!==l.nodeType){for(l[t]?d=l[t]:(d=e++,l[t]=d,a[d]={}),f=f||l,p=(u=u.split(" ")).length;p--;)v=w,g=y=!1,"DOMContentLoaded"===(m=u[p])&&(m="ready"),o.domLoaded&&"ready"===m&&"complete"===l.readyState?c.call(f,Se({type:m})):(r||(g=i[m])&&(v=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Se(e||b.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s(e,d))}),n||"focusin"!==m&&"focusout"!==m||(y=!0,g="focusin"===m?"focus":"blur",v=function(e){(e=Se(e||b.event)).type="focus"===e.type?"focusin":"focusout",s(e,d)}),(h=a[d][m])?"ready"===m&&o.domLoaded?c({type:m}):h.push({func:c,scope:f}):(a[d][m]=h=[{func:c,scope:f}],h.fakeName=g,h.capture=y,h.nativeHandler=v,"ready"===m?ke(l,v,o):Ce(l,g||m,v,y)));return l=h=0,c}},o.unbind=function(e,n,r){var i,s,l,u,c,f;if(!e||3===e.nodeType||8===e.nodeType)return o;if(i=e[t]){if(f=a[i],n){for(l=(n=n.split(" ")).length;l--;)if(s=f[c=n[l]]){if(r)for(u=s.length;u--;)if(s[u].func===r){var d=s.nativeHandler,h=s.fakeName,p=s.capture;(s=s.slice(0,u).concat(s.slice(u+1))).nativeHandler=d,s.fakeName=h,s.capture=p,f[c]=s}r&&0!==s.length||(delete f[c],xe(e,s.fakeName||c,s.nativeHandler,s.capture))}}else{for(c in f)xe(e,(s=f[c]).fakeName||c,s.nativeHandler,s.capture);f={}}for(c in f)return o;delete a[i];try{delete e[t]}catch(n){e[t]=null}}return o},o.fire=function(e,n,r){var i;if(!e||3===e.nodeType||8===e.nodeType)return o;for((r=Se(null,r)).type=n,r.target=e;(i=e[t])&&s(r,i),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!r.isPropagationStopped(););return o},o.clean=function(e){var n,r,i=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[t]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=(r=e.getElementsByTagName("*")).length;n--;)(e=r[n])[t]&&i(e);return o},o.destroy=function(){a={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};Te.Event=new Te,Te.Event.bind(window,"ready",function(){});var Ne,_e,Ee,De,Oe,Me,Ae,Le,Re,Pe,Be,Ie,Fe,He,We,ze,Ue,Ye,Ve="sizzle"+-new Date,je=window.document,qe=0,$e=0,Ge=Nt(),Ke=Nt(),Xe=Nt(),Ze=function(e,t){return e===t&&(Be=!0),0},Je="undefined",Qe={}.hasOwnProperty,et=[],tt=et.pop,nt=et.push,rt=et.push,it=et.slice,ot=et.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},at="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",lt="\\["+at+"*("+st+")(?:"+at+"*([*^$|!~]?=)"+at+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+at+"*\\]",ut=":("+st+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+lt+")*)|.*)\\)|)",ct=new RegExp("^"+at+"+|((?:^|[^\\\\])(?:\\\\.)*)"+at+"+$","g"),ft=new RegExp("^"+at+"*,"+at+"*"),dt=new RegExp("^"+at+"*([>+~]|"+at+")"+at+"*"),ht=new RegExp("="+at+"*([^\\]'\"]*?)"+at+"*\\]","g"),pt=new RegExp(ut),mt=new RegExp("^"+st+"$"),gt={ID:new RegExp("^#("+st+")"),CLASS:new RegExp("^\\.("+st+")"),TAG:new RegExp("^("+st+"|[*])"),ATTR:new RegExp("^"+lt),PSEUDO:new RegExp("^"+ut),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+at+"*(even|odd|(([+-]|)(\\d*)n|)"+at+"*(?:([+-]|)"+at+"*(\\d+)|))"+at+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+at+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+at+"*((?:-\\d)?\\d*)"+at+"*\\)|)(?=[^-]|$)","i")},vt=/^(?:input|select|textarea|button)$/i,yt=/^h\d$/i,bt=/^[^{]+\{\s*\[native \w/,wt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ct=/[+~]/,xt=/'|\\/g,St=new RegExp("\\\\([\\da-f]{1,6}"+at+"?|("+at+")|.)","ig"),kt=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{rt.apply(et=it.call(je.childNodes),je.childNodes)}catch(e){rt={apply:et.length?function(e,t){nt.apply(e,it.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var Tt=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h;if((t?t.ownerDocument||t:je)!==Fe&&Ie(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=(t=t||Fe).nodeType)&&9!==s)return[];if(We&&!r){if(i=wt.exec(e))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&Ye(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return rt.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&_e.getElementsByClassName)return rt.apply(n,t.getElementsByClassName(a)),n}if(_e.qsa&&(!ze||!ze.test(e))){if(f=c=Ve,d=t,h=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=Me(e),(c=t.getAttribute("id"))?f=c.replace(xt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+Rt(u[l]);d=Ct.test(e)&&At(t.parentNode)||t,h=u.join(",")}if(h)try{return rt.apply(n,d.querySelectorAll(h)),n}catch(e){}finally{c||t.removeAttribute("id")}}}return Le(e.replace(ct,"$1"),t,n,r)};function Nt(){var e=[];return function t(n,r){return e.push(n+" ")>Ee.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function _t(e){return e[Ve]=!0,e}function Et(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Dt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function Ot(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function Mt(e){return _t(function(t){return t=+t,_t(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function At(e){return e&&typeof e.getElementsByTagName!==Je&&e}for(Ne in _e=Tt.support={},Oe=Tt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},Ie=Tt.setDocument=function(e){var t,n=e?e.ownerDocument||e:je,r=n.defaultView;return n!==Fe&&9===n.nodeType&&n.documentElement?(He=(Fe=n).documentElement,We=!Oe(n),r&&r!==function(e){try{return e.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",function(){Ie()},!1):r.attachEvent&&r.attachEvent("onunload",function(){Ie()})),_e.attributes=!0,_e.getElementsByTagName=!0,_e.getElementsByClassName=bt.test(n.getElementsByClassName),_e.getById=!0,Ee.find.ID=function(e,t){if(typeof t.getElementById!==Je&&We){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Ee.filter.ID=function(e){var t=e.replace(St,kt);return function(e){return e.getAttribute("id")===t}},Ee.find.TAG=_e.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Je)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},Ee.find.CLASS=_e.getElementsByClassName&&function(e,t){if(We)return t.getElementsByClassName(e)},Ue=[],ze=[],_e.disconnectedMatch=!0,ze=ze.length&&new RegExp(ze.join("|")),Ue=Ue.length&&new RegExp(Ue.join("|")),t=bt.test(He.compareDocumentPosition),Ye=t||bt.test(He.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Ze=t?function(e,t){if(e===t)return Be=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!_e.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===je&&Ye(je,e)?-1:t===n||t.ownerDocument===je&&Ye(je,t)?1:Pe?ot.call(Pe,e)-ot.call(Pe,t):0:4&r?-1:1)}:function(e,t){if(e===t)return Be=!0,0;var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:Pe?ot.call(Pe,e)-ot.call(Pe,t):0;if(o===a)return Et(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;s[i]===l[i];)i++;return i?Et(s[i],l[i]):s[i]===je?-1:l[i]===je?1:0},n):Fe},Tt.matches=function(e,t){return Tt(e,null,null,t)},Tt.matchesSelector=function(e,t){if((e.ownerDocument||e)!==Fe&&Ie(e),t=t.replace(ht,"='$1']"),_e.matchesSelector&&We&&(!Ue||!Ue.test(t))&&(!ze||!ze.test(t)))try{var n=(void 0).call(e,t);if(n||_e.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<Tt(t,Fe,null,[e]).length},Tt.contains=function(e,t){return(e.ownerDocument||e)!==Fe&&Ie(e),Ye(e,t)},Tt.attr=function(e,t){(e.ownerDocument||e)!==Fe&&Ie(e);var n=Ee.attrHandle[t.toLowerCase()],r=n&&Qe.call(Ee.attrHandle,t.toLowerCase())?n(e,t,!We):void 0;return void 0!==r?r:_e.attributes||!We?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},Tt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Tt.uniqueSort=function(e){var t,n=[],r=0,i=0;if(Be=!_e.detectDuplicates,Pe=!_e.sortStable&&e.slice(0),e.sort(Ze),Be){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return Pe=null,e},De=Tt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=De(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=De(t);return n},(Ee=Tt.selectors={cacheLength:50,createPseudo:_t,match:gt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(St,kt),e[3]=(e[3]||e[4]||e[5]||"").replace(St,kt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Tt.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Tt.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return gt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pt.test(n)&&(t=Me(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(St,kt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Ge[e+" "];return t||(t=new RegExp("(^|"+at+")"+e+"("+at+"|$)"))&&Ge(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Je&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=Tt.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&-1<i.indexOf(n):"$="===t?n&&i.slice(-n.length)===n:"~="===t?-1<(" "+i+" ").indexOf(n):"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,f,d,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(h=(u=(c=g[Ve]||(g[Ve]={}))[e]||[])[0]===qe&&u[1],d=u[0]===qe&&u[2],f=h&&g.childNodes[h];f=++h&&f&&f[m]||(d=h=0)||p.pop();)if(1===f.nodeType&&++d&&f===t){c[e]=[qe,h,d];break}}else if(y&&(u=(t[Ve]||(t[Ve]={}))[e])&&u[0]===qe)d=u[1];else for(;(f=++h&&f&&f[m]||(d=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++d||(y&&((f[Ve]||(f[Ve]={}))[e]=[qe,d]),f!==t)););return(d-=i)===r||d%r==0&&0<=d/r}}},PSEUDO:function(e,t){var n,r=Ee.pseudos[e]||Ee.setFilters[e.toLowerCase()]||Tt.error("unsupported pseudo: "+e);return r[Ve]?r(t):1<r.length?(n=[e,e,"",t],Ee.setFilters.hasOwnProperty(e.toLowerCase())?_t(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=ot.call(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:_t(function(e){var t=[],n=[],r=Ae(e.replace(ct,"$1"));return r[Ve]?_t(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:_t(function(e){return function(t){return 0<Tt(e,t).length}}),contains:_t(function(e){return e=e.replace(St,kt),function(t){return-1<(t.textContent||t.innerText||De(t)).indexOf(e)}}),lang:_t(function(e){return mt.test(e||"")||Tt.error("unsupported lang: "+e),e=e.replace(St,kt).toLowerCase(),function(t){var n;do{if(n=We?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===He},focus:function(e){return e===Fe.activeElement&&(!Fe.hasFocus||Fe.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Ee.pseudos.empty(e)},header:function(e){return yt.test(e.nodeName)},input:function(e){return vt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:Mt(function(){return[0]}),last:Mt(function(e,t){return[t-1]}),eq:Mt(function(e,t,n){return[n<0?n+t:n]}),even:Mt(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:Mt(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:Mt(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:Mt(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=Ee.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Ee.pseudos[Ne]=Dt(Ne);for(Ne in{submit:!0,reset:!0})Ee.pseudos[Ne]=Ot(Ne);function Lt(){}function Rt(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function Pt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=$e++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,u=[qe,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if((s=(l=t[Ve]||(t[Ve]={}))[r])&&s[0]===qe&&s[1]===o)return u[2]=s[2];if((l[r]=u)[2]=e(t,n,a))return!0}}}function Bt(e){return 1<e.length?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function It(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function Ft(e,t,n,r,i,o){return r&&!r[Ve]&&(r=Ft(r)),i&&!i[Ve]&&(i=Ft(i,o)),_t(function(o,a,s,l){var u,c,f,d=[],h=[],p=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)Tt(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:It(m,d,e,s,l),v=n?i||(o?e:p||r)?[]:a:g;if(n&&n(g,v,s,l),r)for(u=It(v,h),r(u,[],s,l),c=u.length;c--;)(f=u[c])&&(v[h[c]]=!(g[h[c]]=f));if(o){if(i||e){if(i){for(u=[],c=v.length;c--;)(f=v[c])&&u.push(g[c]=f);i(null,v=[],u,l)}for(c=v.length;c--;)(f=v[c])&&-1<(u=i?ot.call(o,f):d[c])&&(o[u]=!(a[u]=f))}}else v=It(v===a?v.splice(p,v.length):v),i?i(null,a,v,l):rt.apply(a,v)})}function Ht(e){for(var t,n,r,i=e.length,o=Ee.relative[e[0].type],a=o||Ee.relative[" "],s=o?1:0,l=Pt(function(e){return e===t},a,!0),u=Pt(function(e){return-1<ot.call(t,e)},a,!0),c=[function(e,n,r){return!o&&(r||n!==Re)||((t=n).nodeType?l(e,n,r):u(e,n,r))}];s<i;s++)if(n=Ee.relative[e[s].type])c=[Pt(Bt(c),n)];else{if((n=Ee.filter[e[s].type].apply(null,e[s].matches))[Ve]){for(r=++s;r<i&&!Ee.relative[e[r].type];r++);return Ft(1<s&&Bt(c),1<s&&Rt(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ct,"$1"),n,s<r&&Ht(e.slice(s,r)),r<i&&Ht(e=e.slice(r)),r<i&&Rt(e))}c.push(n)}return Bt(c)}Lt.prototype=Ee.filters=Ee.pseudos,Ee.setFilters=new Lt,Me=Tt.tokenize=function(e,t){var n,r,i,o,a,s,l,u=Ke[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=Ee.preFilter;a;){for(o in n&&!(r=ft.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=dt.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ct," ")}),a=a.slice(n.length)),Ee.filter)!(r=gt[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?Tt.error(e):Ke(e,s).slice(0)},Ae=Tt.compile=function(e,t){var n,r,i,o,a,s,l=[],u=[],c=Xe[e+" "];if(!c){for(t||(t=Me(e)),n=t.length;n--;)(c=Ht(t[n]))[Ve]?l.push(c):u.push(c);(c=Xe(e,(r=u,o=0<(i=l).length,a=0<r.length,s=function(e,t,n,s,l){var u,c,f,d=0,h="0",p=e&&[],m=[],g=Re,v=e||a&&Ee.find.TAG("*",l),y=qe+=null==g?1:Math.random()||.1,b=v.length;for(l&&(Re=t!==Fe&&t);h!==b&&null!=(u=v[h]);h++){if(a&&u){for(c=0;f=r[c++];)if(f(u,t,n)){s.push(u);break}l&&(qe=y)}o&&((u=!f&&u)&&d--,e&&p.push(u))}if(d+=h,o&&h!==d){for(c=0;f=i[c++];)f(p,m,t,n);if(e){if(0<d)for(;h--;)p[h]||m[h]||(m[h]=tt.call(s));m=It(m)}rt.apply(s,m),l&&!e&&0<m.length&&1<d+i.length&&Tt.uniqueSort(s)}return l&&(qe=y,Re=g),p},o?_t(s):s))).selector=e}return c},Le=Tt.select=function(e,t,n,r){var i,o,a,s,l,u="function"==typeof e&&e,c=!r&&Me(e=u.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&_e.getById&&9===t.nodeType&&We&&Ee.relative[o[1].type]){if(!(t=(Ee.find.ID(a.matches[0].replace(St,kt),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=gt.needsContext.test(e)?0:o.length;i--&&!Ee.relative[s=(a=o[i]).type];)if((l=Ee.find[s])&&(r=l(a.matches[0].replace(St,kt),Ct.test(o[0].type)&&At(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Rt(o)))return rt.apply(n,r),n;break}}return(u||Ae(e,c))(r,t,!We,n,Ct.test(e)&&At(t.parentNode)||t),n},_e.sortStable=Ve.split("").sort(Ze).join("")===Ve,_e.detectDuplicates=!!Be,Ie(),_e.sortDetached=!0;var Wt=Array.isArray,zt=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},Ut=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},Yt={isArray:Wt,toArray:function(e){var t,n,r=e;if(!Wt(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},each:zt,map:function(e,t){var n=[];return zt(e,function(r,i){n.push(t(r,i,e))}),n},filter:function(e,t){var n=[];return zt(e,function(r,i){t&&!t(r,i,e)||n.push(r)}),n},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},findIndex:Ut,find:function(e,t,n){var r=Ut(e,t,n);return-1!==r?e[r]:void 0},last:function(e){return e[e.length-1]}},Vt=/^\s*|\s*$/g,jt=function(e){return null===e||void 0===e?"":(""+e).replace(Vt,"")},qt=function(e,t){return t?!("array"!==t||!Yt.isArray(e))||typeof e===t:void 0!==e},$t=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),Yt.each(e,function(e,i){if(!1===t.call(r,e,i,n))return!1;$t(e,t,n,r)}))},Gt={trim:jt,isArray:Yt.isArray,is:qt,toArray:Yt.toArray,makeMap:function(e,t,n){var r;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},each:Yt.each,map:Yt.map,grep:Yt.filter,inArray:Yt.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var n,r,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s,l=arguments;for(n=1,r=l.length;n<r;n++)for(i in t=l[n])t.hasOwnProperty(i)&&void 0!==(s=t[i])&&(e[i]=s);return e},create:function(e,t,n){var r,i,o,a,s,l=this,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],!(i=l.createNS(e[3].replace(/\.\w+$/,""),n))[o]){if("static"===e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},u=1),i[o]=t[o],l.extend(i[o].prototype,t),e[5]&&(r=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=u?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],l.each(r,function(e,t){i[o].prototype[t]=r[t]}),l.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==o&&(i[o].prototype[t]=e)})),l.each(t.static,function(e,t){i[o][t]=e})}},walk:$t,createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||qt(e,"array")?e:Yt.map(e.split(t||","),jt)},_addCacheSuffix:function(e){var t=fe.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Kt=document,Xt=Array.prototype.push,Zt=Array.prototype.slice,Jt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Qt=Te.Event,en=Gt.makeMap("children,contents,next,prev"),tn=function(e){return void 0!==e},nn=function(e){return"string"==typeof e},rn=function(e,t){var n,r,i;for(i=(t=t||Kt).createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n},on=function(e,t,n,r){var i;if(nn(t))t=rn(t,bn(e[0]));else if(t.length&&!t.nodeType){if(t=pn.makeArray(t),r)for(i=t.length-1;0<=i;i--)on(e,t[i],n,r);else for(i=0;i<t.length;i++)on(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e},an=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},sn=function(e,t,n){var r,i;return t=pn(t)[0],e.each(function(){var e=this;n&&r===e.parentNode||(r=e.parentNode,i=t.cloneNode(!1),e.parentNode.insertBefore(i,e)),i.appendChild(e)}),e},ln=Gt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),un=Gt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),cn={for:"htmlFor",class:"className",readonly:"readOnly"},fn={float:"cssFloat"},dn={},hn={},pn=function(e,t){return new pn.fn.init(e,t)},mn=/^\s*|\s*$/g,gn=function(e){return null===e||void 0===e?"":(""+e).replace(mn,"")},vn=function(e,t){var n,r,i,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(o=e[r],r,o))break}else for(i=0;i<n&&!1!==t.call(o=e[i],i,o);i++);return e},yn=function(e,t){var n=[];return vn(e,function(e,r){t(r,e)&&n.push(r)}),n},bn=function(e){return e?9===e.nodeType?e:e.ownerDocument:Kt};pn.fn=pn.prototype={constructor:pn,selector:"",context:null,length:0,init:function(e,t){var n,r,i=this;if(!e)return i;if(e.nodeType)return i.context=i[0]=e,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return pn(e).attr(t);i.context=t=document}if(nn(e)){if(!(n="<"===(i.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:Jt.exec(e)))return pn(t).find(e);if(n[1])for(r=rn(e,bn(t)).firstChild;r;)Xt.call(i,r),r=r.nextSibling;else{if(!(r=bn(t).getElementById(n[2])))return i;if(r.id!==n[2])return i.find(e);i.length=1,i[0]=r}}else this.add(e,!1);return i},toArray:function(){return Gt.toArray(this)},add:function(e,t){var n,r,i=this;if(nn(e))return i.add(pn(e));if(!1!==t)for(n=pn.unique(i.toArray().concat(pn.makeArray(e))),i.length=n.length,r=0;r<n.length;r++)i[r]=n[r];else Xt.apply(i,pn.makeArray(e));return i},attr:function(e,t){var n,r=this;if("object"==typeof e)vn(e,function(e,t){r.attr(e,t)});else{if(!tn(t)){if(r[0]&&1===r[0].nodeType){if((n=dn[e])&&n.get)return n.get(r[0],e);if(un[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=dn[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=cn[e]||e))vn(e,function(e,t){n.prop(e,t)});else{if(!tn(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,i=this,o=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)vn(e,function(e,t){i.css(e,t)});else if(tn(t))e=o(e),"number"!=typeof t||ln[e]||(t=t.toString()+"px"),i.each(function(){var n=this.style;if((r=hn[e])&&r.set)r.set(this,t);else{try{this.style[fn[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}});else{if(n=i[0],(r=hn[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[o(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(e){return}}return i},remove:function(){for(var e,t=this.length;t--;)Qt.clean(e=this[t]),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(tn(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){pn(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(tn(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return on(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return on(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?on(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?on(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return pn(e).append(this),this},prependTo:function(e){return pn(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return sn(this,e)},wrapAll:function(e){return sn(this,e,!0)},wrapInner:function(e){return this.each(function(){pn(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){pn(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),pn(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e||(-1!==e.indexOf(" ")?vn(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,o;(o=an(r,e))!==t&&(i=r.className,o?r.className=gn((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)})),n},hasClass:function(e){return an(this[0],e)},each:function(e){return vn(this,e)},on:function(e,t){return this.each(function(){Qt.bind(this,e,t)})},off:function(e,t){return this.each(function(){Qt.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?Qt.fire(this,e.type,e):Qt.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new pn(Zt.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)pn.find(e,this[t],r);return pn(r)},filter:function(e){return pn("function"==typeof e?yn(this.toArray(),function(t,n){return e(n,t)}):pn.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof pn&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&pn(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}}),pn(t)},offset:function(e){var t,n,r,i,o=0,a=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(o=(i=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=i.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:a})},push:Xt,sort:[].sort,splice:[].splice},Gt.extend(pn,{extend:Gt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:Gt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:Gt.isArray,each:vn,trim:gn,grep:yn,find:Tt,expr:Tt.selectors,unique:Tt.uniqueSort,text:Tt.getText,contains:Tt.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return 1===t.length?pn.find.matchesSelector(t[0],e)?[t[0]]:[]:pn.find.matches(e,t)}});var wn=function(e,t,n){var r=[],i=e[t];for("string"!=typeof n&&n instanceof pn&&(n=n[0]);i&&9!==i.nodeType;){if(void 0!==n){if(i===n)break;if("string"==typeof n&&pn(i).is(n))break}1===i.nodeType&&r.push(i),i=i[t]}return r},Cn=function(e,t,n,r){var i=[];for(r instanceof pn&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&pn(e).is(r))break}i.push(e)}return i},xn=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};vn({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return wn(e,"parentNode")},next:function(e){return xn(e,"nextSibling",1)},prev:function(e){return xn(e,"previousSibling",1)},children:function(e){return Cn(e.firstChild,"nextSibling",1)},contents:function(e){return Gt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){pn.fn[e]=function(n){var r=[];return this.each(function(){var e=t.call(r,this,n,r);e&&(pn.isArray(e)?r.push.apply(r,e):r.push(e))}),1<this.length&&(en[e]||(r=pn.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=pn(r),n?r.filter(n):r}}),vn({parentsUntil:function(e,t){return wn(e,"parentNode",t)},nextUntil:function(e,t){return Cn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return Cn(e,"previousSibling",1,t).slice(1)}},function(e,t){pn.fn[e]=function(n,r){var i=[];return this.each(function(){var e=t.call(i,this,n,i);e&&(pn.isArray(e)?i.push.apply(i,e):i.push(e))}),1<this.length&&(i=pn.unique(i),0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())),i=pn(i),r?i.filter(r):i}}),pn.fn.is=function(e){return!!e&&0<this.filter(e).length},pn.fn.init.prototype=pn.fn,pn.overrideDefaults=function(e){var t,n=function(r,i){return t=t||e(),0===arguments.length&&(r=t.element),i||(i=t.context),new n.fn.init(r,i)};return pn.extend(n,this),n};var Sn=function(e,t,n){vn(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};fe.ie&&fe.ie<8&&(Sn(dn,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?void 0:t},size:function(e){var t=e.size;return 20===t?void 0:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?void 0:t}}),Sn(dn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),fe.ie&&fe.ie<9&&(fn.float="styleFloat",Sn(hn,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),pn.attrHooks=dn,pn.cssHooks=hn;var kn,Tn,Nn,_n=function(){return En(0,0)},En=function(e,t){return{major:e,minor:t}},Dn=function(e,t){var n=String(t).toLowerCase();return 0===e.length?_n():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return En(r(1),r(2))}(e,n)},On=_n,Mn="Firefox",An=function(e,t){return function(){return t===e}},Ln=function(e){var t=e.current;return{current:t,version:e.version,isEdge:An("Edge",t),isChrome:An("Chrome",t),isIE:An("IE",t),isOpera:An("Opera",t),isFirefox:An(Mn,t),isSafari:An("Safari",t)}},Rn=function(){return Ln({current:void 0,version:On()})},Pn=Ln,Bn=(n("Edge"),n("Chrome"),n("IE"),n("Opera"),n(Mn),n("Safari"),"Windows"),In="Android",Fn="Solaris",Hn="FreeBSD",Wn=function(e,t){return function(){return t===e}},zn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Wn(Bn,t),isiOS:Wn("iOS",t),isAndroid:Wn(In,t),isOSX:Wn("OSX",t),isLinux:Wn("Linux",t),isSolaris:Wn(Fn,t),isFreeBSD:Wn(Hn,t)}},Un=function(){return zn({current:void 0,version:On()})},Yn=zn,Vn=(n(Bn),n("iOS"),n(In),n("Linux"),n("OSX"),n(Fn),n(Hn),function(e,t){var n=String(t).toLowerCase();return q(e,function(e){return e.search(n)})}),jn=function(e,t){return-1!==e.indexOf(t)},qn=function(e){return e.replace(/^\s+|\s+$/g,"")},$n=function(e){return e.replace(/\s+$/g,"")},Gn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Kn=function(e){return function(t){return jn(t,e)}},Xn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return jn(e,"edge/")&&jn(e,"chrome")&&jn(e,"safari")&&jn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Gn],search:function(e){return jn(e,"chrome")&&!jn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return jn(e,"msie")||jn(e,"trident")}},{name:"Opera",versionRegexes:[Gn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Kn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Kn("firefox")},{name:"Safari",versionRegexes:[Gn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(jn(e,"safari")||jn(e,"mobile/"))&&jn(e,"applewebkit")}}],Zn=[{name:"Windows",search:Kn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return jn(e,"iphone")||jn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Kn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Kn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Kn("linux"),versionRegexes:[]},{name:"Solaris",search:Kn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Kn("freebsd"),versionRegexes:[]}],Jn={browsers:n(Xn),oses:n(Zn)},Qn={detect:(kn=function(){return function(e){var t,r,i,o,a,s,l,u,c,f,d,h=Jn.browsers(),p=Jn.oses(),m=function(e,t){return Vn(h,t).map(function(e){var n=Dn(e.versionRegexes,t);return{current:e.name,version:n}})}(0,e).fold(Rn,Pn),g=function(e,t){return Vn(p,t).map(function(e){var n=Dn(e.versionRegexes,t);return{current:e.name,version:n}})}(0,e).fold(Un,Yn);return{browser:m,os:g,deviceType:(r=m,i=e,o=(t=g).isiOS()&&!0===/ipad/i.test(i),a=t.isiOS()&&!o,s=t.isAndroid()&&3===t.version.major,l=t.isAndroid()&&4===t.version.major,u=o||s||l&&!0===/mobile/i.test(i),c=t.isiOS()||t.isAndroid(),f=c&&!u,d=r.isSafari()&&t.isiOS()&&!1===/safari/i.test(i),{isiPad:n(o),isiPhone:n(a),isTablet:n(u),isPhone:n(f),isTouch:n(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:n(d)})}}(navigator.userAgent)},Nn=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Nn||(Nn=!0,Tn=kn.apply(null,e)),Tn})},er=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:n(e)}},tr={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return er(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return er(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return er(n)},fromDom:er,fromPoint:function(e,t,n){var r=e.dom();return O.from(r.elementFromPoint(t,n)).map(er)}},nr=(Node,Node,Node,Node.DOCUMENT_NODE),rr=(Node,Node,Node.ELEMENT_NODE),ir=Node.TEXT_NODE,or=(Node,Node,Node,Node,function(e){return e.dom().nodeName.toLowerCase()}),ar=function(e){return function(t){return t.dom().nodeType===e}},sr=ar(rr),lr=ar(ir),ur=Object.keys,cr=Object.hasOwnProperty,fr=function(e,t){for(var n=ur(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o,e)}},dr=function(e,t){var n={};return fr(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},hr=function(e,t,n){if(!(A(n)||B(n)||F(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},pr=function(e,t,n){hr(e.dom(),t,n)},mr=function(e,t){var n=e.dom();fr(t,function(e,t){hr(n,t,e)})},gr=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},vr=function(e,t){e.dom().removeAttribute(t)},yr=function(e){return void 0!==e.style},br=function(e,t){var n,r,i=e.dom(),o=window.getComputedStyle(i).getPropertyValue(t),a=""!==o||void 0!==(r=lr(n=e)?n.dom().parentNode:n.dom())&&null!==r&&r.ownerDocument.body.contains(r)?o:wr(i,t);return null===a?void 0:a},wr=function(e,t){return yr(e)?e.style.getPropertyValue(t):""},Cr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var i={};return U(e,function(e,r){i[e]=n(t[r])}),i}},xr=function(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},i=t(e);(i=i.bind(r)).isSome(););return n},Sr=rr,kr=nr,Tr=function(e,t){var n=e.dom();if(n.nodeType!==Sr)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Nr=function(e){return e.nodeType!==Sr&&e.nodeType!==kr||0===e.childElementCount},_r=function(e,t){return e.dom()===t.dom()},Er=Qn.detect().browser.isIE()?function(e,t){return function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,ie.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY)}(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Dr=function(e){return tr.fromDom(e.dom().ownerDocument)},Or=function(e){var t=e.dom();return O.from(t.parentNode).map(tr.fromDom)},Mr=function(e){var t=e.dom();return O.from(t.previousSibling).map(tr.fromDom)},Ar=function(e){var t=e.dom();return O.from(t.nextSibling).map(tr.fromDom)},Lr=function(e){return t=xr(e,Mr),(n=J.call(t,0)).reverse(),n;var t,n},Rr=function(e){return xr(e,Ar)},Pr=function(e){var t=e.dom();return z(t.childNodes,tr.fromDom)},Br=function(e,t){var n=e.dom().childNodes;return O.from(n[t]).map(tr.fromDom)},Ir=function(e){return Br(e,0)},Fr=function(e){return Br(e,e.dom().childNodes.length-1)},Hr=(Cr("element","offset"),Qn.detect().browser),Wr=function(e){return q(e,sr)},zr={getPos:function(e,t,n){var r,i,o,a=0,s=0,l=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===br(tr.fromDom(e),"position"))return{x:a=(i=t.getBoundingClientRect()).left+(l.documentElement.scrollLeft||e.scrollLeft)-l.documentElement.clientLeft,y:s=i.top+(l.documentElement.scrollTop||e.scrollTop)-l.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType;)a+=r.offsetLeft||0,s+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)a-=r.scrollLeft||0,s-=r.scrollTop||0,r=r.parentNode;s+=(o=tr.fromDom(t),Hr.isFirefox()&&"table"===or(o)?Wr(Pr(o)).filter(function(e){return"caption"===or(e)}).bind(function(e){return Wr(Rr(e)).map(function(t){var n=t.dom().offsetTop,r=e.dom().offsetTop,i=e.dom().offsetHeight;return n<=r?-i:0})}).getOr(0):0)}return{x:a,y:s}}},Ur=function(e){var t=O.none(),n=[],r=function(e){i()?o(e):n.push(e)},i=function(){return t.isSome()},o=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};return e(function(e){t=O.some(e),U(n,o),n=[]}),{get:r,map:function(e){return Ur(function(t){r(function(n){t(e(n))})})},isReady:i}},Yr={nu:Ur,pure:function(e){return Ur(function(t){t(e)})}},Vr=function(e){var t=function(t){var n;e((n=t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this;setTimeout(function(){n.apply(r,e)},0)}))},n=function(){return Yr.nu(t)};return{map:function(e){return Vr(function(n){t(function(t){var r=e(t);n(r)})})},bind:function(e){return Vr(function(n){t(function(t){e(t).get(n)})})},anonBind:function(e){return Vr(function(n){t(function(t){e.get(n)})})},toLazy:n,toCached:function(){var e=null;return Vr(function(t){null===e&&(e=n()),e.get(t)})},get:t}},jr={nu:Vr,pure:function(e){return Vr(function(t){t(e)})}},qr=function(e){return t=e,(0,jr.nu)(function(e){var n=[],r=0;0===t.length?e([]):U(t,function(i,o){var a;i.get((a=o,function(i){n[a]=i,++r>=t.length&&e(n)}))})});var t},$r=function(e){return{is:function(t){return e===t},isValue:k,isError:S,getOr:n(e),getOrThunk:n(e),getOrDie:n(e),or:function(t){return $r(e)},orThunk:function(t){return $r(e)},fold:function(t,n){return n(e)},map:function(t){return $r(t(e))},mapError:function(t){return $r(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return O.some(e)}}},Gr=function(t){return{is:S,isValue:S,isError:k,getOr:r,getOrThunk:function(e){return e()},getOrDie:function(){return e=String(t),function(){throw new Error(e)}();var e},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,n){return e(t)},map:function(e){return Gr(t)},mapError:function(e){return Gr(e(t))},each:e,bind:function(e){return Gr(t)},exists:S,forall:k,toOption:O.none}},Kr={value:$r,error:Gr};function Xr(e,t){var n=e,r=function(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!==t){if(o=e[r])return o;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(o=a[r])return o}}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,r,i){var o,a,s;if(e){if(o=e.previousSibling,t&&o===t)return;if(o){if(!i)for(s=o[n];s;s=s[n])if(!s[n])return s;return o}if((a=e.parentNode)&&a!==t)return a}}(n,"lastChild",0,e)}}var Zr,Jr,Qr,ei=function(e){var t;return function(r){return(t=t||function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n}(e,n(!0))).hasOwnProperty(or(r))}},ti=ei(["h1","h2","h3","h4","h5","h6"]),ni=ei(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),ri=function(e){return sr(e)&&!ni(e)},ii=function(e){return sr(e)&&"br"===or(e)},oi=ei(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),ai=ei(["ul","ol","dl"]),si=ei(["li","dd","dt"]),li=ei(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),ui=ei(["thead","tbody","tfoot"]),ci=ei(["td","th"]),fi=ei(["pre","script","textarea","style"]),di=function(e){return function(t){return!!t&&t.nodeType===e}},hi=di(1),pi=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType)for(r=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(r===t[n])return!0;return!1}},mi=function(e){return function(t){if(hi(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},gi=di(3),vi=di(8),yi=di(9),bi=pi("br"),wi=mi("true"),Ci=mi("false"),xi={isText:gi,isElement:hi,isComment:vi,isDocument:yi,isBr:bi,isContentEditableTrue:wi,isContentEditableFalse:Ci,matchNodeNames:pi,hasPropValue:function(e,t){return function(n){return hi(n)&&n[e]===t}},hasAttribute:function(e,t){return function(t){return hi(t)&&t.hasAttribute(e)}},hasAttributeValue:function(e,t){return function(n){return hi(n)&&n.getAttribute(e)===t}},matchStyleValues:function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r;if(hi(t))for(r=0;r<n.length;r++){var i=t.ownerDocument.defaultView.getComputedStyle(t,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}return!1}},isBogus:function(e){return hi(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return hi(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return hi(e)&&"TABLE"===e.tagName}},Si=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},ki=function(e,t){var n,r=t.childNodes;if(!xi.isElement(t)||!Si(t)){for(n=r.length-1;0<=n;n--)ki(e,r[n]);if(!1===xi.isDocument(t)){if(xi.isText(t)&&0<t.nodeValue.length){var i=Gt.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||0<i)return;if(0===i&&(o=t).previousSibling&&"SPAN"===o.previousSibling.nodeName&&o.nextSibling&&"SPAN"===o.nextSibling.nodeName)return}else if(xi.isElement(t)&&(1===(r=t.childNodes).length&&Si(r[0])&&t.parentNode.insertBefore(r[0],t),r.length||li(tr.fromDom(t))))return;e.remove(t)}var o;return t}},Ti={trimNode:ki},Ni=Gt.makeMap,_i=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ei=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Di=/[<>&\"\']/g,Oi=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Mi={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};Jr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Qr={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Ai=function(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Jr[r]||(o[r]=i="&"+e[n+1]+";",o[i]=r);return o}};Zr=Ai("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Li=function(e,t){return e.replace(t?_i:Ei,function(e){return Jr[e]||e})},Ri=function(e,t){return e.replace(t?_i:Ei,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Jr[e]||"&#"+e.charCodeAt(0)+";"})},Pi=function(e,t,n){return n=n||Zr,e.replace(t?_i:Ei,function(e){return Jr[e]||n[e]||e})},Bi={encodeRaw:Li,encodeAllRaw:function(e){return(""+e).replace(Di,function(e){return Jr[e]||e})},encodeNumeric:Ri,encodeNamed:Pi,getEncodeFunc:function(e,t){var n=Ai(t)||Zr,r=Ni(e.replace(/\+/g,","));return r.named&&r.numeric?function(e,t){return e.replace(t?_i:Ei,function(e){return void 0!==Jr[e]?Jr[e]:void 0!==n[e]?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:r.named?t?function(e,t){return Pi(e,t,n)}:Pi:r.numeric?Ri:Li},decode:function(e){return e.replace(Oi,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Mi[t]||String.fromCharCode(t):Qr[e]||Zr[e]||(n=e,(r=tr.fromTag("div").dom()).innerHTML=n,r.textContent||r.innerText||n);var n,r})}},Ii={},Fi={},Hi=Gt.makeMap,Wi=Gt.each,zi=Gt.extend,Ui=Gt.explode,Yi=Gt.inArray,Vi=function(e,t){return(e=Gt.trim(e))?e.split(t||" "):[]},ji=function(e){var t,n,r,i,o,a,s={},l=function(e,n,r){var i,o,a,l=function(e,t){var n,r,i={};for(n=0,r=e.length;n<r;n++)i[e[n]]=t||{};return i};for(n=n||"","string"==typeof(r=r||[])&&(r=Vi(r)),i=(e=Vi(e)).length;i--;)a={attributes:l(o=Vi([t,n].join(" "))),attributesOrder:o,children:l(r,Fi)},s[e[i]]=a},u=function(e,t){var n,r,i,o;for(n=(e=Vi(e)).length,t=Vi(t);n--;)for(r=s[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};return Ii[e]?Ii[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,a="acronym applet basefont big font strike tt"].join(" "),Wi(Vi(a),function(e){l(e,"",r)}),n=[n,o="center dir isindex noframes"].join(" "),i=[n,r].join(" "),Wi(Vi(o),function(e){l(e,"",i)})),i=i||[n,r].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),l("address dt dd div caption","",i),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),l("blockquote","cite",i),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",i),l("dl","","dt dd"),l("a","href target rel media hreflang type",r),l("q","cite",r),l("ins del","cite datetime",i),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",i),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),l("param","name value"),l("map","name",[i,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",i),l("th","colspan rowspan headers scope abbr",i),l("form","accept-charset action autocomplete enctype method name novalidate target",i),l("fieldset","disabled form name",[i,"legend"].join(" ")),l("label","form for",r),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:r),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[i,"li"].join(" ")),l("noscript","",i),"html4"!==e&&(l("wbr"),l("ruby","",[r,"rt rp"].join(" ")),l("figcaption","",i),l("mark rt rp summary bdi","",r),l("canvas","width height",i),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[r,"option"].join(" ")),l("article section nav aside main header footer","",i),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[i,"figcaption"].join(" ")),l("time","datetime",r),l("dialog","open",i),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",r),l("progress","value max",r),l("meter","value min max low high optimum",r),l("details","open",[i,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(u("script","language xml:space"),u("style","xml:space"),u("object","declare classid code codebase codetype archive standby align border hspace vspace"),u("embed","align name hspace vspace"),u("param","valuetype type"),u("a","charset name rev shape coords"),u("br","clear"),u("applet","codebase archive code object alt name width height align hspace vspace"),u("img","name longdesc align border hspace vspace"),u("iframe","longdesc frameborder marginwidth marginheight scrolling align"),u("font basefont","size color face"),u("input","usemap align"),u("select","onchange"),u("textarea"),u("h1 h2 h3 h4 h5 h6 div p legend caption","align"),u("ul","type compact"),u("li","type"),u("ol dl menu dir","compact"),u("pre","width xml:space"),u("hr","align noshade size width"),u("isindex","prompt"),u("table","summary width frame rules cellspacing cellpadding align bgcolor"),u("col","width align char charoff valign"),u("colgroup","width align char charoff valign"),u("thead","align char charoff valign"),u("tr","align char charoff valign bgcolor"),u("th","axis align char charoff valign nowrap bgcolor width height"),u("form","accept"),u("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),u("tfoot","align char charoff valign"),u("tbody","align char charoff valign"),u("area","nohref"),u("body","background bgcolor text link vlink alink")),"html4"!==e&&(u("input button select textarea","autofocus"),u("input textarea","placeholder"),u("a","download"),u("link script img","crossorigin"),u("iframe","sandbox seamless allowfullscreen")),Wi(Vi("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,Ii[e]=s)},qi=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),Wi(e,function(e,r){n[r]=n[r.toUpperCase()]="map"===t?Hi(e,/[, ]/):Ui(e,/[, ]/)})),n};function $i(e){var t,n,r,i,o,a,s,l,u,c,f,d,h,p={},m={},g=[],v={},y={},b=function(t,n,r){var i=e[t];return i?i=Hi(i,/[, ]/,Hi(i.toUpperCase(),/[, ]/)):(i=Ii[t])||(i=Hi(n," ",Hi(n.toUpperCase()," ")),i=zi(i,r),Ii[t]=i),i};r=ji((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=qi(e.valid_styles),n=qi(e.invalid_styles,"map"),l=qi(e.valid_classes,"map"),i=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),o=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=b("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=b("non_empty_elements","td th iframe video audio object script pre code",a),f=b("move_caret_before_on_enter_elements","table",c),d=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),u=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",d),h=b("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),Wi((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){y[e]=new RegExp("</"+e+"[^>]*>","gi")});var w=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},C=function(e){var t,n,r,i,o,a,s,l,u,c,f,d,h,m,v,y,b,C,x,S=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,k=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(e)for(e=Vi(e,","),p["@"]&&(y=p["@"].attributes,b=p["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(o=S.exec(e[t])){if(u=o[2],v=o[3],l=o[5],a={attributes:d={},attributesOrder:h=[]},"#"===(m=o[1])&&(a.paddEmpty=!0),"-"===m&&(a.removeEmpty=!0),"!"===o[4]&&(a.removeEmptyAttrs=!0),y){for(C in y)d[C]=y[C];h.push.apply(h,b)}if(l)for(r=0,i=(l=Vi(l,"|")).length;r<i;r++)if(o=k.exec(l[r])){if(s={},f=o[1],c=o[2].replace(/[\\:]:/g,":"),m=o[3],x=o[4],"!"===f&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(c),s.required=!0),"-"===f){delete d[c],h.splice(Yi(h,c),1);continue}m&&("="===m&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:c,value:x}),s.defaultValue=x),":"===m&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:c,value:x}),s.forcedValue=x),"<"===m&&(s.validValues=Hi(x,"?"))),T.test(c)?(a.attributePatterns=a.attributePatterns||[],s.pattern=w(c),a.attributePatterns.push(s)):(d[c]||h.push(c),d[c]=s)}y||"@"!==u||(y=d,b=h),v&&(a.outputName=u,p[v]=a),T.test(u)?(a.pattern=w(u),g.push(a)):p[u]=a}},x=function(e){p={},g=[],C(e),Wi(r,function(e,t){m[t]=e.children})},S=function(e){var t=/^(~)?(.+)$/;e&&(Ii.text_block_elements=Ii.block_elements=null,Wi(Vi(e,","),function(e){var n=t.exec(e),r="~"===n[1],i=r?"span":"div",o=n[2];if(m[o]=m[i],v[o]=i,r||(u[o.toUpperCase()]={},u[o]={}),!p[o]){var a=p[i];delete(a=zi({},a)).removeEmptyAttrs,delete a.removeEmpty,p[o]=a}Wi(m,function(e,t){e[i]&&(m[t]=e=zi({},m[t]),e[o]=e[i])})}))},k=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Ii[e.schema]=null,t&&Wi(Vi(t,","),function(e){var t,r,i=n.exec(e);i&&(t=(r=i[1])?m[i[2]]:m[i[2]]={"#comment":{}},t=m[i[2]],Wi(Vi(i[3],"|"),function(e){"-"===r?delete t[e]:t[e]={}}))})},T=function(e){var t,n=p[e];if(n)return n;for(t=g.length;t--;)if((n=g[t]).pattern.test(e))return n};return e.valid_elements?x(e.valid_elements):(Wi(r,function(e,t){p[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},m[t]=e.children}),"html5"!==e.schema&&Wi(Vi("strong/b em/i"),function(e){e=Vi(e,"/"),p[e[1]].outputName=e[0]}),Wi(Vi("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){p[e]&&(p[e].removeEmpty=!0)}),Wi(Vi("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){p[e].paddEmpty=!0}),Wi(Vi("span"),function(e){p[e].removeEmptyAttrs=!0})),S(e.custom_elements),k(e.valid_children),C(e.extended_valid_elements),k("+ol[ul|ol],+ul[ul|ol]"),Wi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){p[t]&&(p[t].parentsRequired=Vi(e))}),e.invalid_elements&&Wi(Ui(e.invalid_elements),function(e){p[e]&&delete p[e]}),T("span")||C("span[!data-mce-type|*]"),{children:m,elements:p,getValidStyles:function(){return t},getValidClasses:function(){return l},getBlockElements:function(){return u},getInvalidStyles:function(){return n},getShortEndedElements:function(){return a},getTextBlockElements:function(){return d},getTextInlineElements:function(){return h},getBoolAttrs:function(){return s},getElementRule:T,getSelfClosingElements:function(){return o},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return f},getWhiteSpaceElements:function(){return i},getSpecialElements:function(){return y},isValidChild:function(e,t){var n=m[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,r,i=T(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return v},addValidElements:C,setValidElements:x,addCustomElements:S,addValidChildren:k}}var Gi=function(e,t,n,r){var i=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+i(t)+i(n)+i(r)};function Ki(e,t){var n,r,i,o,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,c={},f="\ufeff";for(e=e||{},t&&(i=t.getValidStyles(),o=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+f).split(" "),n=0;n<r.length;n++)c[r[n]]=f+n,c[f+n]=r[n];return{toHex:function(e){return e.replace(a,Gi)},parse:function(t){var r,i,o,d,h,p,m,g,v={},y=e.url_converter,b=e.url_converter_scope||this,w=function(e,t,r){var i,o,a,s;if((i=v[e+"-top"+t])&&(o=v[e+"-right"+t])&&(a=v[e+"-bottom"+t])&&(s=v[e+"-left"+t])){var l=[i,o,a,s];for(n=l.length-1;n--&&l[n]===l[n+1];);-1<n&&r||(v[e+t]=-1===n?l[0]:l.join(" "),delete v[e+"-top"+t],delete v[e+"-right"+t],delete v[e+"-bottom"+t],delete v[e+"-left"+t])}},C=function(e){var t,n=v[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return v[e]=n[0],!0}},x=function(e){return d=!0,c[e]},S=function(e,t){return d&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return c[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},k=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},T=function(e){return e.replace(/\\[0-9a-f]+/gi,k)},N=function(t,n,r,i,o,a){if(o=o||a)return"'"+(o=S(o)).replace(/\'/g,"\\'")+"'";if(n=S(n||r||i),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return y&&(n=y.call(b,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,x).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,x)});r=l.exec(t);)if(l.lastIndex=r.index+r[0].length,i=r[1].replace(u,"").toLowerCase(),o=r[2].replace(u,""),i&&o){if(i=T(i),o=T(o),-1!==i.indexOf(f)||-1!==i.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===i||/expression\s*\(|\/\*|\*\//.test(o)))continue;"font-weight"===i&&"700"===o?o="bold":"color"!==i&&"background-color"!==i||(o=o.toLowerCase()),o=(o=o.replace(a,Gi)).replace(s,N),v[i]=d?S(o,!0):o}w("border","",!0),w("border","-width"),w("border","-color"),w("border","-style"),w("padding",""),w("margin",""),h="border",m="border-style",g="border-color",C(p="border-width")&&C(m)&&C(g)&&(v[h]=v[p]+" "+v[m]+" "+v[g],delete v[p],delete v[m],delete v[g]),"medium none"===v.border&&delete v.border,"none"===v["border-image"]&&delete v["border-image"]}return v},serialize:function(e,t){var n,r,a,s,l="",u=function(t){var n,r,o,a;if(n=i[t])for(r=0,o=n.length;r<o;r++)(a=e[t=n[r]])&&(l+=(0<l.length?" ":"")+t+": "+a+";")};if(t&&i)u("*"),u(t);else for(n in e)!(r=e[n])||o&&(a=n,s=void 0,(s=o["*"])&&s[a]||(s=o[t])&&s[a])||(l+=(0<l.length?" ":"")+n+": "+r+";");return l}}}var Xi,Zi=Gt.each,Ji=Gt.grep,Qi=fe.ie,eo=/^([a-z0-9],?)+$/i,to=/^[ \t\r\n]*$/,no=function(e,t,n){var r={},i=t.keep_values,o={set:function(e,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,i,e[0])),e.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return r={style:{set:function(e,t){null===t||"object"!=typeof t?(i&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}},i&&(r.href=r.src=o),r},ro=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},io=function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(i++,n=r);return i};function oo(e,i){var o,a=this;void 0===i&&(i={});var s={},l=window,u={},c=0,f=function(e,i){void 0===i&&(i={});var o,a=0,s={};o=i.maxLoadTime||5e3;var l=function(t){e.getElementsByTagName("head")[0].appendChild(t)},u=function(t,n,r){var u,c,f,d,h=function(){for(var e=d.passed,t=e.length;t--;)e[t]();d.status=2,d.passed=[],d.failed=[]},p=function(){for(var e=d.failed,t=e.length;t--;)e[t]();d.status=3,d.passed=[],d.failed=[]},m=function(e,t){e()||((new Date).getTime()-f<o?ge.setTimeout(t):p())},g=function(){m(function(){for(var t,n,r=e.styleSheets,i=r.length;i--;)if((n=(t=r[i]).ownerNode?t.ownerNode:t.owningElement)&&n.id===u.id)return h(),!0},g)},v=function(){m(function(){try{var e=c.sheet.cssRules;return h(),!!e}catch(e){}},v)};if(t=Gt._addCacheSuffix(t),s[t]?d=s[t]:s[t]=d={passed:[],failed:[]},n&&d.passed.push(n),r&&d.failed.push(r),1!==d.status)if(2!==d.status)if(3!==d.status){if(d.status=1,(u=e.createElement("link")).rel="stylesheet",u.type="text/css",u.id="u"+a++,u.async=!1,u.defer=!1,f=(new Date).getTime(),i.contentCssCors&&(u.crossOrigin="anonymous"),"onload"in u&&!((y=navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(y[1],10)<536))u.onload=g,u.onerror=p;else{if(0<navigator.userAgent.indexOf("Firefox"))return(c=e.createElement("style")).textContent='@import "'+t+'"',v(),void l(c);g()}var y;l(u),u.href=t}else p();else h()},c=function(e){return jr.nu(function(r){u(e,t(r,n(Kr.value(e))),t(r,n(Kr.error(e))))})},f=function(e){return e.fold(r,r)};return{load:u,loadAll:function(e,t,n){qr(z(e,c)).get(function(e){var r=Y(e,function(e){return e.isValue()});0<r.fail.length?n(r.fail.map(f)):t(r.pass.map(f))})}}}(e,{contentCssCors:i.contentCssCors}),d=[],h=i.schema?i.schema:$i({}),p=Ki({url_converter:i.url_converter,url_converter_scope:i.url_converter_scope},i.schema),m=i.ownEvents?new Te(i.proxy):Te.Event,g=h.getBlockElements(),v=pn.overrideDefaults(function(){return{context:e,element:j.getRoot()}}),y=function(t){if(t&&e&&"string"==typeof t){var n=e.getElementById(t);return n&&n.id!==t?e.getElementsByName(t)[1]:n}return t},b=function(e){return"string"==typeof e&&(e=y(e)),v(e)},w=function(e,t,n){var r,i,a=b(e);return a.length&&(i=(r=o[t])&&r.get?r.get(a,t):a.attr(t)),void 0===i&&(i=n||""),i},C=function(e){var t=y(e);return t?t.attributes:[]},x=function(e,t,n){var r,a;""===n&&(n=null);var s=b(e);r=s.attr(t),s.length&&((a=o[t])&&a.set?a.set(s,n,t):s.attr(t,n),r!==n&&i.onSetAttrib&&i.onSetAttrib({attrElm:s,attrName:t,attrValue:n}))},S=function(){return i.root_element||e.body},k=function(t,n){return zr.getPos(e.body,y(t),n)},T=function(e,t,n){var r=b(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=fe.ie&&fe.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},N=function(e){var t,n;return e=y(e),t=T(e,"width"),n=T(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},_=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(eo.test(t)){var r=t.toLowerCase().split(/,/),i=e.nodeName.toLowerCase();for(n=r.length-1;0<=n;n--)if(r[n]===i)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return 0<Tt(t,o[0].ownerDocument||o[0],null,o).length},E=function(e,t,n,r){var i,o=[],a=y(e);for(r=void 0===r,n=n||("BODY"!==S().nodeName?S().parentNode:null),Gt.is(t,"string")&&(t="*"===(i=t)?function(e){return 1===e.nodeType}:function(e){return _(e,i)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];o.push(a)}a=a.parentNode}return r?o:null},D=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return _(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},O=function(e,t,n){var r,i="string"==typeof e?y(e):e;return!!i&&(Gt.isArray(i)&&(i.length||0===i.length)?(r=[],Zi(i,function(e,i){e&&("string"==typeof e&&(e=y(e)),r.push(t.call(n,e,i)))}),r):t.call(n||a,i))},M=function(e,t){b(e).each(function(e,n){Zi(t,function(e,t){x(n,t,e)})})},A=function(e,t){var n=b(e);Qi?n.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){pn("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):n.html(t)},L=function(t,n,r,i,o){return O(t,function(t){var a="string"==typeof n?e.createElement(n):n;return M(a,r),i&&("string"!=typeof i&&i.nodeType?a.appendChild(i):"string"==typeof i&&A(a,i)),o?a:t.appendChild(a)})},R=function(t,n,r){return L(e.createElement(t),t,n,r,!0)},P=Bi.encodeAllRaw,B=function(e,t){var n=b(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),1<n.length?n.toArray():n[0]},I=function(e,t,n){b(e).toggleClass(t,n).each(function(){""===this.className&&pn(this).attr("class",null)})},F=function(e,t,n){return O(t,function(t){return Gt.is(t,"array")&&(e=e.cloneNode(!0)),n&&Zi(Ji(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},H=function(){return e.createRange()},W=function(t,n,r,o){if(Gt.isArray(t)){for(var a=t.length;a--;)t[a]=W(t[a],n,r,o);return t}return!i.collect||t!==e&&t!==l||d.push([t,n,r,o]),m.bind(t,n,r,o||j)},U=function(t,n,r){var i;if(Gt.isArray(t)){for(i=t.length;i--;)t[i]=U(t[i],n,r);return t}if(d&&(t===e||t===l))for(i=d.length;i--;){var o=d[i];t!==o[0]||n&&n!==o[1]||r&&r!==o[2]||m.unbind(o[0],o[1],o[2])}return m.unbind(t,n,r)},V=function(e){if(e&&xi.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},j={doc:e,settings:i,win:l,files:u,stdMode:!0,boxModel:!0,styleSheetLoader:f,boundEvents:d,styles:p,schema:h,events:m,isBlock:function(e){if("string"==typeof e)return!!g[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!g[e.nodeName])}return!1},$:v,$$:b,root:null,clone:function(t,n){if(!Qi||1!==t.nodeType||n)return t.cloneNode(n);if(!n){var r=e.createElement(t.nodeName);return Zi(C(t),function(e){x(r,e.nodeName,w(t,e.nodeName))}),r}return null},getRoot:S,getViewPort:function(e){var t=e||l,n=t.document.documentElement;return{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(e){var t,n;return e=y(e),t=k(e),n=N(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:N,getParent:function(e,t,n){var r=E(e,t,n,!1);return r&&0<r.length?r[0]:null},getParents:E,get:y,getNext:function(e,t){return D(e,t,"nextSibling")},getPrev:function(e,t){return D(e,t,"previousSibling")},select:function(t,n){return Tt(t,y(n)||i.root_element||e,[])},is:_,add:L,create:R,createHTML:function(e,t,n){var r,i="";for(r in i+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(i+=" "+r+'="'+P(t[r])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},createFragment:function(t){var n,r=e.createElement("div"),i=e.createDocumentFragment();for(t&&(r.innerHTML=t);n=r.firstChild;)i.appendChild(n);return i},remove:B,setStyle:function(e,t,n){var r=b(e).css(t,n);i.update_styles&&ro(p,r)},getStyle:T,setStyles:function(e,t){var n=b(e).css(t);i.update_styles&&ro(p,n)},removeAllAttribs:function(e){return O(e,function(e){var t,n=e.attributes;for(t=n.length-1;0<=t;t--)e.removeAttributeNode(n.item(t))})},setAttrib:x,setAttribs:M,getAttrib:w,getPos:k,parseStyle:function(e){return p.parse(e)},serializeStyle:function(e,t){return p.serialize(e,t)},addStyle:function(t){var n,r;if(j!==oo.DOM&&e===document){if(s[t])return;s[t]=!0}(r=e.getElementById("mceDefaultStyles"))||((r=e.createElement("style")).id="mceDefaultStyles",r.type="text/css",(n=e.getElementsByTagName("head")[0]).firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(e.createTextNode(t))},loadCSS:function(t){var n;j===oo.DOM||e!==document?(t||(t=""),n=e.getElementsByTagName("head")[0],Zi(t.split(","),function(e){var t;e=Gt._addCacheSuffix(e),u[e]||(u[e]=!0,t=R("link",{rel:"stylesheet",href:e}),n.appendChild(t))})):oo.DOM.loadCSS(t)},addClass:function(e,t){b(e).addClass(t)},removeClass:function(e,t){I(e,t,!1)},hasClass:function(e,t){return b(e).hasClass(t)},toggleClass:I,show:function(e){b(e).show()},hide:function(e){b(e).hide()},isHidden:function(e){return"none"===b(e).css("display")},uniqueId:function(e){return(e||"mce_")+c++},setHTML:A,getOuterHTML:function(e){var t="string"==typeof e?y(e):e;return xi.isElement(t)?t.outerHTML:pn("<div></div>").append(pn(t).clone()).html()},setOuterHTML:function(e,t){b(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}B(pn(this).html(t),!0)})},decode:Bi.decode,encode:P,insertAfter:function(e,t){var n=y(t);return O(e,function(e){var t,r;return t=n.parentNode,(r=n.nextSibling)?t.insertBefore(e,r):t.appendChild(e),e})},replace:F,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=R(t),Zi(C(e),function(t){x(n,t.nodeName,w(e,t.nodeName))}),F(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return p.toHex(Gt.trim(e))},run:O,getAttribs:C,isEmpty:function(e,t){var n,r,i,o,a,s,l=0;if(e=e.firstChild){a=new Xr(e,e.parentNode),t=t||(h?h.getNonEmptyElements():null),o=h?h.getWhiteSpaceElements():{};do{if(i=e.nodeType,xi.isElement(e)){var u=e.getAttribute("data-mce-bogus");if(u){e=a.next("all"===u);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){l++,e=a.next();continue}return!1}for(n=(r=C(e)).length;n--;)if("name"===(s=r[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===i)return!1;if(3===i&&!to.test(e.nodeValue))return!1;if(3===i&&e.parentNode&&o[e.parentNode.nodeName]&&to.test(e.nodeValue))return!1;e=a.next()}while(e)}return l<=1},createRng:H,nodeIndex:io,split:function(e,t,n){var r,i,o,a=H();if(e&&t)return a.setStart(e.parentNode,io(e)),a.setEnd(t.parentNode,io(t)),r=a.extractContents(),(a=H()).setStart(t.parentNode,io(t)+1),a.setEnd(e.parentNode,io(e)+1),i=a.extractContents(),(o=e.parentNode).insertBefore(Ti.trimNode(j,r),e),o.insertBefore(n||t,e),o.insertBefore(Ti.trimNode(j,i),e),B(e),n||t},bind:W,unbind:U,fire:function(e,t,n){return m.fire(e,t,n)},getContentEditable:V,getContentEditableParent:function(e){for(var t=S(),n=null;e&&e!==t&&null===(n=V(e));e=e.parentNode);return n},destroy:function(){if(d)for(var e=d.length;e--;){var t=d[e];m.unbind(t[0],t[1],t[2])}Tt.setDocument&&Tt.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return o=no(p,i,function(){return j}),j}(Xi=oo||(oo={})).DOM=Xi(document),Xi.nodeIndex=io;var ao=oo,so=ao.DOM,lo=Gt.each,uo=Gt.grep,co=function(e){return"function"==typeof e},fo=function(){var e={},t=[],n={},r=[],i=0;this.isDone=function(t){return 2===e[t]},this.markDone=function(t){e[t]=2},this.add=this.load=function(r,i,o,a){void 0===e[r]&&(t.push(r),e[r]=0),i&&(n[r]||(n[r]=[]),n[r].push({success:i,failure:a,scope:o||this}))},this.remove=function(t){delete e[t],delete n[t]},this.loadQueue=function(e,n,r){this.loadScripts(t,e,n,r)},this.loadScripts=function(t,o,a,s){var l,u=[],c=function(e,t){lo(n[t],function(t){co(t[e])&&t[e].call(t.scope)}),n[t]=void 0};r.push({success:o,failure:s,scope:a||this}),(l=function(){var n=uo(t);if(t.length=0,lo(n,function(t){var n,r,o,a,s,f;2!==e[t]?3!==e[t]?1!==e[t]&&(e[t]=1,i++,n=t,r=function(){e[t]=2,i--,c("success",t),l()},o=function(){e[t]=3,i--,u.push(t),c("failure",t),l()},s=(f=so).uniqueId(),(a=document.createElement("script")).id=s,a.type="text/javascript",a.src=Gt._addCacheSuffix(n),a.onload=function(){f.remove(s),a&&(a.onreadystatechange=a.onload=a=null),r()},a.onerror=function(){co(o)?o():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+n)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)):c("failure",t):c("success",t)}),!i){var o=r.slice(0);r.length=0,lo(o,function(e){0===u.length?co(e.success)&&e.success.call(e.scope):co(e.failure)&&e.failure.call(e.scope,u)})}})()}};fo.ScriptLoader=new fo;var ho,po=Gt.each;function mo(){var e=this,t=[],n={},r={},i=[],o=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},a=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},s=function(e,t,n,r){var i=o(e);po(i,function(e){var n=a(t,e);l(n.resource,n,void 0,void 0)}),n&&n.call(r||fo)},l=function(e,t,i,o,a){if(!n[e]){var l="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==l.indexOf("/")&&-1===l.indexOf("://")&&(l=mo.baseURL+"/"+l),n[e]=l.substring(0,l.lastIndexOf("/")),r[e]?s(e,t,i,o):fo.ScriptLoader.add(l,function(){return s(e,t,i,o)},o,a)}};return{items:t,urls:n,lookup:r,_listeners:i,get:function(e){return r[e]?r[e].instance:void 0},dependencies:o,requireLangPack:function(e,t){var r=mo.language;if(r&&!1!==mo.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===t.indexOf(","+r+","))return;fo.ScriptLoader.add(n[e]+"/langs/"+r+".js")}},add:function(e,n,o){t.push(n),r[e]={instance:n,dependencies:o};var a=Y(i,function(t){return t.name===e});return i=a.fail,po(a.pass,function(e){e.callback()}),n},remove:function(e){delete n[e],delete r[e]},createUrl:a,addComponents:function(t,n){var r=e.urls[t];po(n,function(e){fo.ScriptLoader.add(r+"/"+e)})},load:l,waitFor:function(e,t){r.hasOwnProperty(e)?t():i.push({name:e,callback:t})}}}(ho=mo||(mo={})).PluginManager=ho(),ho.ThemeManager=ho();var go=function(e,t){Or(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},vo=function(e,t){Ar(e).fold(function(){Or(e).each(function(e){bo(e,t)})},function(e){go(e,t)})},yo=function(e,t){Ir(e).fold(function(){bo(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},bo=function(e,t){e.dom().appendChild(t.dom())},wo=function(e,t){U(t,function(t){bo(e,t)})},Co=function(e){e.dom().textContent="",U(Pr(e),function(e){xo(e)})},xo=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},So=function(e){var t,n=Pr(e);0<n.length&&(t=e,U(n,function(e){go(t,e)})),xo(e)},ko=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];null===n&&(n=setTimeout(function(){e.apply(null,r),n=null},t))}}},To=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return To(n())}}},No=function(e,t){var n=gr(e,t);return void 0===n||""===n?[]:n.split(" ")},_o=function(e){return void 0!==e.dom().classList},Eo=function(e,t){_o(e)?e.dom().classList.add(t):function(e,t){return i=t,o=No(n=e,r="class").concat([i]),pr(n,r,o.join(" ")),!0;var n,r,i,o}(e,t)},Do=function(e,t){return _o(e)&&e.dom().classList.contains(t)},Oo=function(e,t){var n=[];return U(Pr(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Oo(e,t))}),n},Mo=function(e,t){return n=t,i=void 0===(r=e)?document:r.dom(),Nr(i)?[]:z(i.querySelectorAll(n),tr.fromDom);var n,r,i};function Ao(e,t,n,r,i){return e(n,r)?O.some(n):I(i)&&i(n)?O.none():t(n,r,i)}var Lo,Ro=function(e,t,r){for(var i=e.dom(),o=I(r)?r:n(!1);i.parentNode;){var a=tr.fromDom(i=i.parentNode);if(t(a))return O.some(a);if(o(a))break}return O.none()},Po=function(e,t,n){return Ao(function(e){return t(e)},Ro,e,t,n)},Bo=function(e,t,n){return Ro(e,function(e){return Tr(e,t)},n)},Io=function(e,t){return n=t,i=void 0===(r=e)?document:r.dom(),Nr(i)?O.none():O.from(i.querySelector(n)).map(tr.fromDom);var n,r,i},Fo=function(e,t,n){return Ao(Tr,Bo,e,t,n)},Ho=n("mce-annotation"),Wo=n("data-mce-annotation"),zo=n("data-mce-annotation-uid"),Uo=function(e,t){var n=e.selection.getRng(),r=tr.fromDom(n.startContainer),i=tr.fromDom(e.getBody()),o=t.fold(function(){return"."+Ho()},function(e){return"["+Wo()+'="'+e+'"]'}),a=Br(r,n.startOffset).getOr(r),s=function(e,t){return n=t,(r=e.dom())&&r.hasAttribute&&r.hasAttribute(n)?O.some(gr(e,t)):O.none();var n,r};return Fo(a,o,function(e){return _r(e,i)}).bind(function(t){return s(t,""+zo()).bind(function(n){return s(t,""+Wo()).map(function(t){var r=Yo(e,n);return{uid:n,name:t,elements:r}})})})},Yo=function(e,t){var n=tr.fromDom(e.getBody());return Mo(n,"["+zo()+'="'+t+'"]')},Vo=function(e,t){var n,r,i=To({}),o=function(e,t){a(e,function(e){return t(e),e})},a=function(e,t){var n=i.get(),r=t(n.hasOwnProperty(e)?n[e]:{listeners:[],previous:To(O.none())});n[e]=r,i.set(n)},s=(n=function(){var t,n,r=i.get(),s=(t=ur(r),(n=J.call(t,0)).sort(void 0),n);U(s,function(t){a(t,function(n){var r=n.previous.get();return Uo(e,O.some(t)).fold(function(){var e;r.isSome()&&(o(e=t,function(t){U(t.listeners,function(t){return t(!1,e)})}),n.previous.set(O.none()))},function(e){var t,i,a,s=e.uid,l=e.name,u=e.elements;r.is(s)||(i=s,a=u,o(t=l,function(e){U(e.listeners,function(e){return e(!0,t,{uid:i,nodes:z(a,function(e){return e.dom()})})})}),n.previous.set(O.some(s)))}),{previous:n.previous,listeners:n.listeners}})})},r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==r&&clearTimeout(r),r=setTimeout(function(){n.apply(null,e),r=null},30)}});return e.on("remove",function(){s.cancel()}),e.on("nodeChange",function(){s.throttle()}),{addListener:function(e,t){a(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},jo=function(e,t){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){U(e,function(e){var n;(n=e,O.from(n.attributes.map[Wo()]).bind(t.lookup)).each(function(t){!1===t.persistent&&e.unwrap()})})})})},qo=0,$o=function(e,t){return tr.fromDom(e.dom().cloneNode(t))},Go=function(e){return $o(e,!1)},Ko=function(e){return $o(e,!0)},Xo=function(e,t){var n,r,i=Dr(e).dom(),o=tr.fromDom(i.createDocumentFragment()),a=(n=t,(r=(i||document).createElement("div")).innerHTML=n,Pr(tr.fromDom(r)));wo(o,a),Co(e),bo(e,o)},Zo="\ufeff",Jo=Zo,Qo=function(e){return e.replace(new RegExp(Zo,"g"),"")},ea=xi.isElement,ta=xi.isText,na=function(e){return ta(e)&&(e=e.parentNode),ea(e)&&e.hasAttribute("data-mce-caret")},ra=function(e){return ta(e)&&function(e){return e===Zo}(e.data)},ia=function(e){return na(e)||ra(e)},oa=function(e){return e.firstChild!==e.lastChild||!xi.isBr(e.firstChild)},aa=function(e){var t=e.container();return e&&xi.isText(t)&&t.data.charAt(e.offset())===Jo},sa=function(e){var t=e.container();return e&&xi.isText(t)&&t.data.charAt(e.offset()-1)===Jo},la=function(e){return ta(e)&&e.data[0]===Jo},ua=function(e){return ta(e)&&e.data[e.data.length-1]===Jo},ca=function(e){return e&&e.hasAttribute("data-mce-caret")?(t=e.getElementsByTagName("br"),xi.isBogus(n=t[t.length-1])&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},fa=xi.isContentEditableTrue,da=xi.isContentEditableFalse,ha=xi.isBr,pa=xi.isText,ma=xi.matchNodeNames("script style textarea"),ga=xi.matchNodeNames("img input textarea hr iframe video audio object"),va=xi.matchNodeNames("table"),ya=ia,ba=function(e){return!ya(e)&&(pa(e)?!ma(e.parentNode):ga(e)||ha(e)||va(e)||wa(e))},wa=function(e){return!1===(xi.isElement(t=e)&&"true"===t.getAttribute("unselectable"))&&da(e);var t},Ca=function(e,t){return ba(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(wa(e))return!1;if(fa(e))return!0}return!0}(e,t)},xa=Math.round,Sa=function(e){return e?{left:xa(e.left),top:xa(e.top),bottom:xa(e.bottom),right:xa(e.right),width:xa(e.width),height:xa(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},ka=function(e,t){return e=Sa(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Ta=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},Na=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Ta(t.top-e.bottom,e,t)},_a=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Ta(t.bottom-e.top,e,t)},Ea=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Da=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Oa=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Ma=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&Oa.test(e)},Aa=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(!i.isSome())return O.none();n.push(i.getOrDie())}return O.some(t.apply(null,n))},La=[].slice,Ra=xi.isElement,Pa=ba,Ba=xi.matchStyleValues("display","block table"),Ia=xi.matchStyleValues("float","left right"),Fa=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=La.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}}(Ra,Pa,x(Ia)),Ha=x(xi.matchStyleValues("white-space","pre pre-line pre-wrap")),Wa=xi.isText,za=xi.isBr,Ua=ao.nodeIndex,Ya=Da,Va=function(e){return"createRange"in e?e.createRange():ao.DOM.createRng()},ja=function(e){return e&&/[\r\n\t ]/.test(e)},qa=function(e){return!!e.setStart&&!!e.setEnd},$a=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(ja(e.toString())&&Ha(n.parentNode)&&xi.isText(n)&&(t=n.data,ja(t[r-1])||ja(t[r+1])))},Ga=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},Ka=function(e){var t,n,r,i,o,a,s,l;return t=0<(n=e.getClientRects()).length?Sa(n[0]):Sa(e.getBoundingClientRect()),!qa(e)&&za(e)&&Ga(t)?(o=(r=e).ownerDocument,a=Va(o),s=o.createTextNode("\xa0"),(l=r.parentNode).insertBefore(s,r),a.setStart(s,0),a.setEnd(s,1),i=Sa(a.getBoundingClientRect()),l.removeChild(s),i):Ga(t)&&qa(e)?function(e){var t=e.endContainer,n=e.startOffset,r=e.endOffset;if(e.startContainer===t&&xi.isText(t)&&0===n&&1===r){var i=e.cloneRange();return i.setEndAfter(t),Ka(i)}return null}(e):t},Xa=function(e,t){var n=ka(e,t);return n.width=1,n.right=n.left+1,n},Za=function(e){var t,n,r=[],i=function(e){var t,n;0!==e.height&&(0<r.length&&(t=e).left===(n=r[r.length-1]).left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right||r.push(e))},o=function(e,t){var n=Va(e.ownerDocument);if(t<e.data.length){if(Ma(e.data[t]))return r;if(Ma(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!$a(n)))return i(Xa(Ka(n),!1)),r}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),$a(n)||i(Xa(Ka(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),$a(n)||i(Xa(Ka(n),!0)))};if(Wa(e.container()))return o(e.container(),e.offset()),r;if(Ra(e.container()))if(e.isAtEnd())n=Ya(e.container(),e.offset()),Wa(n)&&o(n,n.data.length),Fa(n)&&!za(n)&&i(Xa(Ka(n),!1));else{if(n=Ya(e.container(),e.offset()),Wa(n)&&o(n,0),Fa(n)&&e.isAtEnd())return i(Xa(Ka(n),!1)),r;t=Ya(e.container(),e.offset()-1),Fa(t)&&!za(t)&&(Ba(t)||Ba(n)||!Fa(n))&&i(Xa(Ka(t),!1)),Fa(n)&&i(Xa(Ka(n),!0))}return r};function Ja(e,t,r){var i=function(){return r||(r=Za(Ja(e,t))),r};return{container:n(e),offset:n(t),toRange:function(){var n;return(n=Va(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:i,isVisible:function(){return 0<i().length},isAtStart:function(){return Wa(e),0===t},isAtEnd:function(){return Wa(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return Ya(e,n?t-1:t)}}}(Lo=Ja||(Ja={})).fromRangeStart=function(e){return Lo(e.startContainer,e.startOffset)},Lo.fromRangeEnd=function(e){return Lo(e.endContainer,e.endOffset)},Lo.after=function(e){return Lo(e.parentNode,Ua(e)+1)},Lo.before=function(e){return Lo(e.parentNode,Ua(e))},Lo.isAbove=function(e,t){return Aa([ee(t.getClientRects()),te(e.getClientRects())],Na).getOr(!1)},Lo.isBelow=function(e,t){return Aa([te(t.getClientRects()),ee(e.getClientRects())],_a).getOr(!1)},Lo.isAtStart=function(e){return!!e&&e.isAtStart()},Lo.isAtEnd=function(e){return!!e&&e.isAtEnd()},Lo.isTextPosition=function(e){return!!e&&xi.isText(e.container())},Lo.isElementPosition=function(e){return!1===Lo.isTextPosition(e)};var Qa,es,ts=Ja,ns=xi.isText,rs=xi.isBogus,is=ao.nodeIndex,os=function(e){var t=e.parentNode;return rs(t)?os(t):t},as=function(e){return e?Yt.reduce(e.childNodes,function(e,t){return rs(t)&&"BR"!==t.nodeName?e=e.concat(as(t)):e.push(t),e},[]):[]},ss=function(e){return function(t){return e===t}},ls=function(e){var t,n,r,i;return(ns(e)?"text()":e.nodeName.toLowerCase())+"["+(n=as(os(t=e)),r=Yt.findIndex(n,ss(t),t),n=n.slice(0,r+1),i=Yt.reduce(n,function(e,t,r){return ns(t)&&ns(n[r-1])&&e++,e},0),n=Yt.filter(n,xi.matchNodeNames(t.nodeName)),(r=Yt.findIndex(n,ss(t),t))-i)+"]"},us=function(e,t){var n,r,i,o,a,s=[];return n=t.container(),r=t.offset(),ns(n)?i=function(e,t){for(;(e=e.previousSibling)&&ns(e);)t+=e.data.length;return t}(n,r):(r>=(o=n.childNodes).length?(i="after",r=o.length-1):i="before",n=o[r]),s.push(ls(n)),a=function(e,t,n){var r=[];for(t=t.parentNode;t!==e;t=t.parentNode)r.push(t);return r}(e,n),a=Yt.filter(a,x(xi.isBogus)),(s=s.concat(Yt.map(a,function(e){return ls(e)}))).reverse().join("/")+","+i},cs=function(e,t){var n,r,i;return t?(t=(n=t.split(","))[0].split("/"),i=1<n.length?n[1]:"before",(r=Yt.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),n=e,r=t[1],i=parseInt(t[2],10),o=as(n),o=Yt.filter(o,function(e,t){return!ns(e)||!ns(o[t-1])}),(o=Yt.filter(o,xi.matchNodeNames(r)))[i]):null;var n,r,i,o},e))?ns(r)?function(e,t){for(var n,r=e,i=0;ns(r);){if(n=r.data.length,i<=t&&t<=i+n){e=r,t-=i;break}if(!ns(r.nextSibling)){e=r,t=n;break}i+=n,r=r.nextSibling}return ns(e)&&t>e.data.length&&(t=e.data.length),ts(e,t)}(r,parseInt(i,10)):(i="after"===i?is(r)+1:is(r),ts(r.parentNode,i)):null):null},fs=xi.isContentEditableFalse,ds=function(e,t,n,r,i){var o,a=r[i?"startContainer":"endContainer"],s=r[i?"startOffset":"endOffset"],l=[],u=0,c=e.getRoot();for(xi.isText(a)?l.push(n?function(e,t,n){var r,i;for(i=e(t.data.slice(0,s)).length,r=t.previousSibling;r&&xi.isText(r);r=r.previousSibling)i+=e(r.data).length;return i}(t,a):s):(s>=(o=a.childNodes).length&&o.length&&(u=1,s=Math.max(0,o.length-1)),l.push(e.nodeIndex(o[s],n)+u));a&&a!==c;a=a.parentNode)l.push(e.nodeIndex(a,n));return l},hs=function(e){xi.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},ps=function(e,t,n){var r=0;return Gt.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},ms=function(e,t){var n,r,i,o=t?"start":"end";r=e[o+"Offset"],xi.isElement(n=e[o+"Container"])&&"TR"===n.nodeName&&(n=(i=n.childNodes)[Math.min(t?r:r-1,i.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},gs=function(e){return ms(e,!0),ms(e,!1),e},vs=function(e,t){var n;if(xi.isElement(e)&&(e=Da(e,t),fs(e)))return e;if(ia(e)){if(xi.isText(e)&&na(e)&&(e=e.parentNode),fs(n=e.previousSibling))return n;if(fs(n=e.nextSibling))return n}},ys=function(e,t,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng();if(fs(r)||"IMG"===i)return{name:i,index:ps(n.dom,i,r)};var a,s,l,u,c,f,d,h=vs((a=o).startContainer,a.startOffset)||vs(a.endContainer,a.endOffset);return h?{name:i=h.tagName,index:ps(n.dom,i,h)}:(f=(l=n).dom,(d={}).start=ds(f,s=e,u=t,c=o,!0),l.isCollapsed()||(d.end=ds(f,s,u,c,!1)),d)},bs=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},ws=function(e,t){var n=e.dom,r=e.getRng(),i=n.uniqueId(),o=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:ps(n,s,a)};var l=gs(r.cloneRange());if(!o){l.collapse(!1);var u=bs(n,i+"_end",t);l.insertNode(u),hs(u.nextSibling)}(r=gs(r)).collapse(!0);var c=bs(n,i+"_start",t);return r.insertNode(c),hs(c.previousSibling),hs(c.nextSibling),e.moveToBookmark({id:i,keep:1}),{id:i}},Cs={getBookmark:function(e,t,n){return 2===t?ys(Qo,n,e):3===t?(i=(r=e).getRng(),{start:us(r.dom.getRoot(),ts.fromRangeStart(i)),end:us(r.dom.getRoot(),ts.fromRangeEnd(i))}):t?{rng:e.getRng()}:ws(e,!1);var r,i},getUndoBookmark:i(ys,r,!0),getPersistentBookmark:ws},xs="_mce_caret",Ss=function(e){return xi.isElement(e)&&e.id===xs},ks=function(e,t){for(;t&&t!==e;){if(t.id===xs)return t;t=t.parentNode}return null},Ts=xi.isElement,Ns=xi.isText,_s=function(e){var t=e.parentNode;t&&t.removeChild(e)},Es=function(e,t){0===t.length?_s(e):e.nodeValue=t},Ds=function(e){var t=Qo(e);return{count:e.length-t.length,text:t}},Os=function(e,t){return Ms(e),t},Ms=function(e){if(Ts(e)&&ia(e)&&(oa(e)?e.removeAttribute("data-mce-caret"):_s(e)),Ns(e)){var t=Qo(function(e){try{return e.nodeValue}catch(e){return""}}(e));Es(e,t)}},As={removeAndReposition:function(e,t){return ts.isTextPosition(t)?function(e,t){return Ns(e)&&t.container()===e?(i=Ds((n=e).data.substr(0,(r=t).offset())),o=Ds(n.data.substr(r.offset())),0<(a=i.text+o.text).length?(Es(n,a),ts(n,r.offset()-i.count)):r):Os(e,t);var n,r,i,o,a}(e,t):(n=e,(r=t).container()===n.parentNode?function(e,t){var n,r,i,o=t.container(),a=(n=ne(o.childNodes),r=e,i=H(n,r),-1===i?O.none():O.some(i)).map(function(e){return e<t.offset()?ts(o,t.offset()-1):t}).getOr(t);return Ms(e),a}(n,r):Os(n,r));var n,r},remove:Ms},Ls=Qn.detect().browser,Rs=xi.isContentEditableFalse,Ps=function(e,t,n){var r,i,o,a,s,l=ka(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,i=e.scrollLeft||r.scrollLeft,o=e.scrollTop||r.scrollTop):(s=e.getBoundingClientRect(),i=e.scrollLeft-s.left,o=e.scrollTop-s.top),l.left+=i,l.right+=i,l.top+=o,l.bottom+=o,l.width=1,0<(a=t.offsetWidth-t.clientWidth)&&(n&&(a*=-1),l.left+=a,l.right+=a),l},Bs=function(){return Ls.isIE()||Ls.isEdge()||Ls.isFirefox()},Is=function(e){return Rs(e)||xi.isTable(e)&&Bs()},Fs=function(e){return"\xa0"===e},Hs=function(e){return/^[\r\n\t ]$/.test(e)},Ws=function(e){return!Hs(e)&&!Fs(e)},zs=xi.isContentEditableFalse,Us=xi.matchStyleValues("display","block table table-cell table-caption list-item"),Ys=ia,Vs=na,js=xi.isElement,qs=ba,$s=function(e){return 0<e},Gs=function(e){return e<0},Ks=function(e,t){for(var n;n=e(t);)if(!Vs(n))return n;return null},Xs=function(e,t,n,r,i){var o=new Xr(e,r);if(Gs(t)){if((zs(e)||Vs(e))&&n(e=Ks(o.prev,!0)))return e;for(;e=Ks(o.prev,i);)if(n(e))return e}if($s(t)){if((zs(e)||Vs(e))&&n(e=Ks(o.next,!0)))return e;for(;e=Ks(o.next,i);)if(n(e))return e}return null},Zs=function(e,t){for(;e&&e!==t;){if(Us(e))return e;e=e.parentNode}return null},Js=function(e,t,n){return Zs(e.container(),n)===Zs(t.container(),n)},Qs=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),js(n)?n.childNodes[r+e]:null):null},el=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},tl=function(e,t,n){var r,i,o,a;for(i=e?"previousSibling":"nextSibling";n&&n!==t;){if(Ys(r=n[i])&&(r=r[i]),zs(r)){if(a=n,Zs(r,o=t)===Zs(a,o))return r;break}if(qs(r))break;n=n.parentNode}return null},nl=i(el,!0),rl=i(el,!1),il=function(e,t,n){var r,o,a,s,l=i(tl,!0,t),u=i(tl,!1,t);if(a=n.startOffset,na(o=n.startContainer)){if(js(o)||(o=o.parentNode),"before"===(s=o.getAttribute("data-mce-caret"))&&Is(r=o.nextSibling))return nl(r);if("after"===s&&Is(r=o.previousSibling))return rl(r)}if(!n.collapsed)return n;if(xi.isText(o)){if(Ys(o)){if(1===e){if(r=u(o))return nl(r);if(r=l(o))return rl(r)}if(-1===e){if(r=l(o))return rl(r);if(r=u(o))return nl(r)}return n}if(ua(o)&&a>=o.data.length-1)return 1===e&&(r=u(o))?nl(r):n;if(la(o)&&a<=1)return-1===e&&(r=l(o))?rl(r):n;if(a===o.data.length)return(r=u(o))?nl(r):n;if(0===a)return(r=l(o))?rl(r):n}return n},ol=function(e,t){var n=Qs(e,t);return zs(n)&&!xi.isBogusAll(n)},al=function(e,t){return xi.isTable(Qs(e,t))},sl=function(e,t){return O.from(Qs(e?0:-1,t)).filter(zs)},ll=function(e,t,n){var r=il(e,t,n);return-1===e?Ja.fromRangeStart(r):Ja.fromRangeEnd(r)},ul=i(ol,0),cl=i(ol,-1),fl=i(al,0),dl=i(al,-1),hl=function(e,t,n){return O.from(n.container()).filter(xi.isText).exists(function(r){var i=e?0:-1;return t(r.data.charAt(n.offset()+i))})},pl=i(hl,!0,Hs),ml=i(hl,!1,Hs),gl=function(e){return O.from(e.getNode()).map(tr.fromDom)};(es=Qa||(Qa={}))[es.Backwards=-1]="Backwards",es[es.Forwards=1]="Forwards";var vl,yl,bl,wl,Cl=xi.isContentEditableFalse,xl=xi.isText,Sl=xi.isElement,kl=xi.isBr,Tl=ba,Nl=function(e){return ga(e)||!!wa(t=e)&&!0!==j(ne(t.getElementsByTagName("*")),function(e,t){return e||fa(t)},!1);var t},_l=Ca,El=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Dl=function(e,t){if($s(e)){if(Tl(t.previousSibling)&&!xl(t.previousSibling))return ts.before(t);if(xl(t))return ts(t,0)}if(Gs(e)){if(Tl(t.nextSibling)&&!xl(t.nextSibling))return ts.after(t);if(xl(t))return ts(t,t.data.length)}return Gs(e)?kl(t)?ts.before(t):ts.after(t):ts.before(t)},Ol=function(e,t,r){var i,o,a,s,l;if(!Sl(r)||!t)return null;if(t.isEqual(ts.after(r))&&r.lastChild){if(l=ts.after(r.lastChild),Gs(e)&&Tl(r.lastChild)&&Sl(r.lastChild))return kl(r.lastChild)?ts.before(r.lastChild):l}else l=t;var u,c,f,d=l.container(),h=l.offset();if(xl(d)){if(Gs(e)&&0<h)return ts(d,--h);if($s(e)&&h<d.length)return ts(d,++h);i=d}else{if(Gs(e)&&0<h&&(o=El(d,h-1),Tl(o)))return!Nl(o)&&(a=Xs(o,e,_l,o))?xl(a)?ts(a,a.data.length):ts.after(a):xl(o)?ts(o,o.data.length):ts.before(o);if($s(e)&&h<d.childNodes.length&&(o=El(d,h),Tl(o)))return kl(o)?(u=r,(f=(c=o).nextSibling)&&Tl(f)?xl(f)?ts(f,0):ts.before(f):Ol(Qa.Forwards,ts.after(c),u)):!Nl(o)&&(a=Xs(o,e,_l,o))?xl(a)?ts(a,0):ts.before(a):xl(o)?ts(o,0):ts.after(o);i=o||l.getNode()}return($s(e)&&l.isAtEnd()||Gs(e)&&l.isAtStart())&&(i=Xs(i,e,n(!0),r,!0),_l(i,r))?Dl(e,i):(o=Xs(i,e,_l,r),!(s=Yt.last(V(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(d,r),Cl)))||o&&s.contains(o)?o?Dl(e,o):null:l=$s(e)?ts.after(s):ts.before(s))},Ml=function(e){return{next:function(t){return Ol(Qa.Forwards,t,e)},prev:function(t){return Ol(Qa.Backwards,t,e)}}},Al=function(e){return ts.isTextPosition(e)?0===e.offset():ba(e.getNode())},Ll=function(e){if(ts.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return ba(e.getNode(!0))},Rl=function(e,t){return!ts.isTextPosition(e)&&!ts.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Pl=function(e,t,n){var r=Ml(t);return O.from(e?r.next(n):r.prev(n))},Bl=function(e,t){var n,r,i,o,a,s=e?t.firstChild:t.lastChild;return xi.isText(s)?O.some(ts(s,e?0:s.data.length)):s?ba(s)?O.some(e?ts.before(s):xi.isBr(a=s)?ts.before(a):ts.after(a)):(r=t,i=s,o=(n=e)?ts.before(i):ts.after(i),Pl(n,r,o)):O.none()},Il=i(Pl,!0),Fl=i(Pl,!1),Hl={fromPosition:Pl,nextPosition:Il,prevPosition:Fl,navigate:function(e,t,n){return Pl(e,t,n).bind(function(r){return Js(n,r,t)&&function(e,t,n){return e?!Rl(t,n)&&!(!ts.isTextPosition(r=t)&&xi.isBr(r.getNode()))&&Ll(t)&&Al(n):!Rl(n,t)&&Al(t)&&Ll(n);var r}(e,n,r)?Pl(e,t,r):O.some(r)})},positionIn:Bl,firstPositionIn:i(Bl,!0),lastPositionIn:i(Bl,!1)},Wl=function(e,t){return!e.isBlock(t)||t.innerHTML||fe.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},zl=function(e,t){return Hl.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},Ul=function(e,t,n){return!(!1!==t.hasChildNodes()||!ks(e,t)||(i=n,o=(r=t).ownerDocument.createTextNode(Jo),r.appendChild(o),i.setStart(o,0),i.setEnd(o,0),0));var r,i,o},Yl=function(e,t,n,r){var i,o,a,s,l=n[t?"start":"end"],u=e.getRoot();if(l){for(a=l[0],o=u,i=l.length-1;1<=i;i--){if(s=o.childNodes,Ul(u,o,r))return!0;if(l[i]>s.length-1)return!!Ul(u,o,r)||zl(o,r);o=s[l[i]]}3===o.nodeType&&(a=Math.min(l[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(l[0],o.childNodes.length)),t?r.setStart(o,a):r.setEnd(o,a)}return!0},Vl=function(e){return xi.isText(e)&&0<e.data.length},jl=function(e,t,n){var r,i,o,a,s,l,u=e.get(n.id+"_"+t),c=n.keep;if(u){if(r=u.parentNode,"start"===t?c?u.hasChildNodes()?(r=u.firstChild,i=1):Vl(u.nextSibling)?(r=u.nextSibling,i=0):Vl(u.previousSibling)?(r=u.previousSibling,i=u.previousSibling.data.length):(r=u.parentNode,i=e.nodeIndex(u)+1):i=e.nodeIndex(u):c?u.hasChildNodes()?(r=u.firstChild,i=1):Vl(u.previousSibling)?(r=u.previousSibling,i=u.previousSibling.data.length):(r=u.parentNode,i=e.nodeIndex(u)):i=e.nodeIndex(u),s=r,l=i,!c){for(a=u.previousSibling,o=u.nextSibling,Gt.each(Gt.grep(u.childNodes),function(e){xi.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});u=e.get(n.id+"_"+t);)e.remove(u,!0);a&&o&&a.nodeType===o.nodeType&&xi.isText(a)&&!fe.opera&&(i=a.nodeValue.length,a.appendData(o.nodeValue),e.remove(o),s=a,l=i)}return O.some(ts(s,l))}return O.none()},ql=function(e,t,n){return Cs.getBookmark(e,t,n)},$l=function(e,t){(function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,p,m,g,v=e.dom;if(t){if(Gt.isArray(t.start))return m=t,g=(p=v).createRng(),Yl(p,!0,m,g)&&Yl(p,!1,m,g)?O.some(g):O.none();if("string"==typeof t.start)return O.some((f=t,d=(c=v).createRng(),h=cs(c.getRoot(),f.start),d.setStart(h.container(),h.offset()),h=cs(c.getRoot(),f.end),d.setEnd(h.container(),h.offset()),d));if(t.hasOwnProperty("id"))return l=jl(i=v,"start",o=t),u=jl(i,"end",o),Aa([l,(a=u,s=l,a.isSome()?a:s)],function(e,t){var n=i.createRng();return n.setStart(Wl(i,e.container()),e.offset()),n.setEnd(Wl(i,t.container()),t.offset()),n});if(t.hasOwnProperty("name"))return O.from((n=v).select((r=t).name)[r.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t});if(t.hasOwnProperty("rng"))return O.some(t.rng)}return O.none()})(e,t).each(function(t){e.setRng(t)})},Gl=function(e){return xi.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Kl=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},Xl=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},Zl=function(e,t,n){var r,i,o,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!function(e){return e&&/^(IMG)$/.test(e.nodeName)}(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(a<(o=s.childNodes).length?r=new Xr(s=o[a],e.getParent(s,e.isBlock)):(r=new Xr(s=o[o.length-1],e.getParent(s,e.isBlock))).next(!0),i=r.current();i;i=r.next())if(3===i.nodeType&&!Kl(i))return n.setStart(i,0),void t.setRng(n)},Jl=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!Kl(e))return e},Ql=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},eu=function(e,t,n){return e.schema.isValidChild(t,n)},tu=Kl,nu=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},ru=function(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},iu=Xl,ou=function(e,t,n){return Xl(e,e.getStyle(t,n),n)},au=function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},su=function(e,t,n){return e.getParents(t,n,e.getRoot())},lu=Gl,uu=su,cu=tu,fu=Ql,du=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},hu=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},pu=function(e,t,n,r){var i,o,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?(i=a.lastIndexOf(" ",r),-1!==(i=(o=a.lastIndexOf("\xa0",r))<i?i:o)&&!t&&(i<r||!e)&&i<=a.length&&i++):(i=a.indexOf(" ",r),o=a.indexOf("\xa0",r),i=-1!==i&&(-1===o||i<o)?i:o),i},mu=function(e,t,n,r,i,o){var a,s,l,u;if(3===n.nodeType){if(-1!==(l=pu(i,o,n,r)))return{container:n,offset:l};u=n}for(a=new Xr(n,e.getParent(n,e.isBlock)||t);s=a[i?"prev":"next"]();)if(3!==s.nodeType||lu(s.parentNode)){if(e.isBlock(s)||ru(s,"BR"))break}else if(-1!==(l=pu(i,o,u=s)))return{container:s,offset:l};if(u)return{container:u,offset:r=i?0:u.length}},gu=function(e,t,n,r,i){var o,a,s,l;for(3===r.nodeType&&0===r.nodeValue.length&&r[i]&&(r=r[i]),o=uu(e,r),a=0;a<o.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(l=t[s])&&l.collapsed!==n.collapsed)&&e.is(o[a],l.selector))return o[a];return r},vu=function(e,t,n,r){var i,o=e.dom,a=o.getRoot();if(t[0].wrapper||(i=o.getParent(n,t[0].block,a)),!i){var s=o.getParent(n,"LI,TD,TH");i=o.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==a&&fu(e,t)},s)}if(i&&t[0].wrapper&&(i=uu(o,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i[r]&&!o.isBlock(i[r])&&!ru(i=i[r],"br"););return i||n},yu=function(e,t,n,r,i,o,a){var s,l,u,c,f,d;if(s=l=a?n:i,c=a?"previousSibling":"nextSibling",f=e.getRoot(),3===s.nodeType&&!cu(s)&&(a?0<r:o<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(l))return l;for(u=l[c];u;u=u[c])if(!lu(u)&&!cu(u)&&("BR"!==(d=u).nodeName||!d.getAttribute("data-mce-bogus")||d.nextSibling))return l;if(l===f||l.parentNode===f){s=l;break}l=l.parentNode}return s},bu=function(e,t,n,r){var i,o=t.startContainer,a=t.startOffset,s=t.endContainer,l=t.endOffset,u=e.dom;return 1===o.nodeType&&o.hasChildNodes()&&3===(o=Da(o,a)).nodeType&&(a=0),1===s.nodeType&&s.hasChildNodes()&&3===(s=Da(s,t.collapsed?l:l-1)).nodeType&&(l=s.nodeValue.length),o=hu(u,o),s=hu(u,s),(lu(o.parentNode)||lu(o))&&(o=lu(o)?o:o.parentNode,3===(o=t.collapsed?o.previousSibling||o:o.nextSibling||o).nodeType&&(a=t.collapsed?o.length:0)),(lu(s.parentNode)||lu(s))&&(s=lu(s)?s:s.parentNode,3===(s=t.collapsed?s.nextSibling||s:s.previousSibling||s).nodeType&&(l=t.collapsed?0:s.length)),t.collapsed&&((i=mu(u,e.getBody(),o,a,!0,r))&&(o=i.container,a=i.offset),(i=mu(u,e.getBody(),s,l,!1,r))&&(s=i.container,l=i.offset)),n[0].inline&&(s=r?s:function(e,t){var n=du(e,l);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=du(n.node.previousSibling);n.node&&0<n.offset&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&1<n.offset&&(e=n.node).splitText(n.offset-1)}return e}(s)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===o.nodeType&&0!==a||(o=yu(u,n,o,a,s,l,!0)),n[0].inline&&3===s.nodeType&&l!==s.nodeValue.length||(s=yu(u,n,o,a,s,l,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=gu(u,n,t,o,"previousSibling"),s=gu(u,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(o=vu(e,n,o,"previousSibling"),s=vu(e,n,s,"nextSibling"),n[0].block&&(u.isBlock(o)||(o=yu(u,n,o,a,s,l,!0)),u.isBlock(s)||(s=yu(u,n,o,a,s,l,!1)))),1===o.nodeType&&(a=u.nodeIndex(o),o=o.parentNode),1===s.nodeType&&(l=u.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:l}},wu=Gt.each,Cu=function(e,t,n){var r,i,o,a,s,l,u,c=t.startContainer,f=t.startOffset,d=t.endContainer,h=t.endOffset;if(0<(u=e.select("td[data-mce-selected],th[data-mce-selected]")).length)wu(u,function(e){n([e])});else{var p,m,g,v=function(e){var t;return 3===(t=e[0]).nodeType&&t===c&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&0<e.length&&t===d&&3===t.nodeType&&e.splice(e.length-1,1),e},y=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},b=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},w=function(e,t,r){var i=r?"nextSibling":"previousSibling";for(s=(a=e).parentNode;a&&a!==t;a=s)s=a.parentNode,(l=y(a===e?a:a[i],i)).length&&(r||l.reverse(),n(v(l)))};if(1===c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[f]),1===d.nodeType&&d.hasChildNodes()&&(m=h,--m>(g=(p=d).childNodes).length-1?m=g.length-1:m<0&&(m=0),d=g[m]||p),c===d)return n(v([c]));for(r=e.findCommonAncestor(c,d),a=c;a;a=a.parentNode){if(a===d)return w(c,r,!0);if(a===r)break}for(a=d;a;a=a.parentNode){if(a===c)return w(d,r);if(a===r)break}i=b(c,r)||c,o=b(d,r)||d,w(c,i,!0),(l=y(i===c?i:i.nextSibling,"nextSibling",o===d?o.nextSibling:o)).length&&n(v(l)),w(d,o)}},xu=(vl=lr,yl=function(e){return vl(e)?O.from(e.dom().nodeValue):O.none()},bl=Qn.detect().browser,{get:function(e){if(!vl(e))throw new Error("Can only get text value of a text node");return wl(e).getOr("")},getOption:wl=bl.isIE()&&10===bl.version.major?function(e){try{return yl(e)}catch(e){return O.none()}}:yl,set:function(e,t){if(!vl(e))throw new Error("Can only set raw text value of a text node");e.dom().nodeValue=t}}),Su=function(e){return xu.get(e)},ku=function(e,t,n,r){var i,o,a=t.uid,s=void 0===a?(i="mce-annotation",o=(new Date).getTime(),i+"_"+Math.floor(1e9*Math.random())+ ++qo+String(o)):a,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(t,["uid"]),u=tr.fromTag("span",e);Eo(u,Ho()),pr(u,""+zo(),s),pr(u,""+Wo(),n);var c,f=r(s,l),d=f.attributes,h=f.classes,p=void 0===h?[]:h;return mr(u,void 0===d?{}:d),c=u,U(p,function(e){Eo(c,e)}),u},Tu=function(e,t,n,r){e.undoManager.transact(function(){var i,o,a,s,l=e.selection.getRng();if(l.collapsed&&(s=bu(i=e,o=l,[{inline:!0}],3===(a=o).startContainer.nodeType&&a.startContainer.nodeValue.length>=a.startOffset&&"\xa0"===a.startContainer.nodeValue[a.startOffset]),o.setStart(s.startContainer,s.startOffset),o.setEnd(s.endContainer,s.endOffset),i.selection.setRng(o)),e.selection.getRng().collapsed){var u=ku(e.getDoc(),r,t,n.decorate);Xo(u,"\xa0"),e.selection.getRng().insertNode(u.dom()),e.selection.select(u.dom())}else{var c=Cs.getPersistentBookmark(e.selection,!1),f=e.selection.getRng();(function(e,t,n,r,i){var o=[],a=ku(e.getDoc(),i,n,r),s=To(O.none()),l=function(){s.set(O.none())},u=function(e){U(e,c)},c=function(t){var n,r;switch(function(e,t,n,r){return Or(t).fold(function(){return"skipping"},function(i){return"br"===r||lr(a=t)&&"\ufeff"===Su(a)?"valid":sr(o=t)&&Do(o,Ho())?"existing":Ss(t)?"caret":eu(e,n,r)&&eu(e,or(i),n)?"valid":"invalid-child";var o,a})}(e,t,"span",or(t))){case"invalid-child":l();var i=Pr(t);u(i),l();break;case"valid":var c=s.get().getOrThunk(function(){var e=Go(a);return o.push(e),s.set(O.some(e)),e});go(n=t,r=c),bo(r,n)}};Cu(e.dom,t,function(e){var t;l(),t=z(e,tr.fromDom),u(t)})})(e,f,t,n.decorate,r),e.selection.moveToBookmark(c)}})};function Nu(e){var t,n=(t={},{register:function(e,n){t[e]={name:e,settings:n}},lookup:function(e){return t.hasOwnProperty(e)?O.from(t[e]).map(function(e){return e.settings}):O.none()}});jo(e,n);var r=Vo(e);return{register:function(e,t){n.register(e,t)},annotate:function(t,r){n.lookup(t).each(function(n){Tu(e,t,n,r)})},annotationChanged:function(e,t){r.addListener(e,t)},remove:function(t){Uo(e,O.some(t)).each(function(e){U(e.elements,So)})},getAll:function(t){var n,r,i,o,a,s=(n=t,r=tr.fromDom(e.getBody()),i=Mo(r,"["+Wo()+'="'+n+'"]'),o={},U(i,function(e){var t=gr(e,zo()),n=o.hasOwnProperty(t)?o[t]:[];o[t]=n.concat([e])}),o);return a=function(e){return z(e,function(e){return e.dom()})},dr(s,function(e,t,n){return{k:t,v:a(e)}})}}}var _u=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Eu=function(e,t){var n=ts.after(e),r=Ml(t).prev(n);return r?r.toRange():null},Du=Gt.each,Ou=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return Du(e.getAttribs(t),function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=e.getAttrib(t,i))}),n},i=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!i(r(t),r(n))||!i(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||Gl(t)||Gl(n))}},Mu=function(e){Co(e),bo(e,tr.fromHtml('<br data-mce-bogus="1">'))},Au=function(e){Fr(e).each(function(t){Mr(t).each(function(n){ni(e)&&ii(t)&&ni(n)&&xo(t)})})},Lu=Gt.makeMap;function Ru(e){var t,n,r,i,o,a=[];return t=(e=e||{}).indent,n=Lu(e.indent_before||""),r=Lu(e.indent_after||""),i=Bi.getEncodeFunc(e.entity_encoding||"raw",e.entities),o="html"===e.element_format,{start:function(e,s,l){var u,c,f,d;if(t&&n[e]&&0<a.length&&0<(d=a[a.length-1]).length&&"\n"!==d&&a.push("\n"),a.push("<",e),s)for(u=0,c=s.length;u<c;u++)a.push(" ",(f=s[u]).name,'="',i(f.value,!0),'"');a[a.length]=!l||o?">":" />",l&&t&&r[e]&&0<a.length&&0<(d=a[a.length-1]).length&&"\n"!==d&&a.push("\n")},end:function(e){var n;a.push("</",e,">"),t&&r[e]&&0<a.length&&0<(n=a[a.length-1]).length&&"\n"!==n&&a.push("\n")},text:function(e,t){0<e.length&&(a[a.length]=t?e:i(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",i(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function Pu(e,t){void 0===t&&(t=$i());var n=Ru(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(r){var i,o;o=e.validate,i={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;a(e),e=e.next;);}},n.reset();var a=function(e){var r,s,l,u,c,f,d,h,p,m=i[e.type];if(m)m(e);else{if(r=e.name,s=e.shortEnded,l=e.attributes,o&&l&&1<l.length&&((f=[]).map={},p=t.getElementRule(e.name))){for(d=0,h=p.attributesOrder.length;d<h;d++)(u=p.attributesOrder[d])in l.map&&(f.map[u]=c=l.map[u],f.push({name:u,value:c}));for(d=0,h=l.length;d<h;d++)(u=l[d].name)in f.map||(f.map[u]=c=l.map[u],f.push({name:u,value:c}));l=f}if(n.start(e.name,l,s),!s){if(e=e.firstChild)for(;a(e),e=e.next;);n.end(r)}}};return 1!==r.type||e.inner?i[11](r):a(r),n.getContent()}}}var Bu=function(e){return e.collapsed?e:(n=ts.fromRangeStart(t=e),r=ts.fromRangeEnd(t),Hl.fromPosition(!1,i=t.commonAncestorContainer,r).map(function(e){return!Js(n,r,i)&&Js(n,e,i)?(o=n.container(),a=n.offset(),s=e.container(),l=e.offset(),(u=document.createRange()).setStart(o,a),u.setEnd(s,l),u):t;var o,a,s,l,u}).getOr(t));var t,n,r,i},Iu=xi.matchNodeNames("td th"),Fu=function(e,t){var n,r,i=e.selection.getRng(),o=i.startContainer,a=i.startOffset;i.collapsed&&(r=a,xi.isText(n=o)&&"\xa0"===n.nodeValue[r-1])&&xi.isText(o)&&(o.insertData(a-1," "),o.deleteData(a,1),i.setStart(o,a),i.setEnd(o,a),e.selection.setRng(i)),e.selection.setContent(t)},Hu=function(e,t){var n,r,i="string"!=typeof(n=t)?(r=Gt.extend({paste:n.paste,data:{paste:n.paste}},n),{content:n.content,details:r}):{content:n,details:{}};!function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h,p=e.selection,m=e.dom;if(/^ | $/.test(t)&&(t=function(e,t){var n,r;r=e.startOffset;var i=function(e){return n[e]&&3===n[e].nodeType};return 3===(n=e.startContainer).nodeType&&(0<r?t=t.replace(/^&nbsp;/," "):i("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),r<n.length?t=t.replace(/&nbsp;(<br>|)$/," "):i("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t}(p.getRng(),t)),r=e.parser,h=n.merge,i=Pu({validate:e.settings.validate},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',(l=e.fire("BeforeSetContent",l={content:t,format:"html",selection:!0,paste:n.paste})).isDefaultPrevented())e.fire("SetContent",{content:l.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=l.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);var g,v,y,b,w,C=(c=p.getRng()).startContainer||(c.parentElement?c.parentElement():null),x=e.getBody();C===x&&p.isCollapsed()&&m.isBlock(x.firstChild)&&(g=x.firstChild)&&!e.schema.getShortEndedElements()[g.nodeName]&&m.isEmpty(x.firstChild)&&((c=m.createRng()).setStart(x.firstChild,0),c.setEnd(x.firstChild,0),p.setRng(c)),p.isCollapsed()||(e.selection.setRng(Bu(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),y=t,w=(v=e.selection.getRng()).startOffset,3===(b=v.startContainer).nodeType&&v.collapsed&&("\xa0"===b.data[w]?(b.deleteData(w,1),/[\u00a0| ]$/.test(y)||(y+=" ")):"\xa0"===b.data[w-1]&&(b.deleteData(w-1,1),/[\u00a0| ]$/.test(y)||(y=" "+y))),t=y);var S,k,T,N={context:(o=p.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(s=r.parse(t,N),!0===n.paste&&function(e,t){var n,r,i,o,a,s,l=t.firstChild,u=t.lastChild;return l&&"meta"===l.name&&(l=l.next),u&&"mce_marker"===u.attr("id")&&(u=u.prev),r=u,s=(n=e).getNonEmptyElements(),r&&(r.isEmpty(s)||(i=r,n.getBlockElements()[i.name]&&(a=i).firstChild&&a.firstChild===a.lastChild&&("br"===(o=i.firstChild).name||"\xa0"===o.value)))&&(u=u.prev),!(!l||l!==u||"ul"!==l.name&&"ol"!==l.name)}(e.schema,s)&&_u(m,o))return c=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h,p,m,g,v,y,b,w,C=(i=t,l=e.serialize(r),a=(o=i.createFragment(l)).firstChild,s=o.lastChild,a&&"META"===a.nodeName&&a.parentNode.removeChild(a),s&&"mce_marker"===s.id&&s.parentNode.removeChild(s),o),x=_u(t,n.startContainer),S=function(e){return 0<e.length&&(!(t=e[e.length-1]).firstChild||function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&("\xa0"===(t=e.firstChild).data||xi.isBr(t));var t}(t))?e.slice(0,-1):e;var t}(Gt.grep(C.firstChild.childNodes,function(e){return"LI"===e.nodeName})),k=t.getRoot(),T=function(e){var r=ts.fromRangeStart(n),i=Ml(t.getRoot()),o=1===e?i.prev(r):i.next(r);return!o||_u(t,o.getNode())!==x};return T(1)?function(e,t,n){var r,i,o,a=e.parentNode;return Gt.each(S,function(t){a.insertBefore(t,e)}),r=n,i=ts.before(e),(o=Ml(r).next(i))?o.toRange():null}(x,0,k):T(2)?(u=x,f=k,t.insertAfter((c=S).reverse(),u),Eu(c[0],f)):(h=S,p=k,m=d=x,v=(g=n).cloneRange(),y=g.cloneRange(),v.setStartBefore(m),y.setEndAfter(m),b=[v.cloneContents(),y.cloneContents()],(w=d.parentNode).insertBefore(b[0],d),Gt.each(h,function(e){w.insertBefore(e,d)}),w.insertBefore(b[1],d),w.removeChild(d),Eu(h[h.length-1],p))}(i,m,e.selection.getRng(),s),e.selection.setRng(c),void e.fire("SetContent",l);if(function(e){for(var t=s;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(),"mce_marker"===(f=s.lastChild).attr("id"))for(f=(u=f).prev;f;f=f.walk(!0))if(3===f.type||!m.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(u,f,"br"===f.name);break}if(e._selectionOverrides.showBlockCaretContainer(o),N.invalid){for(Fu(e,d),o=p.getNode(),a=e.getBody(),9===o.nodeType?o=f=a:f=o;f!==a;)f=(o=f).parentNode;t=o===a?a.innerHTML:m.getOuterHTML(o),t=i.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(s)}))),o===a?m.setHTML(a,t):m.setOuterHTML(o,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild;!r||r===n.lastChild&&"BR"===r.nodeName?e.dom.setHTML(n,t):Fu(e,t)}}(e,t=i.serialize(s),o);!function(e,t){var n=e.schema.getTextInlineElements(),r=e.dom;if(t){var i=e.getBody(),o=new Ou(r);Gt.each(r.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==i;t=t.parentNode)n[e.nodeName.toLowerCase()]&&o.compare(t,e)&&r.remove(e,!0)})}}(e,h),function(e,t){var n,r,i,o,a,s=e.dom,l=e.selection;if(t){if(e.selection.scrollIntoView(t),n=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(t))return s.remove(t),l.select(n);var u=s.createRng();(o=t.previousSibling)&&3===o.nodeType?(u.setStart(o,o.nodeValue.length),fe.ie||(a=t.nextSibling)&&3===a.nodeType&&(o.appendData(a.data),a.parentNode.removeChild(a))):(u.setStartBefore(t),u.setEndBefore(t)),r=s.getParent(t,s.isBlock),s.remove(t),r&&s.isEmpty(r)&&(e.$(r).empty(),u.setStart(r,0),u.setEnd(r,0),Iu(r)||r.getAttribute("data-mce-fragment")||!(i=function(t){var n=ts.fromRangeStart(u);if(n=Ml(e.getBody()).next(n))return n.toRange()}())?s.add(r,s.create("br",{"data-mce-bogus":"1"})):(u=i,s.remove(r))),l.setRng(u)}}(e,m.get("mce_marker")),S=e.getBody(),Gt.each(S.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),k=e.dom,T=e.selection.getStart(),O.from(k.getParent(T,"td,th")).map(tr.fromDom).each(Au),e.fire("SetContent",l),e.addVisual()}}(e,i.content,i.details)},Wu=Cr("sections","settings"),zu=Qn.detect().deviceType.isTouch(),Uu=["lists","autolink","autosave"],Yu={theme:"mobile"},Vu=function(e){var t=R(e)?e.join(" "):e,n=z(A(t)?t.split(" "):[],qn);return V(n,function(e){return 0<e.length})},ju=function(e,t){return e.sections().hasOwnProperty(t)},qu=function(e,t,n,r){var o,a=Vu(n.forced_plugins),s=Vu(r.plugins),l=(o=e&&ju(t,"mobile")?V(s,i(W,Uu)):s,[].concat(Vu(a)).concat(Vu(o)));return Gt.extend(r,{plugins:l.join(" ")})},$u=function(e,t,n){return O.from(t.settings[n]).filter(e)},Gu=i($u,A),Ku=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Xu=function(e,t){var n=t.container(),r=t.offset();return e?ra(n)?xi.isText(n.nextSibling)?ts(n.nextSibling,0):ts.after(n):aa(t)?ts(n,r+1):t:ra(n)?xi.isText(n.previousSibling)?ts(n.previousSibling,n.previousSibling.data.length):ts.before(n):sa(t)?ts(n,r-1):t},Zu={isInlineTarget:function(e,t){var n=Gu(e,"inline_boundaries_selector").getOr("a[href],code");return Tr(tr.fromDom(t),n)},findRootInline:function(e,t,n){var r,i,o=(r=e,i=t,V(ao.DOM.getParents(n.container(),"*",i),r));return O.from(o[o.length-1])},isRtl:function(e){return"rtl"===ao.DOM.getStyle(e,"direction",!0)||Ku.test(e.textContent)},isAtZwsp:function(e){return aa(e)||sa(e)},normalizePosition:Xu,normalizeForwards:i(Xu,!0),normalizeBackwards:i(Xu,!1),hasSameParentBlock:function(e,t,n){var r=Zs(t,e),i=Zs(n,e);return r&&r===i}},Ju=function(e,t){return Er(e,t)?Po(t,function(e){return oi(e)||si(e)},(n=e,function(e){return _r(n,tr.fromDom(e.dom().parentNode))})):O.none();var n},Qu=function(e){var t,n,r;e.dom.isEmpty(e.getBody())&&(e.setContent(""),r=(n=(t=e).getBody()).firstChild&&t.dom.isBlock(n.firstChild)?n.firstChild:n,t.selection.setCursorLocation(r,0))},ec=function(e,t){return ba(t)&&!1===(r=e,xi.isText(o=t)&&/^[ \t\r\n]*$/.test(o.data)&&!1===function(e,t){var n,r,o,a=tr.fromDom(e);return n=tr.fromDom(t),r="pre,code",o=i(_r,a),Bo(n,r,o).isSome()}(r,o))||xi.isElement(n=t)&&"A"===n.nodeName&&n.hasAttribute("name")||tc(t);var n,r,o},tc=xi.hasAttribute("data-mce-bookmark"),nc=xi.hasAttribute("data-mce-bogus"),rc=xi.hasAttributeValue("data-mce-bogus","all"),ic=function(e){return function(e){var t,n,r=0;if(ec(e,e))return!1;if(!(n=e.firstChild))return!0;t=new Xr(n,e);do{if(rc(n))n=t.next(!0);else if(nc(n))n=t.next();else if(xi.isBr(n))r++,n=t.next();else{if(ec(e,n))return!1;n=t.next()}}while(n);return r<=1}(e.dom())},oc=Cr("block","position"),ac=Cr("from","to"),sc=function(e,t){var n=tr.fromDom(e),r=tr.fromDom(t.container());return Ju(n,r).map(function(e){return oc(e,t)})},lc=function(e,t){return function(e,t,r){return Er(t,e)?function(e,t){for(var r=I(t)?t:n(!1),i=e.dom(),o=[];null!==i.parentNode&&void 0!==i.parentNode;){var a=i.parentNode,s=tr.fromDom(a);if(o.push(s),!0===r(s))break;i=a}return o}(e,function(e){return r(e)||_r(e,t)}).slice(0,-1):[]}(e,t,n(!1))},uc=lc,cc=function(e,t){return[e].concat(lc(e,t))},fc=function(e){var t,n=(t=Pr(e),$(t,ni).fold(function(){return t},function(e){return t.slice(0,e)}));return U(n,xo),n},dc=function(e,t){var n=cc(t,e);return q(n.reverse(),ic).each(xo)},hc=function(e,t,n,r){if(ic(n))return Mu(n),Hl.firstPositionIn(n.dom());0===V(Lr(r),function(e){return!ic(e)}).length&&ic(t)&&go(r,tr.fromTag("br"));var i=Hl.prevPosition(n.dom(),ts.before(r.dom()));return U(fc(t),function(e){go(r,e)}),dc(e,t),i},pc=function(e,t,n){if(ic(n))return xo(n),ic(t)&&Mu(t),Hl.firstPositionIn(t.dom());var r=Hl.lastPositionIn(n.dom());return U(fc(t),function(e){bo(n,e)}),dc(e,t),r},mc=function(e,t){Hl.positionIn(e,t.dom()).map(function(e){return e.getNode()}).map(tr.fromDom).filter(ii).each(xo)},gc=function(e,t,n){return mc(!0,t),mc(!1,n),function(e,t){return Er(t,e)?(n=cc(e,t),O.from(n[n.length-1])):O.none();var n}(t,n).fold(i(pc,e,t,n),i(hc,e,t,n))},vc=function(e,t,n,r){return t?gc(e,r,n):gc(e,n,r)},yc=function(e,t){var n,r=tr.fromDom(e.getBody());return(n=function(e,t,n){return n.collapsed?function(e,t,n){var r=sc(e,ts.fromRangeStart(n)),i=r.bind(function(n){return Hl.fromPosition(t,e,n.position()).bind(function(n){return sc(e,n).map(function(n){return r=e,i=t,xi.isBr((o=n).position().getNode())&&!1===ic(o.block())?Hl.positionIn(!1,o.block().dom()).bind(function(e){return e.isEqual(o.position())?Hl.fromPosition(i,r,e).bind(function(e){return sc(r,e)}):O.some(o)}).getOr(o):o;var r,i,o})})});return Aa([r,i],ac).filter(function(e){return!1===_r((r=e).from().block(),r.to().block())&&Or((n=e).from().block()).bind(function(e){return Or(n.to().block()).filter(function(t){return _r(e,t)})}).isSome()&&!1===xi.isContentEditableFalse((t=e).from().block())&&!1===xi.isContentEditableFalse(t.to().block());var t,n,r})}(e,t,n):O.none()}(r.dom(),t,e.selection.getRng()).bind(function(e){return vc(r,t,e.from().block(),e.to().block())})).each(function(t){e.selection.setRng(t.toRange())}),n.isSome()},bc=function(e,t){var n=tr.fromDom(t),r=i(_r,e);return Ro(n,ci,r).isSome()},wc=function(e,t){return!e.selection.isCollapsed()&&function(e){var t,n,r,i,o=tr.fromDom(e.getBody());return function(e,t){var n,r,i=Hl.prevPosition(e.dom(),ts.fromRangeStart(t)).isNone(),o=Hl.nextPosition(e.dom(),ts.fromRangeEnd(t)).isNone();return!(bc(n=e,(r=t).startContainer)||bc(n,r.endContainer))&&i&&o}(o,e.selection.getRng())?((i=e).setContent(""),i.selection.setCursorLocation(),!0):(t=o,r=(n=e.selection).getRng(),Aa([Ju(t,tr.fromDom(r.startContainer)),Ju(t,tr.fromDom(r.endContainer))],function(e,i){return!1===_r(e,i)&&(r.deleteContents(),vc(t,!0,e,i).each(function(e){n.setRng(e.toRange())}),!0)}).getOr(!1))}(e)},Cc=function(e){if(!R(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return U(e,function(r,i){var o=ur(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!R(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:function(e){var n=ur(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!Z(t,function(e){return W(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}}),n},xc=function(e){return gl(e).exists(ii)},Sc=function(e,t,n){var r=V(cc(tr.fromDom(n.container()),t),ni),i=ee(r).getOr(t);return Hl.fromPosition(e,i.dom(),n).filter(xc)},kc=function(e,t){return gl(t).exists(ii)||Sc(!0,e,t).isSome()},Tc=function(e,t){return(n=t,O.from(n.getNode(!0)).map(tr.fromDom)).exists(ii)||Sc(!1,e,t).isSome();var n},Nc=i(Sc,!1),_c=i(Sc,!0),Ec=Cc([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Dc=function(e,t,n,r){var i=r.getNode(!1===t);return Ju(tr.fromDom(e),tr.fromDom(n.getNode())).map(function(e){return ic(e)?Ec.remove(e.dom()):Ec.moveToElement(i)}).orThunk(function(){return O.some(Ec.moveToElement(i))})},Oc=function(e,t,r){return Hl.fromPosition(t,e,r).bind(function(i){return c=i.getNode(),ci(tr.fromDom(c))||si(tr.fromDom(c))?O.none():(o=e,l=i,u=function(e){return ri(tr.fromDom(e))&&!Js(s,l,o)},sl(!(a=t),s=r).fold(function(){return sl(a,l).fold(n(!1),u)},u)?O.none():t&&xi.isContentEditableFalse(i.getNode())?Dc(e,t,r,i):!1===t&&xi.isContentEditableFalse(i.getNode(!0))?Dc(e,t,r,i):t&&cl(r)?O.some(Ec.moveToPosition(i)):!1===t&&ul(r)?O.some(Ec.moveToPosition(i)):O.none());var o,a,s,l,u,c})},Mc=function(e,t,n){if(0!==n){var r,i,o,a=e.data.slice(t,t+n);e.replaceData(t,n,(i=0===t,o=t+n>=e.data.length,j((r=a).split(""),function(e,t){return-1!==" \f\n\r\t\v".indexOf(t)||"\xa0"===t?e.previousCharIsSpace||""===e.str&&i||e.str.length===r.length-1&&o?{previousCharIsSpace:!1,str:e.str+"\xa0"}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}},{previousCharIsSpace:!1,str:""}).str))}},Ac=function(e,t){var n,r=e.data.slice(t),i=r.length-(n=r,n.replace(/^\s+/g,"")).length;return Mc(e,t,i)},Lc=function(e,t){return r=e,i=(n=t).container(),o=n.offset(),!1===ts.isTextPosition(n)&&i===r.parentNode&&o>ts.before(r).offset()?ts(t.container(),t.offset()-1):t;var n,r,i,o},Rc=function(e){return ba(e.previousSibling)?O.some(xi.isText(t=e.previousSibling)?ts(t,t.data.length):ts.after(t)):e.previousSibling?Hl.lastPositionIn(e.previousSibling):O.none();var t},Pc=function(e){return ba(e.nextSibling)?O.some(xi.isText(t=e.nextSibling)?ts(t,0):ts.before(t)):e.nextSibling?Hl.firstPositionIn(e.nextSibling):O.none();var t},Bc=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},Ic=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(or(t))},Fc=function(e){if(ic(e)){var t=tr.fromHtml('<br data-mce-bogus="1">');return Co(e),bo(e,t),O.some(ts.before(t.dom()))}return O.none()},Hc=function(e,t,n,r){void 0===r&&(r=!0);var o,a=function(e,t,n){return(r=e,o=t,a=n,r?function(e,t){return Pc(t).orThunk(function(){return Rc(t)}).orThunk(function(){return Hl.nextPosition(n=e,ts.after(r=t)).fold(function(){return Hl.prevPosition(n,ts.before(r))},O.some);var n,r})}(o,a):function(e,t){return Rc(t).orThunk(function(){return Pc(t)}).orThunk(function(){return n=e,i=ts.before((r=t).previousSibling?r.previousSibling:r.parentNode),Hl.prevPosition(n,i).fold(function(){return Hl.nextPosition(n,ts.after(r))},O.some);var n,r,i})}(o,a)).map(i(Lc,n));var r,o,a}(t,e.getBody(),n.dom()),s=Ro(n,i(Ic,e),(o=e.getBody(),function(e){return e.dom()===o})),l=function(e,t,n){var r=Mr(e).filter(function(e){return xi.isText(e.dom())}),i=Ar(e).filter(function(e){return xi.isText(e.dom())});return xo(e),Aa([r,i,t],function(e,t,r){var i,o,a,s,l=e.dom(),u=t.dom(),c=l.data.length;return o=u,a=n,s=$n((i=l).data).length,i.appendData(o.data),xo(tr.fromDom(o)),a&&Ac(i,s),r.container()===u?ts(l,c):r}).orThunk(function(){return n&&(r.each(function(e){return t=e.dom(),n=e.dom().length,i=(r=t.data.slice(0,n)).length-$n(r).length,Mc(t,n-i,i);var t,n,r,i}),i.each(function(e){return Ac(e.dom(),0)})),t})}(n,a,function(e,t){return n=e.schema.getTextInlineElements(),r=or(t),cr.call(n,r);var n,r}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(Fc).fold(function(){r&&Bc(e,t,l)},function(n){r&&Bc(e,t,O.some(n))})},Wc=function(e,t){return e.selection.isCollapsed()?function(e,t){var n,r,i,o,a,s;return(n=e.getBody(),r=t,i=e.selection.getRng(),o=il(r?1:-1,n,i),a=ts.fromRangeStart(o),s=tr.fromDom(n),!1===r&&cl(a)?O.some(Ec.remove(a.getNode(!0))):r&&ul(a)?O.some(Ec.remove(a.getNode())):!1===r&&ul(a)&&Tc(s,a)?Nc(s,a).map(function(e){return Ec.remove(e.getNode())}):r&&cl(a)&&kc(s,a)?_c(s,a).map(function(e){return Ec.remove(e.getNode())}):function(e,t,n){return a=n.getNode(!1===(o=t)),s=o?"after":"before",xi.isElement(a)&&a.getAttribute("data-mce-caret")===s?(r=t,i=n.getNode(!1===t),r&&xi.isContentEditableFalse(i.nextSibling)?O.some(Ec.moveToElement(i.nextSibling)):!1===r&&xi.isContentEditableFalse(i.previousSibling)?O.some(Ec.moveToElement(i.previousSibling)):O.none()).fold(function(){return Oc(e,t,n)},O.some):Oc(e,t,n).bind(function(t){return r=e,i=n,t.fold(function(e){return O.some(Ec.remove(e))},function(e){return O.some(Ec.moveToElement(e))},function(e){return Js(i,e,r)?O.none():O.some(Ec.moveToPosition(e))});var r,i});var r,i,o,a,s}(n,r,a)).map(function(n){return n.fold((a=e,s=t,function(e){return a._selectionOverrides.hideFakeCaret(),Hc(a,s,tr.fromDom(e)),!0}),(i=e,o=t,function(e){var t=o?ts.before(e):ts.after(e);return i.selection.setRng(t.toRange()),!0}),(r=e,function(e){return r.selection.setRng(e.toRange()),!0}));var r,i,o,a,s}).getOr(!1)}(e,t):function(e,t){var n,r=e.selection.getNode();return!!xi.isContentEditableFalse(r)&&(n=tr.fromDom(e.getBody()),U(Mo(n,".mce-offscreen-selection"),xo),Hc(e,t,tr.fromDom(e.selection.getNode())),Qu(e),!0)}(e,t)},zc=function(e){var t,n=function(e,t){for(;t&&t!==e;){if(xi.isContentEditableTrue(t)||xi.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return xi.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(ts.before(t).toRange())),!0},Uc=xi.isText,Yc=function(e){return Uc(e)&&e.data[0]===Jo},Vc=function(e){return Uc(e)&&e.data[e.data.length-1]===Jo},jc=function(e){return e.ownerDocument.createTextNode(Jo)},qc=function(e,t){return e?function(e){if(Uc(e.previousSibling))return Vc(e.previousSibling)||e.previousSibling.appendData(Jo),e.previousSibling;if(Uc(e))return Yc(e)||e.insertData(0,Jo),e;var t=jc(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(Uc(e.nextSibling))return Yc(e.nextSibling)||e.nextSibling.insertData(0,Jo),e.nextSibling;if(Uc(e))return Vc(e)||e.appendData(Jo),e;var t=jc(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},$c=i(qc,!0),Gc=i(qc,!1),Kc=function(e,t){return xi.isText(e.container())?qc(t,e.container()):qc(t,e.getNode())},Xc=function(e,t){var n=t.get();return n&&e.container()===n&&ra(n)},Zc=function(e,t){return t.fold(function(t){As.remove(e.get());var n=$c(t);return e.set(n),O.some(ts(n,n.length-1))},function(t){return Hl.firstPositionIn(t).map(function(t){if(Xc(t,e))return ts(e.get(),1);As.remove(e.get());var n=Kc(t,!0);return e.set(n),ts(n,1)})},function(t){return Hl.lastPositionIn(t).map(function(t){if(Xc(t,e))return ts(e.get(),e.get().length-1);As.remove(e.get());var n=Kc(t,!1);return e.set(n),ts(n,n.length-1)})},function(t){As.remove(e.get());var n=Gc(t);return e.set(n),O.some(ts(n,1))})},Jc=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return O.none()},Qc=Cc([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),ef=function(e,t){return Zs(t,e)||e},tf=function(e,t,n){var r=Zu.normalizeForwards(n),o=ef(t,r.container());return Zu.findRootInline(e,o,r).fold(function(){return Hl.nextPosition(o,r).bind(i(Zu.findRootInline,e,o)).map(function(e){return Qc.before(e)})},O.none)},nf=function(e,t){return null===ks(e,t)},rf=function(e,t,n){return Zu.findRootInline(e,t,n).filter(i(nf,t))},of=function(e,t,n){var r=Zu.normalizeBackwards(n);return rf(e,t,r).bind(function(e){return Hl.prevPosition(e,r).isNone()?O.some(Qc.start(e)):O.none()})},af=function(e,t,n){var r=Zu.normalizeForwards(n);return rf(e,t,r).bind(function(e){return Hl.nextPosition(e,r).isNone()?O.some(Qc.end(e)):O.none()})},sf=function(e,t,n){var r=Zu.normalizeBackwards(n),o=ef(t,r.container());return Zu.findRootInline(e,o,r).fold(function(){return Hl.prevPosition(o,r).bind(i(Zu.findRootInline,e,o)).map(function(e){return Qc.after(e)})},O.none)},lf=function(e){return!1===Zu.isRtl(cf(e))},uf=function(e,t,n){return Jc([tf,of,af,sf],[e,t,n]).filter(lf)},cf=function(e){return e.fold(r,r,r,r)},ff=function(e){return e.fold(n("before"),n("start"),n("end"),n("after"))},df=function(e){return e.fold(Qc.before,Qc.before,Qc.after,Qc.after)},hf=function(e,t,n,r,i,o){return Aa([Zu.findRootInline(t,n,r),Zu.findRootInline(t,n,i)],function(t,r){return t!==r&&Zu.hasSameParentBlock(n,t,r)?Qc.after(e?t:r):o}).getOr(o)},pf=function(e,t){return e.fold(n(!0),function(e){return r=t,!(ff(n=e)===ff(r)&&cf(n)===cf(r));var n,r})},mf=function(e,n){return e?n.fold(t(O.some,Qc.start),O.none,t(O.some,Qc.after),O.none):n.fold(O.none,t(O.some,Qc.before),O.none,t(O.some,Qc.end))},gf=function(e,t,n,r){var o=Zu.normalizePosition(e,r),a=uf(t,n,o);return uf(t,n,o).bind(i(mf,e)).orThunk(function(){return s=t,l=n,u=a,c=Zu.normalizePosition(o=e,r),Hl.fromPosition(o,l,c).map(i(Zu.normalizePosition,o)).fold(function(){return u.map(df)},function(e){return uf(s,l,e).map(i(hf,o,s,l,c,e)).filter(i(pf,u))}).filter(lf);var o,s,l,u,c})},vf=uf,yf=gf,bf=(i(gf,!1),i(gf,!0),df),wf=function(e){return e.fold(Qc.start,Qc.start,Qc.end,Qc.end)},Cf=function(e,t,n){var r=e?1:-1;return t.setRng(ts(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},xf=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Sf=function(e){return!1!==e.settings.inline_boundaries},kf=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Tf=function(e,t,n){return Zc(t,n).map(function(t){return xf(e,t),n})},Nf=function(e,t,n){return function(){return!!Sf(t)&&function(e,t){var n=t.selection.getRng(),r=e?ts.fromRangeEnd(n):ts.fromRangeStart(n);return!!I(t.selection.getSel().modify)&&(e&&aa(r)?Cf(!0,t.selection,r):!(e||!sa(r))&&Cf(!1,t.selection,r))}(e,t)}},_f={move:function(e,t,n){return function(){return!!Sf(e)&&(r=e,o=t,a=n,s=r.getBody(),l=ts.fromRangeStart(r.selection.getRng()),u=i(Zu.isInlineTarget,r),yf(a,u,s,l).bind(function(e){return Tf(r,o,e)})).isSome();var r,o,a,s,l,u}},moveNextWord:i(Nf,!0),movePrevWord:i(Nf,!1),setupSelectedState:function(e){var t=To(null),n=i(Zu.isInlineTarget,e);return e.on("NodeChange",function(r){var o,a,s,l;Sf(e)&&(o=n,a=r.parents,s=V(e.dom.select('*[data-mce-selected="inline-boundary"]'),o),l=V(a,o),U(Q(s,l),i(kf,!1)),U(Q(l,s),i(kf,!0)),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=ts.fromRangeStart(e.selection.getRng());ts.isTextPosition(n)&&!1===Zu.isAtZwsp(n)&&(xf(e,As.removeAndReposition(t.get(),n)),t.set(null))}}(e,t),function(e,t,n,r){if(t.selection.isCollapsed()){var i=V(r,e);U(i,function(r){var i=ts.fromRangeStart(t.selection.getRng());vf(e,t.getBody(),i).bind(function(e){return Tf(t,n,e)})})}}(n,e,t,r.parents))}),t},setCaretPosition:xf},Ef=function(e,t){return function(n){return Zc(t,n).map(function(t){return _f.setCaretPosition(e,t),!0}).getOr(!1)}},Df=function(e,t,n,r){var o=e.getBody(),a=i(Zu.isInlineTarget,e);e.undoManager.ignore(function(){var i,s,l;e.selection.setRng((i=n,s=r,(l=document.createRange()).setStart(i.container(),i.offset()),l.setEnd(s.container(),s.offset()),l)),e.execCommand("Delete"),vf(a,o,ts.fromRangeStart(e.selection.getRng())).map(wf).map(Ef(e,t))}),e.nodeChanged()},Of=function(e,t,r){return!(!e.selection.isCollapsed()||!1===e.settings.inline_boundaries)&&function(e,t,r,o){var a,s,l=(a=e.getBody(),s=o.container(),Zs(s,a)||a),u=i(Zu.isInlineTarget,e),c=vf(u,l,o);return c.bind(function(e){return r?e.fold(n(O.some(wf(e))),O.none,n(O.some(bf(e))),O.none):e.fold(O.none,n(O.some(bf(e))),O.none,n(O.some(wf(e))))}).map(Ef(e,t)).getOrThunk(function(){var n=Hl.navigate(r,l,o),i=n.bind(function(e){return vf(u,l,e)});return c.isSome()&&i.isSome()?Zu.findRootInline(u,l,o).map(function(t){return!!Aa([Hl.firstPositionIn(n=t),Hl.lastPositionIn(n)],function(e,t){var r=Zu.normalizePosition(!0,e),i=Zu.normalizePosition(!1,t);return Hl.nextPosition(n,r).map(function(e){return e.isEqual(i)}).getOr(!0)}).getOr(!0)&&(Hc(e,r,tr.fromDom(t)),!0);var n}).getOr(!1):i.bind(function(i){return n.map(function(n){return r?Df(e,t,o,n):Df(e,t,n,o),!0})}).getOr(!1)})}(e,t,r,ts.fromRangeStart(e.selection.getRng()))},Mf=Cr("start","end"),Af=Cr("rng","table","cells"),Lf=Cc([{removeTable:["element"]},{emptyCells:["cells"]}]),Rf=function(e,t){return Fo(tr.fromDom(e),"td,th",t)},Pf=function(e,t){return Bo(e,"table",t)},Bf=function(e){return!1===_r(e.start(),e.end())},If=function(e,t){return Pf(e.start(),t).bind(function(n){return Pf(e.end(),t).bind(function(e){return _r(n,e)?O.some(n):O.none()})})},Ff=function(e){return Mo(e,"td,th")},Hf=function(e,t){return If(t,e).isSome()},Wf=function(e,t){return $(e,function(e){return _r(e,t)})},zf=function(e){return(t=e,Aa([Wf(t.cells(),t.rng().start()),Wf(t.cells(),t.rng().end())],function(e,n){return t.cells().slice(e,n+1)})).map(function(t){var n=e.cells();return t.length===n.length?Lf.removeTable(e.table()):Lf.emptyCells(t)});var t},Uf=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Yf=Uf,Vf=function(e,t){var n=Mo(t,"td[data-mce-selected],th[data-mce-selected]"),r=function(e){return V(function(e){return X(e,function(e){var t=Ea(e);return t?[tr.fromDom(t)]:[]})}(e),ci)}(e);return 0<n.length?n:r},jf=Vf,qf=function(e){return Vf(Yf(e.selection.getSel()),tr.fromDom(e.getBody()))},$f=function(e,t){return U(t,Mu),e.selection.setCursorLocation(t[0].dom(),0),!0},Gf=function(e,t){return Hc(e,!1,t),!0},Kf=function(e,t){return q(cc(t,e),ci)},Xf=function(e,t){return q(cc(t,e),function(e){return"caption"===or(e)})},Zf=function(e,t){return Mu(t),e.selection.setCursorLocation(t.dom(),0),O.some(!0)},Jf=function(e,t){var n,r,o,a,s,l=tr.fromDom(e.selection.getStart(!0)),u=qf(e);return e.selection.isCollapsed()&&0===u.length?function(e,t,n){var r=tr.fromDom(e.getBody());return Xf(r,n).fold(function(){return function(e,t,n,r){var i=ts.fromRangeStart(e.selection.getRng());return Kf(n,r).bind(function(r){return ic(r)?Zf(e,r):(o=n,a=r,s=i,Hl.navigate(t,e.getBody(),s).bind(function(e){return Kf(o,tr.fromDom(e.getNode())).map(function(e){return!1===_r(e,a)})}));var o,a,s})}(e,t,r,n)},function(n){return o=t,a=r,s=n,l=ts.fromRangeStart((i=e).selection.getRng()),ic(s)?Zf(i,s):function(e,t,n,r,i){return Hl.navigate(n,e.getBody(),i).bind(function(o){return l=n,u=i,c=o,Hl.firstPositionIn((s=r).dom()).bind(function(e){return Hl.lastPositionIn(s.dom()).map(function(t){return l?u.isEqual(e)&&c.isEqual(t):u.isEqual(t)&&c.isEqual(e)})}).getOr(!0)?Zf(e,r):(a=r,Xf(t,tr.fromDom(o.getNode())).map(function(e){return!1===_r(e,a)}));var a,s,l,u,c}).or(O.some(!0))}(i,a,o,s,l);var i,o,a,s,l}).getOr(!1)}(e,t,l):(r=l,o=tr.fromDom((n=e).getBody()),a=n.selection.getRng(),0!==(s=qf(n)).length?$f(n,s):function(e,t,n,r){return Xf(t,r).fold(function(){return r=e,function(e,t){return function(e,t){var n,r,o,a,s=i(_r,e);return(n=t,r=s,o=Rf(n.startContainer,r),a=Rf(n.endContainer,r),Aa([o,a],Mf).filter(Bf).filter(function(e){return Hf(r,e)}).orThunk(function(){return function(e,t){var n=Rf(t.startContainer,e),r=Rf(t.endContainer,e);return t.collapsed?O.none():Aa([n,r],Mf).fold(function(){return n.fold(function(){return r.bind(function(t){return Pf(t,e).bind(function(e){return ee(Ff(e)).map(function(e){return Mf(e,t)})})})},function(t){return Pf(t,e).bind(function(e){return te(Ff(e)).map(function(e){return Mf(t,e)})})})},function(t){return Hf(e,t)?O.none():(r=e,Pf((n=t).start(),r).bind(function(e){return te(Ff(e)).map(function(e){return Mf(n.start(),e)})}));var n,r})}(r,n)})).bind(function(e){return If(t=e,s).map(function(e){return Af(t,e,Ff(e))});var t})}(e,n).bind(zf)}(t).map(function(e){return e.fold(i(Gf,r),i($f,r))});var r},function(t){return Zf(e,t)}).getOr(!1)}(n,o,a,r))},Qf=function(e,t){e.getDoc().execCommand(t,!1,null)},ed=function(e){Wc(e,!1)||Of(e,!1)||yc(e,!1)||Jf(e)||wc(e)||(Qf(e,"Delete"),Qu(e))},td=function(e){Wc(e,!0)||Of(e,!0)||yc(e,!0)||Jf(e)||wc(e)||Qf(e,"ForwardDelete")},nd=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}return r},rd=function(e){return e.getParam("content_security_policy","")},id=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},od=function(e){return e.getParam("forced_root_block_attrs",{})},ad=function(e){return e.getParam("images_dataimg_filter",n(!0),"function")},sd=function(e){return e.getParam("automatic_uploads",!0,"boolean")},ld=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},ud=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},cd=function(e){return e.getParam("images_upload_url","","string")},fd=function(e){return e.getParam("images_upload_base_path","","string")},dd=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},hd=function(e){return e.getParam("images_upload_handler",null,"function")},pd=function(e){return function(t,n){return O.from(n).map(tr.fromDom).filter(sr).bind(function(n){return function(e,t,n){var r=function(t){return n=e,r=t.dom(),i=wr(r,n),O.from(i).filter(function(e){return 0<e.length});var n,r,i};return Po(tr.fromDom(n),function(e){return r(e).isSome()},function(e){return _r(tr.fromDom(t),e)}).bind(r)}(e,t,n.dom()).or((r=e,i=n.dom(),O.from(ao.DOM.getStyle(i,r,!0))));var r,i}).getOr("")}},md={getFontSize:pd("font-size"),getFontFamily:t(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},pd("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,r=Math.pow(10,t||0),Math.round(n*r)/r+"pt"):e;var n,r}},gd=function(e){return Hl.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return xi.isText(t)?t.parentNode:t})},vd=function(e){return O.from(e.selection.getRng()).bind(function(t){var n,r=e.getBody();return(n=t).startContainer===r&&0===n.startOffset?O.none():O.from(e.selection.getStart(!0))})},yd=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(1<=n&&n<=7){var r=function(e){return Gt.explode(e.getParam("font_size_style_values",""))}(e),i=function(e){return Gt.explode(e.getParam("font_size_classes",""))}(e);return i?i[n-1]||t:r[n-1]||t}return t}return t},bd=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},wd=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},Cd=function(e,t,n){return wd(e,t,function(e){return e.nodeName===n})},xd=function(e){return e&&"TABLE"===e.nodeName},Sd=function(e,t,n){for(var r=new Xr(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(xi.isBr(t))return!0},kd=function(e,t,n,r,i){var o,a,s,l,u,c,f=e.getRoot(),d=e.schema.getNonEmptyElements();if(s=e.getParent(i.parentNode,e.isBlock)||f,r&&xi.isBr(i)&&t&&e.isEmpty(s))return O.some(Ja(i.parentNode,e.nodeIndex(i)));for(o=new Xr(i,s);l=o[r?"prev":"next"]();){if("false"===e.getContentEditableParent(l)||(c=f,ia(u=l)&&!1===wd(u,c,Ss)))return O.none();if(xi.isText(l)&&0<l.nodeValue.length)return!1===Cd(l,f,"A")?O.some(Ja(l,r?l.nodeValue.length:0)):O.none();if(e.isBlock(l)||d[l.nodeName.toLowerCase()])return O.none();a=l}return n&&a?O.some(Ja(a,0)):O.none()},Td=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h=e.getRoot(),p=!1;if(i=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"],c=xi.isElement(i)&&o===i.childNodes.length,l=e.schema.getNonEmptyElements(),u=n,ia(i))return O.none();if(xi.isElement(i)&&o>i.childNodes.length-1&&(u=!1),xi.isDocument(i)&&(i=h,o=0),i===h){if(u&&(s=i.childNodes[0<o?o-1:0])){if(ia(s))return O.none();if(l[s.nodeName]||xd(s))return O.none()}if(i.hasChildNodes()){if(o=Math.min(!u&&0<o?o-1:o,i.childNodes.length-1),o=xi.isText(i=i.childNodes[o])&&c?i.data.length:0,!t&&i===h.lastChild&&xd(i))return O.none();if(function(e,t){for(;t&&t!==e;){if(xi.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(h,i)||ia(i))return O.none();if(i.hasChildNodes()&&!1===xd(i)){a=new Xr(s=i,h);do{if(xi.isContentEditableFalse(s)||ia(s)){p=!1;break}if(xi.isText(s)&&0<s.nodeValue.length){o=u?0:s.nodeValue.length,i=s,p=!0;break}if(l[s.nodeName.toLowerCase()]&&(!(f=s)||!/^(TD|TH|CAPTION)$/.test(f.nodeName))){o=e.nodeIndex(s),i=s.parentNode,u||o++,p=!0;break}}while(s=u?a.next():a.prev())}}}return t&&(xi.isText(i)&&0===o&&kd(e,c,t,!0,i).each(function(e){i=e.container(),o=e.offset(),p=!0}),xi.isElement(i)&&((s=i.childNodes[o])||(s=i.childNodes[o-1]),!s||!xi.isBr(s)||(d=s).previousSibling&&"A"===d.previousSibling.nodeName||Sd(e,s,!1)||Sd(e,s,!0)||kd(e,c,t,!0,s).each(function(e){i=e.container(),o=e.offset(),p=!0}))),u&&!t&&xi.isText(i)&&o===i.nodeValue.length&&kd(e,c,t,!1,i).each(function(e){i=e.container(),o=e.offset(),p=!0}),p?O.some(Ja(i,o)):O.none()},Nd=function(e,t){var n=t.collapsed,r=t.cloneRange(),i=Ja.fromRangeStart(t);return Td(e,n,!0,r).each(function(e){n&&Ja.isAbove(i,e)||r.setStart(e.container(),e.offset())}),n||Td(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),bd(t,r)?O.none():O.some(r)},_d=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},Ed=function(e,t,n,r){var i=e.createRng();r?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),t.setRng(i)},Dd=function(e,t){var n=tr.fromTag("br");go(tr.fromDom(t),n),e.undoManager.add()},Od=function(e,t){Md(e.getBody(),t)||vo(tr.fromDom(t),tr.fromTag("br"));var n=tr.fromTag("br");vo(tr.fromDom(t),n),_d(e.dom,e.selection,n.dom()),Ed(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Md=function(e,t){return n=ts.after(t),!!xi.isBr(n.getNode())||Hl.nextPosition(e,ts.after(t)).map(function(e){return xi.isBr(e.getNode())}).getOr(!1);var n},Ad=function(e){return e&&"A"===e.nodeName&&"href"in e},Ld=function(e){return e.fold(n(!1),Ad,Ad,n(!1))},Rd=function(t,n){n.fold(e,i(Dd,t),i(Od,t),e)},Pd=function(e,t){var n,r,o,a=(r=i(Zu.isInlineTarget,n=e),o=ts.fromRangeStart(n.selection.getRng()),vf(r,n.getBody(),o).filter(Ld));a.isSome()?a.each(i(Rd,e)):function(e,t){var n,r,i=e.selection,o=e.dom,a=i.getRng();Nd(o,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,l=a.startContainer;if(1===l.nodeType&&l.hasChildNodes()){var u=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=u&&3===l.nodeType?l.nodeValue.length:0}var c=o.getParent(l,o.isBlock),f=c?o.getParent(c.parentNode,o.isBlock):null;"LI"!==(f?f.nodeName.toUpperCase():"")||t&&t.ctrlKey||(c=f),l&&3===l.nodeType&&s>=l.nodeValue.length&&(function(e,t,n){for(var r,i=new Xr(l,c),o=e.getNonEmptyElements();r=i.next();)if(o[r.nodeName.toLowerCase()]||0<r.length)return!0}(e.schema)||(n=o.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=o.create("br"),a.insertNode(n),_d(o,i,n),Ed(o,i,n,r),e.undoManager.add()}(e,t)},Bd=(Cc([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Cc([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Cr("start","soffset","finish","foffset")),Id=Qn.detect().browser,Fd=function(e,t){var n=lr(t)?Su(t).length:Pr(t).length+1;return n<e?n:e<0?0:e},Hd=function(e){return Bd(e.start(),Fd(e.soffset(),e.start()),e.finish(),Fd(e.foffset(),e.finish()))},Wd=function(e,t){return Er(e,t)||_r(e,t)},zd=function(e){return function(t){return Wd(e,t.start())&&Wd(e,t.finish())}},Ud=function(e){return Bd(tr.fromDom(e.startContainer),e.startOffset,tr.fromDom(e.endContainer),e.endOffset)},Yd=function(e,t){return O.from(t).filter(zd(e)).map(Hd)},Vd=function(e){var t=document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),O.some(t)}catch(e){return O.none()}},jd=function(e){return(e.bookmark?e.bookmark:O.none()).bind(i(Yd,tr.fromDom(e.getBody()))).bind(Vd)},qd=function(e){var t=function(e){return!0===e.inline||Id.isIE()}(e)?function(e){var t;return function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?O.from(t.getRangeAt(0)):O.none()).map(Ud)}((t=e.dom().ownerDocument.defaultView,tr.fromDom(t)).dom()).filter(zd(e))}(tr.fromDom(e.getBody())):O.none();e.bookmark=t.isSome()?t:e.bookmark},$d=function(e){jd(e).each(function(t){e.selection.setRng(t)})},Gd=jd,Kd=function(e){return ai(e)||si(e)},Xd=function(e,t){var n=e.settings,r=e.dom,i=e.selection,o=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),l=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||n.forced_root_block||r.getParent(i.getNode(),r.isBlock)||o.apply("div"),U(function(e){return V(z(e.selection.getSelectedBlocks(),tr.fromDom),function(e){return!Kd(e)&&!Or(e).map(Kd).getOr(!1)})}(e),function(e){!function(e,t,n,r,i,o){if("false"!==e.getContentEditable(o)){var a=n?"margin":"padding";if(a="TABLE"===o.nodeName?"margin":a,a+="rtl"===e.getStyle(o,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(o.style[a]||0,10)-r);e.setStyle(o,a,s?s+i:"")}else s=parseInt(o.style[a]||0,10)+r+i,e.setStyle(o,a,s)}}(r,t,l,s,a,e.dom())})},Zd=Gt.each,Jd=Gt.extend,Qd=Gt.map,eh=Gt.inArray;function th(e){var t,n,r,i,o={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",function(){t=e.dom,n=e.selection,a=e.settings,r=e.formatter});var s=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(e){}return!1}},l=function(e,t){t=t||"exec",Zd(e,function(e,n){Zd(n.toLowerCase().split(","),function(n){o[t][n]=e})})},u=function(t,n,r){t=t.toLowerCase(),o.value[t]=function(){return n.call(r||e)}};Jd(this,{execCommand:function(t,n,r,i){var a,s,l=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||i&&i.skip_focus?$d(e):e.focus(),(i=e.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=o.exec[s])return a(s,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(Zd(e.plugins,function(i){if(i.execCommand&&i.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!(l=!0)}),l)return l;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{l=e.getDoc().execCommand(t,n,r)}catch(e){}return!!l&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:s,queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(e){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),o.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(e){}return!1},addCommands:l,addCommand:function(t,n,r){t=t.toLowerCase(),o.exec[t]=function(t,i,o,a){return n.call(r||e,i,o,a)}},addQueryStateHandler:function(t,n,r){t=t.toLowerCase(),o.state[t]=function(){return n.call(r||e)}},addQueryValueHandler:u,hasCustomCommand:function(e){return e=e.toLowerCase(),!!o.exec[e]}});var c=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},f=function(e){return r.match(e)},d=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},h=function(e){i=n.getBookmark(e)},p=function(){n.moveToBookmark(i)};l({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{c(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");fe.mac&&(i=i.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),Zd("left,center,right,justify".split(","),function(e){t!==e&&r.remove("align"+e)}),"none"!==t&&d("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,i;c(e),(r=t.getParent(n.getNode(),"ol,ul"))&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((i=r.parentNode).nodeName)&&(h(),t.split(i,r),p())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){d(e)},"ForeColor,HiliteColor":function(e,t,n){d(e,n)},FontName:function(t,n,r){var i;(i=e).formatter.toggle("fontname",{value:yd(i,r)}),i.nodeChanged()},FontSize:function(t,n,r){var i;(i=e).formatter.toggle("fontsize",{value:yd(i,r)}),i.nodeChanged()},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){d("blockquote")},FormatBlock:function(e,t,n){return d(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,r,i){var o=i||n.getNode();o!==e.getBody()&&(h(),e.dom.remove(o,!0),p())},mceSelectNodeDepth:function(r,i,o){var a=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&a++===o)return n.select(e),!1},e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){Hu(e,r)},mceInsertRawHTML:function(t,r,i){n.setContent("tiny_mce_marker");var o=e.getContent();e.setContent(o.replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(e,t,n){d(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){Xd(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,i){e.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,i,o){var a;"string"==typeof o&&(o={href:o}),a=t.getParent(n.getNode(),"a"),o.href=o.href.replace(" ","%20"),a&&o.href||r.remove("link"),o.href&&r.apply("link",o,a)},selectAll:function(){var e=t.getParent(n.getStart(),xi.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},delete:function(){ed(e)},forwardDelete:function(){td(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return Pd(e,r),!0}});var m=function(e){return function(){var i=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),o=Qd(i,function(t){return!!r.matchNode(t,e)});return-1!==eh(o,!0)}};l({JustifyLeft:m("alignleft"),JustifyCenter:m("aligncenter"),JustifyRight:m("alignright"),JustifyFull:m("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return f(e)},mceBlockQuote:function(){return f("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return s("InsertUnorderedList")||s("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),l({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),u("FontName",function(){return vd(t=e).fold(function(){return gd(t).map(function(e){return md.getFontFamily(t.getBody(),e)}).getOr("")},function(e){return md.getFontFamily(t.getBody(),e)});var t},this),u("FontSize",function(){return vd(t=e).fold(function(){return gd(t).map(function(e){return md.getFontSize(t.getBody(),e)}).getOr("")},function(e){return md.getFontSize(t.getBody(),e)});var t},this)}var nh=Gt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),rh=function(e){var t,n,r=this,i={},o=function(){return!1},a=function(){return!0};t=(e=e||{}).scope||r,n=e.toggleEvent||o;var s=function(e,t,a,s){var l,u,c;if(!1===t&&(t=o),t)for(t={func:t},s&&Gt.extend(t,s),c=(u=e.toLowerCase().split(" ")).length;c--;)(l=i[e=u[c]])||(l=i[e]=[],n(e,!0)),a?l.unshift(t):l.push(t);return r},l=function(e,t){var o,a,s,l,u;if(e)for(o=(l=e.toLowerCase().split(" ")).length;o--;){if(a=i[e=l[o]],!e){for(s in i)n(s,!1),delete i[s];return r}if(a){if(t)for(u=a.length;u--;)a[u].func===t&&(a=a.slice(0,u).concat(a.slice(u+1)),i[e]=a);else a.length=0;a.length||(n(e,!1),delete i[e])}}else{for(e in i)n(e,!1);i={}}return r};r.fire=function(n,r){var s,u,c,f;if(n=n.toLowerCase(),(r=r||{}).type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=a},r.stopPropagation=function(){r.isPropagationStopped=a},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=a},r.isDefaultPrevented=o,r.isPropagationStopped=o,r.isImmediatePropagationStopped=o),e.beforeFire&&e.beforeFire(r),s=i[n])for(u=0,c=s.length;u<c;u++){if((f=s[u]).once&&l(n,f.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===f.func.call(t,r))return r.preventDefault(),r}return r},r.on=s,r.off=l,r.once=function(e,t,n){return s(e,t,n,{once:!0})},r.has=function(e){return e=e.toLowerCase(),!(!i[e]||0===i[e].length)}};rh.isNative=function(e){return!!nh[e.toLowerCase()]};var ih,oh=function(e){return e._eventDispatcher||(e._eventDispatcher=new rh({scope:e,toggleEvent:function(t,n){rh.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},ah={fire:function(e,t,n){if(this.removed&&"remove"!==e)return t;if(t=oh(this).fire(e,t,n),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},on:function(e,t,n){return oh(this).on(e,t,n)},off:function(e,t){return oh(this).off(e,t)},once:function(e,t){return oh(this).once(e,t)},hasEventListeners:function(e){return oh(this).has(e)}},sh=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},lh=function(e,t){(function(e,t,n){var r,i;Do(e,t)&&!1===n?(i=t,_o(r=e)?r.dom().classList.remove(i):function(e,t){return i=t,0<(o=V(No(n=e,r="class"),function(e){return e!==i})).length?pr(n,r,o.join(" ")):vr(n,r),!1;var n,r,i,o}(r,i),function(e){0===(_o(e)?e.dom().classList:No(e,"class")).length&&vr(e,"class")}(r)):n&&Eo(e,t)})(tr.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",sh(e,"StyleWithCSS",!1),sh(e,"enableInlineTableEditing",!1),sh(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},uh=ao.DOM,ch=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=uh.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},fh=function(e,t,n){var r;(r=e).hidden||r.readonly?!0===e.readonly&&n.preventDefault():e.fire(t,n)},dh=function(e,t){var n,r;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=ch(e,t),e.settings.event_root){if(ih||(ih={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&ih){for(t in ih)e.dom.unbind(ch(e,t));ih=null}})),ih[t])return;ih[t]=r=function(n){for(var r=n.target,i=e.editorManager.get(),o=i.length;o--;){var a=i[o].getBody();(a===r||uh.isChildOf(r,a))&&fh(i[o],t,n)}},uh.bind(n,t,r)}else uh.bind(n,t,r=function(n){fh(e,t,n)}),e.delegates[t]=r},hh={bindPendingEventDelegates:function(){var e=this;Gt.each(e._pendingNativeEvents,function(t){dh(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?dh(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(ch(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(ch(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}},ph=hh=Gt.extend({},ah,hh),mh=Gt.each,gh=Gt.explode,vh={f9:120,f10:121,f11:122},yh=Gt.makeMap("alt,ctrl,shift,meta,access");function bh(e){var t={},n=[],r=function(e){var t,n,r={};for(n in mh(gh(e,"+"),function(e){e in yh?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=vh[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode],yh)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,fe.mac?r.ctrl=!0:r.shift=!0),r.meta&&(fe.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},i=function(t,n,i,o){var a;return(a=Gt.map(gh(t,">"),r))[a.length-1]=Gt.extend(a[a.length-1],{func:i,scope:o||e}),Gt.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},o=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},a=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){var r,i;((i=e).altKey||i.ctrlKey||i.metaKey||"keydown"===(r=e).type&&112<=r.keyCode&&r.keyCode<=123)&&!e.isDefaultPrevented()&&(mh(t,function(t){if(o(e,t))return n=t.subpatterns.slice(0),"keydown"===e.type&&a(t),!0}),o(e,n[0])&&(1===n.length&&"keydown"===e.type&&a(n[0]),n.shift()))}),this.add=function(n,r,o,a){var s;return"string"==typeof(s=o)?o=function(){e.execCommand(s,!1,null)}:Gt.isArray(s)&&(o=function(){e.execCommand(s[0],s[1],s[2])}),mh(gh(Gt.trim(n.toLowerCase())),function(e){var n=i(e,r,o,a);t[n.id]=n}),!0},this.remove=function(e){var n=i(e);return!!t[n.id]&&(delete t[n.id],!0)}}var wh=function(e){var t=Dr(e).dom();return e.dom()===t.activeElement},Ch=function(e,t){(function(e,t){return(n=t,n.collapsed?O.from(Da(n.startContainer,n.startOffset)).map(tr.fromDom):O.none()).bind(function(t){return ui(t)?O.some(t):!1===Er(e,t)?O.some(e):O.none()});var n})(tr.fromDom(e.getBody()),t).bind(function(e){return Hl.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},xh=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Sh=function(e){return e.inline?function(e){var t,n=e.getBody();return n&&(t=tr.fromDom(n),wh(t)||function(e){return(t=Dr(e),n=void 0!==t?t.dom():document,O.from(n.activeElement).map(tr.fromDom)).filter(function(t){return e.dom().contains(t.dom())});var t,n}(t).isSome())}(e):(t=e).iframeElement&&wh(tr.fromDom(t.iframeElement));var t},kh=function(e){return e.editorManager.setActive(e)},Th=Sh,Nh=function(e,t){return t.dom()[e]},_h=function(e,t){return parseInt(br(t,e),10)},Eh=i(Nh,"clientWidth"),Dh=i(Nh,"clientHeight"),Oh=i(_h,"margin-top"),Mh=i(_h,"margin-left"),Ah=function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h=tr.fromDom(e.getBody()),p=e.inline?h:tr.fromDom(h.dom().ownerDocument.documentElement),m=(r=e.inline,o=t,a=n,s=(i=p).dom().getBoundingClientRect(),{x:o-(r?s.left+i.dom().clientLeft+Mh(i):0),y:a-(r?s.top+i.dom().clientTop+Oh(i):0)});return u=m.x,c=m.y,f=Eh(l=p),d=Dh(l),0<=u&&0<=c&&u<=f&&c<=d},Lh=function(e){var t;return(t=e.inline?e.getBody():e.getContentAreaContainer(),O.from(t).map(tr.fromDom)).map(function(e){return Er(Dr(e),e)}).getOr(!1)};function Rh(e){var t,n=[],r=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},i=function(){0<n.length&&r().reposition(n)},o=function(e){$(n,function(t){return t===e}).each(function(e){n.splice(e,1)})},a=function(t){if(!e.removed&&Lh(e))return q(n,function(e){return!((n=r().getArgs(e)).type!==(i=t).type||n.text!==i.text||n.progressBar||n.timeout||i.progressBar||i.timeout);var n,i}).getOrThunk(function(){e.editorManager.setActive(e);var a=r().open(t,function(){o(a),i()});return n.push(a),i(),a})};return(t=e).on("SkinLoaded",function(){var e=t.settings.service_message;e&&a({text:e,type:"warning",timeout:0,icon:""})}),t.on("ResizeEditor ResizeWindow",function(){ge.requestAnimationFrame(i)}),t.on("remove",function(){U(n.slice(),function(e){r().close(e)})}),{open:a,close:function(){O.from(n[0]).each(function(e){r().close(e),o(e),i()})},getNotifications:function(){return n}}}function Ph(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:t,confirm:t,close:t,getParams:t,setParams:t}},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},i=function(n){t.push(n),e.fire("OpenWindow",{win:n})},o=function(n){$(t,function(e){return e===n}).each(function(r){t.splice(r,1),e.fire("CloseWindow",{win:n}),0===t.length&&e.focus()})},a=function(){return O.from(t[t.length-1])};return e.on("remove",function(){U(t.slice(0),function(e){n().close(e)})}),{windows:t,open:function(t,r){e.editorManager.setActive(e),qd(e);var a=n().open(t,r,o);return i(a),a},alert:function(e,t,a){var s=n().alert(e,r(a||this,t),o);i(s)},confirm:function(e,t,a){var s=n().confirm(e,r(a||this,t),o);i(s)},close:function(){a().each(function(e){n().close(e),o(e)})},getParams:function(){return a().map(n().getParams).getOr(null)},setParams:function(e){a().each(function(t){n().setParams(t,e)})},getWindows:function(){return t}}}var Bh=mo.PluginManager,Ih=function(e,t){e.notificationManager.open({type:"error",text:t})},Fh=function(e,t){e._skinLoaded?Ih(e,t):e.on("SkinLoaded",function(){Ih(e,t)})},Hh=function(e,t){Fh(e,"Failed to upload image: "+t)},Wh=Fh,zh=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,arguments):r.log.apply(r,arguments))},Uh=mo.PluginManager,Yh=mo.ThemeManager;function Vh(){return new(ie.getOrDie("XMLHttpRequest"))}var jh=function(e){var t,n,r=decodeURIComponent(e).split(",");return(n=/data:([^;]+)/.exec(r[0]))&&(t=n[1]),{type:t,data:r[1]}},qh=function(e){return 0===e.indexOf("blob:")?(n=e,new de(function(e,t){var r=function(){t("Cannot convert "+n+" to Blob. Resource might not exist or is inaccessible.")};try{var i=Vh();i.open("GET",n,!0),i.responseType="blob",i.onload=function(){200===this.status?e(this.response):r()},i.onerror=r,i.send()}catch(e){r()}})):0===e.indexOf("data:")?(t=e,new de(function(e){var n,r,i,o,a=jh(t);try{n=function(e){return ie.getOrDie("atob")(e)}(a.data)}catch(t){return void e(new Blob([]))}for(o=n.length,r=new(ie.getOrDie("Uint8Array"))(o),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);e(new Blob([r],{type:a.type}))})):null;var t,n},$h=jh,Gh=0,Kh=function(e){return(e||"blobid")+Gh++},Xh=function(e,t,n,r){var i,o;0!==t.src.indexOf("blob:")?(i=$h(t.src).data,(o=e.findFirst(function(e){return e.base64()===i}))?n({image:t,blobInfo:o}):qh(t.src).then(function(r){o=e.create(Kh(),r,i),e.add(o),n({image:t,blobInfo:o})},function(e){r(e)})):(o=e.getByUri(t.src))?n({image:t,blobInfo:o}):qh(t.src).then(function(r){(function(e){return new de(function(t){var n=new(ie.getOrDie("FileReader"));n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})})(r).then(function(a){i=$h(a).data,o=e.create(Kh(),r,i),e.add(o),n({image:t,blobInfo:o})})},function(e){r(e)})},Zh=function(e){return e?ne(e.getElementsByTagName("img")):[]},Jh=0,Qh={uuid:function(e){return e+Jh+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t}};var ep,tp,np=function(e,t){return e.hasOwnProperty(t.nodeName)},rp=function(e,t){if(xi.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||np(e,t.nextSibling)))return!0}return!1},ip=function(e){var t,n,r,i,o,a,s,l,u,c,f,d=e.settings,h=e.dom,p=e.selection,m=e.schema,g=m.getBlockElements(),v=p.getStart(),y=e.getBody();if(f=d.forced_root_block,v&&xi.isElement(v)&&f&&(c=y.nodeName.toLowerCase(),m.isValidChild(c,f.toLowerCase())&&!function(e,t,n){return r=uc(tr.fromDom(v),tr.fromDom(t)),$(r,function(t){return np(e,t.dom())}).isSome();var r}(g,y))){for(n=(t=p.getRng()).startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,u=Th(e),v=y.firstChild;v;)if(b=g,xi.isText(w=v)||xi.isElement(w)&&!np(b,w)&&!Gl(w)){if(rp(g,v)){v=(s=v).nextSibling,h.remove(s);continue}a||(a=h.create(f,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),l=!0),v=(s=v).nextSibling,a.appendChild(s)}else a=null,v=v.nextSibling;var b,w;l&&u&&(t.setStart(n,r),t.setEnd(i,o),p.setRng(t),e.nodeChanged())}},op=function(e){e.settings.forced_root_block&&e.on("NodeChange",i(ip,e))},ap=function(e){return Ir(e).fold(n([e]),function(t){return[e].concat(ap(t))})},sp=function(e){return Fr(e).fold(n([e]),function(t){return"br"===or(t)?Mr(t).map(function(t){return[e].concat(sp(t))}).getOr([]):[e].concat(sp(t))})},lp=function(e,t,n,r){var i=n,o=new Xr(n,i),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Gt.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(fe.ie&&fe.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?o.next():o.prev());"BODY"===i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},up=function(e){var t=e.selection.getSel();return t&&0<t.rangeCount},cp=function(e){var t,n,r,i;return i=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,{top:i.top+(r=t.defaultView).pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}},fp=xi.isContentEditableFalse,dp=xi.isContentEditableTrue,hp=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},pp=function(e){e.dragging=!1,e.element=null,hp(e.ghost)},mp=function(e){return j(e,function(e,t){return e.concat(function(e){var t=function(t){return z(t,function(t){return(t=Sa(t)).node=e,t})};if(xi.isElement(e))return t(e.getClientRects());if(xi.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}}(t))},[])};(tp=ep||(ep={}))[tp.Up=-1]="Up",tp[tp.Down=1]="Down";var gp=function(e,t,n,r,i,o){var a,s,l=0,u=[],c=function(r){var o,a,c;for(c=mp([r]),-1===e&&(c=c.reverse()),o=0;o<c.length;o++)if(!n(a=c[o],s)){if(0<u.length&&t(a,Yt.last(u))&&l++,a.line=l,i(a))return!0;u.push(a)}};return(s=Yt.last(o.getClientRects()))&&(c(a=o.getNode()),function(e,t,n,r){for(;r=Xs(r,e,Ca,t);)if(n(r))return}(e,r,c,a)),u},vp=i(gp,ep.Up,Na,_a),yp=i(gp,ep.Down,_a,Na),bp=function(e){return function(t){return t.line>e}},wp=function(e){return function(t){return t.line===e}},Cp=xi.isContentEditableFalse,xp=Xs,Sp=function(e,t){return Math.abs(e.left-t)},kp=function(e,t){return Math.abs(e.right-t)},Tp=function(e,t){return e>=t.left&&e<=t.right},Np=function(e,t){return Yt.reduce(e,function(e,n){var r,i;return r=Math.min(Sp(e,t),kp(e,t)),i=Math.min(Sp(n,t),kp(n,t)),Tp(t,n)?n:Tp(t,e)?e:i===r&&Cp(n.node)?n:i<r?n:e})},_p=function(e,t,n,r){for(;r=xp(r,e,Ca,t);)if(n(r))return},Ep=function(e,t,n){return!n.collapsed&&j(n.getClientRects(),function(n,r){return n||(a=t,(o=e)>=(i=r).left&&o<=i.right&&a>=i.top&&a<=i.bottom);var i,o,a},!1)},Dp=xi.isContentEditableTrue,Op=xi.isContentEditableFalse,Mp=function(e,t,n,r,i){return t._selectionOverrides.showCaret(e,n,r,i)},Ap=function(e,t){var n,r;return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:((r=(n=t).ownerDocument.createRange()).selectNode(n),r)},Lp=function(e,t,n){var r=il(1,e.getBody(),t),i=ts.fromRangeStart(r),o=i.getNode();if(Op(o))return Mp(1,e,o,!i.isAtEnd(),!1);var a=i.getNode(!0);if(Op(a))return Mp(1,e,a,!1,!1);var s=e.dom.getParent(i.getNode(),function(e){return Op(e)||Dp(e)});return Op(s)?Mp(1,e,s,!1,n):null},Rp=function(e,t,n){return t&&t.collapsed&&Lp(e,t,n)||t},Pp={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return fe.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Bp=xi.isContentEditableTrue,Ip=xi.isContentEditableFalse,Fp=cl,Hp=ul,Wp=function(e,t){for(var n=e.getBody();t&&t!==n;){if(Bp(t)||Ip(t))return t;t=t.parentNode}return null},zp=function(e){var t,n,r,o=e.getBody(),a=function(t,n,r){var i,o,a=To(O.none()),s=function(){!function(e){var n,r,i,o,a;for(n=pn("*[contentEditable=false]",t),o=0;o<n.length;o++)i=(r=n[o]).previousSibling,ua(i)&&(1===(a=i.data).length?i.parentNode.removeChild(i):i.deleteData(a.length-1,1)),la(i=r.nextSibling)&&(1===(a=i.data).length?i.parentNode.removeChild(i):i.deleteData(0,1))}(),o&&(As.remove(o),o=null),a.get().each(function(e){pn(e.caret).remove(),a.set(O.none())}),clearInterval(i)},l=function(){i=ge.setInterval(function(){Th(e)?pn("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden"):pn("div.mce-visual-caret",t).addClass("mce-visual-caret-hidden")},500)};return{show:function(n,r){var i,u,c;if(s(),xi.isElement(c=r)&&/^(TD|TH)$/i.test(c.tagName))return null;if(!function(t){return e.dom.isBlock(t)}(r))return o=function(e,t){var n,r,i;if(r=e.ownerDocument.createTextNode(Jo),i=e.parentNode,t){if(ta(n=e.previousSibling)){if(ia(n))return n;if(ua(n))return n.splitText(n.data.length-1)}i.insertBefore(r,e)}else{if(ta(n=e.nextSibling)){if(ia(n))return n;if(la(n))return n.splitText(1),n}e.nextSibling?i.insertBefore(r,e.nextSibling):i.appendChild(r)}return r}(r,n),u=r.ownerDocument.createRange(),Rs(o.nextSibling)?(u.setStart(o,0),u.setEnd(o,0)):(u.setStart(o,1),u.setEnd(o,1)),u;o=function(e,t,n){var r,i,o;return(r=t.ownerDocument.createElement("p")).setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(((o=document.createElement("br")).setAttribute("data-mce-bogus","1"),o)),i=t.parentNode,n?i.insertBefore(r,t):t.nextSibling?i.insertBefore(r,t.nextSibling):i.appendChild(r),r}(0,r,n),i=Ps(t,r,n),pn(o).css("top",i.top);var f=pn('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(i).appendTo(t)[0];return a.set(O.some({caret:f,element:r,before:n})),a.get().each(function(e){n&&pn(e.caret).addClass("mce-visual-caret-before")}),l(),(u=r.ownerDocument.createRange()).setStart(o,0),u.setEnd(o,0),u},hide:s,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){a.get().each(function(e){var n=Ps(t,e.element,e.before);pn(e.caret).css(n)})},destroy:function(){return ge.clearInterval(i)}}}(e.getBody()),s="sel-"+e.dom.uniqueId(),l=function(t){t&&e.selection.setRng(t)},u=function(){return e.selection.getRng()},c=function(t,n,r,i){return void 0===i&&(i=!0),e.fire("ShowCaret",{target:n,direction:t,before:r}).isDefaultPrevented()?null:(i&&e.selection.scrollIntoView(n,-1===t),a.show(r,n))},f=function(e,t){return t=il(e,o,t),-1===e?ts.fromRangeStart(t):ts.fromRangeEnd(t)},d=function(e){return ia(e)||la(e)||ua(e)},h=function(e){return d(e.startContainer)||d(e.endContainer)},p=function(n,r){var i,o,a,l,u,d,p,m,v,y,b=e.$,w=e.dom;if(!n)return null;if(n.collapsed){if(!h(n))if(!1===r){if(m=f(-1,n),Is(m.getNode(!0)))return c(-1,m.getNode(!0),!1,!1);if(Is(m.getNode()))return c(-1,m.getNode(),!m.isAtEnd(),!1)}else{if(m=f(1,n),Is(m.getNode()))return c(1,m.getNode(),!m.isAtEnd(),!1);if(Is(m.getNode(!0)))return c(1,m.getNode(!0),!1,!1)}return null}return u=n.startOffset,d=n.endOffset,3===(l=n.startContainer).nodeType&&0===u&&Ip(l.parentNode)&&(u=w.nodeIndex(l=l.parentNode),l=l.parentNode),1!==l.nodeType?null:(d===u+1&&(i=l.childNodes[u]),Ip(i)?(v=y=i.cloneNode(!0),(p=e.fire("ObjectSelected",{target:i,targetClone:v})).isDefaultPrevented()?null:(o=Io(tr.fromDom(e.getBody()),"#"+s).fold(function(){return b([])},function(e){return b([e.dom()])}),v=p.targetClone,0===o.length&&(o=b('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",s)).appendTo(e.getBody()),n=e.dom.createRng(),v===y&&fe.ie?(o.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(v),n.setStartAfter(o[0].firstChild.firstChild),n.setEndAfter(v)):(o.empty().append("\xa0").append(v).append("\xa0"),n.setStart(o[0].firstChild,1),n.setEnd(o[0].lastChild,0)),o.css({top:w.getPos(i,e.getBody()).y}),o[0].focus(),(a=e.selection.getSel()).removeAllRanges(),a.addRange(n),U(Mo(tr.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){vr(e,"data-mce-selected")}),i.setAttribute("data-mce-selected","1"),t=i,g(),n)):null)},m=function(){t&&(t.removeAttribute("data-mce-selected"),Io(tr.fromDom(e.getBody()),"#"+s).each(xo),t=null),Io(tr.fromDom(e.getBody()),"#"+s).each(xo),t=null},g=function(){a.hide()};return fe.ceFalse&&(function(){var n,r,f,d;e.on("mouseup",function(t){var n=u();n.collapsed&&Ah(e,t.clientX,t.clientY)&&l(Lp(e,n,!1))}),e.on("click",function(t){var n;(n=Wp(e,t.target))&&(Ip(n)&&(t.preventDefault(),e.focus()),Bp(n)&&e.dom.isChildOf(n,e.selection.getNode())&&m())}),e.on("blur NewBlock",function(){m()}),e.on("ResizeWindow FullscreenStateChanged",function(){return a.reposition()}),r=!1,(n=e).on("touchstart",function(){r=!1}),n.on("touchmove",function(){r=!0}),n.on("touchend",function(e){var t=Wp(n,e.target);Ip(t)&&(r||(e.preventDefault(),p(Ap(n,t))))}),e.on("mousedown",function(t){var n,r=t.target;if((r===o||"HTML"===r.nodeName||e.dom.isChildOf(r,o))&&!1!==Ah(e,t.clientX,t.clientY))if(n=Wp(e,r))Ip(n)?(t.preventDefault(),p(Ap(e,n))):(m(),Bp(n)&&t.shiftKey||Ep(t.clientX,t.clientY,e.selection.getRng())||(g(),e.selection.placeCaretAt(t.clientX,t.clientY)));else if(!1===Is(r)){m(),g();var a=function(e,t,n){var r,o,a,s,l,u,c,f=mp(V(ne(e.getElementsByTagName("*")),Is)),d=V(f,function(e){return n>=e.top&&n<=e.bottom});return(r=Np(d,t))&&(r=Np((s=e,c=function(e,t){var n;return n=V(mp([t]),function(t){return!e(t,l)}),u=u.concat(n),0===n.length},(u=[]).push(l=r),_p(ep.Up,s,i(c,Na),l.node),_p(ep.Down,s,i(c,_a),l.node),u),t))&&Is(r.node)?{node:(o=r).node,before:Sp(o,a=t)<kp(o,a)}:null}(o,t.clientX,t.clientY);if(a&&!function(t,n){var r,i=e.dom.getParent(t,e.dom.isBlock),o=e.dom.getParent(n,e.dom.isBlock);return!(!i||!e.dom.isChildOf(i,o)||!1!==Ip(Wp(e,i)))||i&&(r=o,!(e.dom.getParent(i,e.dom.isBlock)===e.dom.getParent(r,e.dom.isBlock)))&&function(e){var t=Ml(e);if(!e.firstChild)return!1;var n=ts.before(e.firstChild),r=t.next(n);return r&&!Hp(r)&&!Fp(r)}(i)}(t.target,a.node)){t.preventDefault();var s=c(1,a.node,a.before,!1);e.getBody().focus(),l(s)}}}),e.on("keypress",function(t){Pp.modifierPressed(t)||Ip(e.selection.getNode())&&t.preventDefault()}),e.on("getSelectionRange",function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}}),e.on("setSelectionRange",function(e){var t;(t=p(e.range,e.forward))&&(e.range=t)}),e.on("AfterSetSelectionRange",function(t){var n=t.range;h(n)||"mcepastebin"===n.startContainer.parentNode.id||g(),e.dom.hasClass(n.startContainer.parentNode,"mce-offscreen-selection")||m()}),e.on("copy",function(t){var n,r=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!fe.ie){var i=(n=e.dom.get(s))?n.getElementsByTagName("*")[0]:n;i&&(t.preventDefault(),r.clearData(),r.setData("text/html",i.outerHTML),r.setData("text/plain",i.outerText))}}),function(e){var t;(function(e){var t,n,r,i,o,a,s,l,u,c,f,d,h,p={};t=ao.DOM,a=document,n=function(e,t){return function(n){if(0===n.button){var r=q(t.dom.getParents(n.target),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=La.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}}(fp,dp)).getOr(null);if(s=t.getBody(),fp(l=r)&&l!==s){var i=t.dom.getPos(r),o=t.getBody(),a=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?o.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?o.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-i.x,e.relY=n.pageY-i.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=function(e,t,n,r){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);var o=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o}(t,r,e.width,e.height)}}var s,l}}(p,e),s=p,l=e,u=ge.throttle(function(e,t){l._selectionOverrides.hideFakeCaret(),l.selection.placeCaretAt(e,t)},0),r=function(e){var t,n,r,i,o,a,c,f,d,h,p,m,g=Math.max(Math.abs(e.screenX-s.screenX),Math.abs(e.screenY-s.screenY));if(s.element&&!s.dragging&&10<g){if(l.fire("dragstart",{target:s.element}).isDefaultPrevented())return;s.dragging=!0,l.focus()}if(s.dragging){var v=(p=s,{pageX:(m=function(e,t){return n=(s=e).inline?cp(s.getBody()):{left:0,top:0},a=(o=e).getBody(),r=o.inline?{left:a.scrollLeft,top:a.scrollTop}:{left:0,top:0},{pageX:(i=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=cp(e.getContentAreaContainer()),r=(o=(i=e).getBody(),a=i.getDoc().documentElement,i.inline?{left:o.scrollLeft,top:o.scrollTop}:{left:o.scrollLeft||a.scrollLeft,top:o.scrollTop||a.scrollTop});return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}var i,o,a;return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+r.left,pageY:i.top-n.top+r.top};var n,r,i,o,a,s}(l,e)).pageX-p.relX,pageY:m.pageY+5});d=s.ghost,h=l.getBody(),d.parentNode!==h&&h.appendChild(d),r=s.width,i=s.height,o=s.maxX,a=s.maxY,f=c=0,(t=s.ghost).style.left=(n=v).pageX+"px",t.style.top=n.pageY+"px",n.pageX+r>o&&(c=n.pageX+r-o),n.pageY+i>a&&(f=n.pageY+i-a),t.style.width=r-c+"px",t.style.height=i-f+"px",u(e.clientX,e.clientY)}},d=p,h=e,i=function(e){if(d.dragging&&(o=3===(s=(i=h).selection.getSel().getRangeAt(0).startContainer).nodeType?s.parentNode:s)!==(a=d.element)&&!i.dom.isChildOf(o,a)&&!fp(o)){var t=((r=d.element.cloneNode(!0)).removeAttribute("data-mce-selected"),r),n=h.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY});n.isDefaultPrevented()||(t=n.targetClone,h.undoManager.transact(function(){hp(d.element),h.insertContent(h.dom.getOuterHTML(t)),h._selectionOverrides.hideFakeCaret()}))}var r,i,o,a,s;pp(d)},c=p,o=function(){c.dragging&&f.fire("dragend"),pp(c)},(f=e).on("mousedown",n),e.on("mousemove",r),e.on("mouseup",i),t.bind(a,"mousemove",r),t.bind(a,"mouseup",o),e.on("remove",function(){t.unbind(a,"mousemove",r),t.unbind(a,"mouseup",o)})})(e),(t=e).on("drop",function(e){var n=void 0!==e.clientX?t.getDoc().elementFromPoint(e.clientX,e.clientY):null;(fp(n)||fp(t.dom.getContentEditableParent(n)))&&e.preventDefault()})}(e),f=e,d=ko(function(){if(!f.removed&&f.selection.getRng().collapsed){var e=Rp(f,f.selection.getRng(),!1);f.selection.setRng(e)}},0),f.on("focus",function(){d.throttle()}),f.on("blur",function(){d.cancel()})}(),r=".mce-content-body",(n=e.contentStyles).push(a.getCss()),n.push(r+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+r+" *[contentEditable=false] {cursor: default;}"+r+" *[contentEditable=true] {cursor: text;}")),{showCaret:c,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(ca(t),l(u()),e.selection.scrollIntoView(t[0]))},hideFakeCaret:g,destroy:function(){a.destroy(),t=null}}},Up=function(e,t,n){var r,i,o,a,s=1;for(a=e.getShortEndedElements(),(o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=r=n;i=o.exec(t);){if(r=o.lastIndex,"/"===i[1])s--;else if(!i[1]){if(i[2]in a)continue;s++}if(0===s)break}return r};function Yp(e,t){void 0===t&&(t=$i());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var r=e.comment?e.comment:n,i=e.cdata?e.cdata:n,o=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,l=e.pi?e.pi:n,u=e.doctype?e.doctype:n;return{parse:function(n){var c,f,d,h,p,m,g,v,y,b,w,C,x,S,k,T,N,_,E,D,O,M,A,L,R,P,B,I,F,H=0,W=[],z=0,U=Bi.decode,Y=Gt.makeMap("src,href,data,background,formaction,poster,xlink:href"),V=/((java|vb)script|mhtml):/i,j=function(e){var t,n;for(t=W.length;t--&&W[t].name!==e;);if(0<=t){for(n=W.length-1;t<=n;n--)(e=W[n]).valid&&s(e.name);W.length=t}},q=function(t,n,r,i,o){var a,s,l,u,c;if(r=(n=n.toLowerCase())in w?n:U(r||i||o||""),x&&!v&&0==(0===(l=n).indexOf("data-")||0===l.indexOf("aria-"))){if(!(a=_[n])&&E){for(s=E.length;s--&&!(a=E[s]).pattern.test(n););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(Y[n]&&!e.allow_script_urls){var f=r.replace(/[\s\u0000-\u001F]+/g,"");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}if(V.test(f))return;if(c=f,!(u=e).allow_html_data_urls&&(/^data:image\//i.test(c)?!1===u.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(c):/^data:/i.test(c)))return}v&&(n in Y||0===n.indexOf("on"))||(h.map[n]=r,h.push({name:n,value:r}))};for(R=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,b=t.getShortEndedElements(),L=e.self_closing_elements||t.getSelfClosingElements(),w=t.getBoolAttrs(),x=e.validate,y=e.remove_internals,F=e.fix_self_closing,B=t.getSpecialElements(),A=n+">";c=R.exec(A);){if(H<c.index&&o(U(n.substr(H,c.index-H))),f=c[6])":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),j(f);else if(f=c[7]){if(c.index+c[0].length>n.length){o(U(n.substr(c.index))),H=c.index+c[0].length;continue}if(":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),C=f in b,F&&L[f]&&0<W.length&&W[W.length-1].name===f&&j(f),!x||(S=t.getElementRule(f))){if(k=!0,x&&(_=S.attributes,E=S.attributePatterns),(N=c[8])?((v=-1!==N.indexOf("data-mce-type"))&&y&&(k=!1),(h=[]).map={},N.replace(P,q)):(h=[]).map={},x&&!v){if(D=S.attributesRequired,O=S.attributesDefault,M=S.attributesForced,S.removeEmptyAttrs&&!h.length&&(k=!1),M)for(p=M.length;p--;)g=(T=M[p]).name,"{$uid}"===(I=T.value)&&(I="mce_"+z++),h.map[g]=I,h.push({name:g,value:I});if(O)for(p=O.length;p--;)(g=(T=O[p]).name)in h.map||("{$uid}"===(I=T.value)&&(I="mce_"+z++),h.map[g]=I,h.push({name:g,value:I}));if(D){for(p=D.length;p--&&!(D[p]in h.map););-1===p&&(k=!1)}if(T=h.map["data-mce-bogus"]){if("all"===T){H=Up(t,n,R.lastIndex),R.lastIndex=H;continue}k=!1}}k&&a(f,h,C)}else k=!1;if(d=B[f]){d.lastIndex=H=c.index+c[0].length,(c=d.exec(n))?(k&&(m=n.substr(H,c.index-H)),H=c.index+c[0].length):(m=n.substr(H),H=n.length),k&&(0<m.length&&o(m,!0),s(f)),R.lastIndex=H;continue}C||(N&&N.indexOf("/")===N.length-1?k&&s(f):W.push({name:f,valid:k}))}else(f=c[1])?(">"===f.charAt(0)&&(f=" "+f),e.allow_conditional_comments||"[if"!==f.substr(0,3).toLowerCase()||(f=" "+f),r(f)):(f=c[2])?i(f.replace(/<!--|-->/g,"")):(f=c[3])?u(f):(f=c[4])&&l(f,c[5]);H=c.index+c[0].length}for(H<n.length&&o(U(n.substr(H))),p=W.length-1;0<=p;p--)(f=W[p]).valid&&s(f.name)}}}(Yp||(Yp={})).findEndTag=Up;var Vp=Yp,jp=function(e,t){var n,r,i,o,a,s,l,u,c=t,f=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,d=e.schema;for(s=e.getTempAttrs(),l=c,u=new RegExp(["\\s?("+s.join("|")+')="[^"]+"'].join("|"),"gi"),c=l.replace(u,""),a=d.getShortEndedElements();o=f.exec(c);)r=f.lastIndex,i=o[0].length,n=a[o[1]]?r:Vp.findEndTag(d,c,r),c=c.substring(0,r-i)+c.substring(n),f.lastIndex=r-i;return Qo(c)},qp=jp,$p=jp,Gp=function(e){return xi.isElement(e)?e.outerHTML:xi.isText(e)?Bi.encodeRaw(e.data,!1):xi.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},Kp=To(O.none()),Xp=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},Zp=function(e){var t=tr.fromTag("body",Kp.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return Kp.set(O.some(e)),e}));return Xo(t,Xp(e)),U(Mo(t,"*[data-mce-bogus]"),So),t.dom().innerHTML},Jp=function(e){var t,n,r;return t=function(e){return V(z(ne(e.childNodes),Gp),function(e){return 0<e.length})}(e.getBody()),-1!==(n=(r=X(t,function(t){var n=$p(e.serializer,t);return 0<n.length?[n]:[]})).join("")).indexOf("</iframe>")?{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:n,bookmark:null,beforeBookmark:null}},Qp=function(e,t,n){"fragmented"===t.type?function(e,t){var n,r,i;n=function(e,t){var n=e.length+t.length+2,r=new Array(n),i=new Array(n),o=function(n,r,i,a,l){var u=s(n,r,i,a);if(null===u||u.start===r&&u.diag===r-a||u.end===n&&u.diag===n-i)for(var c=n,f=i;c<r||f<a;)c<r&&f<a&&e[c]===t[f]?(l.push([0,e[c]]),++c,++f):a-i<r-n?(l.push([2,e[c]]),++c):(l.push([1,t[f]]),++f);else{o(n,u.start,i,u.start-u.diag,l);for(var d=u.start;d<u.end;++d)l.push([0,e[d]]);o(u.end,r,u.end-u.diag,a,l)}},a=function(n,r,i,o){for(var a=n;a-r<o&&a<i&&e[a]===t[a-r];)++a;return{start:n,end:a,diag:r}},s=function(n,o,s,l){var u=o-n,c=l-s;if(0===u||0===c)return null;var f,d,h,p,m,g=u-c,v=c+u,y=(v%2==0?v:v+1)/2;for(r[1+y]=n,i[1+y]=o+1,f=0;f<=y;++f){for(d=-f;d<=f;d+=2){for(r[h=d+y]=d===-f||d!==f&&r[h-1]<r[h+1]?r[h+1]:r[h-1]+1,m=(p=r[h])-n+s-d;p<o&&m<l&&e[p]===t[m];)r[h]=++p,++m;if(g%2!=0&&g-f<=d&&d<=g+f&&i[h-g]<=r[h])return a(i[h-g],d+n-s,o,l)}for(d=g-f;d<=g+f;d+=2){for(i[h=d+y-g]=d===g-f||d!==g+f&&i[h+1]<=i[h-1]?i[h+1]-1:i[h-1],m=(p=i[h]-1)-n+s-d;n<=p&&s<=m&&e[p]===t[m];)i[h]=p--,m--;if(g%2==0&&-f<=d&&d<=f&&i[h]<=r[h+g])return a(i[h],d+n-s,o,l)}}},l=[];return o(0,e.length,0,t.length,l),l}(z(ne(t.childNodes),Gp),e),r=t,i=0,U(n,function(e){0===e[0]?i++:1===e[0]?(function(e,t,n){var r=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t}(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)}(r,e[1],i),i++):2===e[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(r,i)})}(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},em=function(e,t){return!(!e||!t)&&(r=t,Xp(e)===Xp(r)||(n=t,Zp(e)===Zp(n)));var n,r};function tm(e){var t,n,r=this,i=0,o=[],a=0,s=function(){return 0===a},l=function(e){s()&&(r.typing=e)},u=function(t){e.setDirty(t)},c=function(e){l(!1),r.add({},e)},f=function(){r.typing&&(l(!1),r.add())};return e.on("init",function(){r.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(f(),r.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&c(e)}),e.on("ObjectResizeStart Cut",function(){r.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("DragEnd",c),e.on("KeyUp",function(t){var i=t.keyCode;t.isDefaultPrevented()||((33<=i&&i<=36||37<=i&&i<=40||45===i||t.ctrlKey)&&(c(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),n&&r.typing&&!1===em(Jp(e),o[0])&&(!1===e.isDirty()&&(u(!0),e.fire("change",{level:o[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;e.isDefaultPrevented()||(33<=t&&t<=36||37<=t&&t<=40||45===t?r.typing&&c(e):!(t<16||20<t)||224===t||91===t||r.typing||e.ctrlKey&&!e.altKey||e.metaKey||(r.beforeChange(),l(!0),r.add({},e),n=!0))}),e.on("MouseDown",function(e){r.typing&&c(e)}),e.on("input",function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data)&&c(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),r={data:o,typing:!1,beforeChange:function(){s()&&(t=Cs.getUndoBookmark(e.selection))},add:function(n,r){var a,l,c,f=e.settings;if(c=Jp(e),n=Gt.extend(n=n||{},c),!1===s()||e.removed)return null;if(e.fire("BeforeAddUndo",{level:n,lastLevel:l=o[i],originalEvent:r}).isDefaultPrevented())return null;if(l&&em(l,n))return null;if(o[i]&&(o[i].beforeBookmark=t),f.custom_undo_redo_levels&&o.length>f.custom_undo_redo_levels){for(a=0;a<o.length-1;a++)o[a]=o[a+1];o.length--,i=o.length}n.bookmark=Cs.getUndoBookmark(e.selection),i<o.length-1&&(o.length=i+1),o.push(n),i=o.length-1;var d={level:n,lastLevel:l,originalEvent:r};return e.fire("AddUndo",d),0<i&&(u(!0),e.fire("change",d)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,l(!1)),0<i&&(t=o[--i],Qp(e,t,!0),u(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return i<o.length-1&&(t=o[++i],Qp(e,t,!1),u(!0),e.fire("redo",{level:t})),t},clear:function(){o=[],i=0,r.typing=!1,r.data=o,e.fire("ClearUndos")},hasUndo:function(){return 0<i||r.typing&&o[0]&&!em(Jp(e),o[0])},hasRedo:function(){return i<o.length-1&&!r.typing},transact:function(e){return f(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a;r.transact(t)&&(a=o[i].bookmark,Qp(e,o[i-1],!0),r.transact(n)&&(o[i-1].beforeBookmark=a))}}}var nm,rm=ru,im=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(!1===r[i].inherit&&e.dom.is(t,r[i].selector))return!0;return!1},om=function(e,t,n,r){var i=e.dom.getRoot();return t!==i&&(t=e.dom.getParent(t,function(t){return!!im(e,t,n)||t.parentNode===i||!!lm(e,t,n,r,!0)}),lm(e,t,n,r))},am=function(e,t,n){return!!rm(t,n.inline)||!!rm(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},sm=function(e,t,n,r,i,o){var a,s,l,u=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(u)if(void 0===u.length){for(a in u)if(u.hasOwnProperty(a)){if(s="attributes"===r?e.getAttrib(t,a):ou(e,t,a),i&&!s&&!n.exact)return;if((!i||n.exact)&&!rm(s,iu(e,nu(u[a],o),a)))return}}else for(l=0;l<u.length;l++)if("attributes"===r?e.getAttrib(t,u[l]):ou(e,t,u[l]))return n;return n},lm=function(e,t,n,r,i){var o,a,s,l,u=e.formatter.get(n),c=e.dom;if(u&&t)for(a=0;a<u.length;a++)if(am(e.dom,t,o=u[a])&&sm(c,t,o,"attributes",i,r)&&sm(c,t,o,"styles",i,r)){if(l=o.classes)for(s=0;s<l.length;s++)if(!e.dom.hasClass(t,l[s]))return;return o}},um={matchNode:lm,matchName:am,match:function(e,t,n,r){var i;return r?om(e,r,t,n):(r=e.selection.getNode(),!!om(e,r,t,n)||!((i=e.selection.getStart())===r||!om(e,i,t,n)))},matchAll:function(e,t,n){var r,i=[],o={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var a,s;for(a=0;a<t.length;a++)!o[s=t[a]]&&lm(e,r,s,n)&&(o[s]=!0,i.push(s))},e.dom.getRoot()),i},canApply:function(e,t){var n,r,i,o,a,s=e.formatter.get(t),l=e.dom;if(s)for(n=e.selection.getStart(),r=su(l,n),o=s.length-1;0<=o;o--){if(!(a=s[o].selector)||s[o].defaultBlock)return!0;for(i=r.length-1;0<=i;i--)if(l.is(r[i],a))return!0}return!1},matchesUnInheritedFormatSelector:im},cm=function(e,t){return e.splitText(t)},fm=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t===r&&xi.isText(t)?0<n&&n<t.nodeValue.length&&(t=(r=cm(t,n)).previousSibling,n<i?(t=r=cm(r,i-=n).previousSibling,i=r.nodeValue.length,n=0):i=0):(xi.isText(t)&&0<n&&n<t.nodeValue.length&&(t=cm(t,n),n=0),xi.isText(r)&&0<i&&i<r.nodeValue.length&&(i=(r=cm(r,i).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}},dm=Jo,hm="_mce_caret",pm=function(e){return 0<function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==dm||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length},mm=function(e){var t;if(e)for(e=(t=new Xr(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},gm=function(e){var t=tr.fromTag("span");return mr(t,{id:hm,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&bo(t,tr.fromText(dm)),t},vm=function(e,t,n){void 0===n&&(n=!0);var r,i=e.dom,o=e.selection;if(pm(t))Hc(e,!1,tr.fromDom(t),n);else{var a=o.getRng(),s=i.getParent(t,i.isBlock),l=((r=mm(t))&&r.nodeValue.charAt(0)===dm&&r.deleteData(0,1),r);a.startContainer===l&&0<a.startOffset&&a.setStart(l,a.startOffset-1),a.endContainer===l&&0<a.endOffset&&a.setEnd(l,a.endOffset-1),i.remove(t,!0),s&&i.isEmpty(s)&&Mu(tr.fromDom(s)),o.setRng(a)}},ym=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,i=e.selection;if(t)vm(e,t,n);else if(!(t=ks(e.getBody(),i.getStart())))for(;t=r.get(hm);)vm(e,t,!1)},bm=function(e,t,n){var r=e.dom,o=r.getParent(n,i(Ql,e));o&&r.isEmpty(o)?n.parentNode.replaceChild(t,n):(function(e){var t=Mo(e,"br"),n=V(function(e){for(var t=[],n=e.dom();n;)t.push(tr.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),ii);t.length===n.length&&U(n,xo)}(tr.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},wm=function(e,t){return e.appendChild(t),t},Cm=function(e,t){var n,r,i=(n=function(e,t){return wm(e,t.cloneNode(!1))},r=t,function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n])}(e,function(e){r=n(r,e)}),r);return wm(i,i.ownerDocument.createTextNode(dm))},xm=function(e){e.on("mouseup keydown",function(t){var n,r,i,o;r=t.keyCode,i=(n=e).selection,o=n.getBody(),ym(n,null,!1),8!==r&&46!==r||!i.isCollapsed()||i.getStart().innerHTML!==dm||ym(n,ks(o,i.getStart())),37!==r&&39!==r||ym(n,ks(o,i.getStart()))})},Sm=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(or(t))&&!Ss(t.dom())&&!xi.isBogus(t.dom())},km={},Tm=Yt.filter,Nm=Yt.each;nm=function(e){var t,n,r=e.selection.getRng();t=xi.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),Nm(Tm(Tm(n,t),function(e){return t(e.previousSibling)&&-1!==Yt.indexOf(n,e.previousSibling)}),function(e){var t,n;t=e.previousSibling,pn(n=e).remove(),pn(t).append("<br><br>").append(n.childNodes)}))},km.pre||(km.pre=[]),km.pre.push(nm);var _m=/^(src|href|style)$/,Em=Gt.each,Dm=ru,Om=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},Mm=function(e,t,n){var r,i,o;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],xi.isElement(r)&&(o=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[o<i?o:i]),xi.isText(r)&&n&&i>=r.nodeValue.length&&(r=new Xr(r,e.getBody()).next()||r),xi.isText(r)&&!n&&0===i&&(r=new Xr(r,e.getBody()).prev()||r),r},Am=function(e,t,n,r){var i=e.create(n,r);return t.parentNode.insertBefore(i,t),i.appendChild(t),i},Lm=function(e,t,n,r,i){var o=tr.fromDom(t),a=tr.fromDom(e.create(r,i)),s=n?Rr(o):Lr(o);return wo(a,s),n?(go(o,a),yo(a,o)):(vo(o,a),bo(a,o)),a.dom()},Rm=function(e,t,n,r){return!(t=Jl(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},Pm=function(e,t,n,r,i){var o,a,s,l,u,c,f,d,h,p,m,g,v,y,b=e.dom;if(u=b,!(Dm(c=r,(f=t).inline)||Dm(c,f.block)||(f.selector?xi.isElement(c)&&u.is(c,f.selector):void 0)||(l=r,t.links&&"A"===l.tagName)))return!1;if("all"!==t.remove)for(Em(t.styles,function(e,o){e=iu(b,nu(e,n),o),"number"==typeof o&&(o=e,i=0),(t.remove_similar||!i||Dm(ou(b,i,o),e))&&b.setStyle(r,o,""),s=1}),s&&""===b.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),Em(t.attributes,function(e,t){var o;if(e=nu(e,n),"number"==typeof t&&(t=e,i=0),!i||Dm(b.getAttrib(i,t),e)){if("class"===t&&(e=b.getAttrib(r,t))&&(o="",Em(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o))return void b.setAttrib(r,t,o);"class"===t&&r.removeAttribute("className"),_m.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),Em(t.classes,function(e){e=nu(e,n),i&&!b.hasClass(i,e)||b.removeClass(r,e)}),a=b.getAttribs(r),o=0;o<a.length;o++){var w=a[o].nodeName;if(0!==w.indexOf("_")&&0!==w.indexOf("data-"))return!1}return"none"!==t.remove?(g=(h=r).parentNode,v=(d=e).dom,y=d.settings.forced_root_block,(p=t).block&&(y?g===v.getRoot()&&(p.list_block&&Dm(h,p.list_block)||Em(Gt.grep(h.childNodes),function(e){eu(d,y,e.nodeName.toLowerCase())?m?m.appendChild(e):(m=Am(v,e,y),v.setAttribs(m,d.settings.forced_root_block_attrs)):m=0})):v.isBlock(h)&&!v.isBlock(g)&&(Rm(v,h,!1)||Rm(v,h.firstChild,!0,1)||h.insertBefore(v.create("br"),h.firstChild),Rm(v,h,!0)||Rm(v,h.lastChild,!1,1)||h.appendChild(v.create("br")))),p.selector&&p.inline&&!Dm(p.inline,h)||v.remove(h,1),!0):void 0},Bm=Pm,Im=function(e,t,n,r,i){var o,a,s=e.formatter.get(t),l=s[0],u=!0,c=e.dom,f=e.selection,d=function(r){var o,a,u,c,f,d=(a=t,u=n,c=i,Em(su((o=e).dom,r.parentNode).reverse(),function(e){var t;f||"_start"===e.id||"_end"===e.id||(t=um.matchNode(o,e,a,u,c))&&!1!==t.split&&(f=e)}),f);return function(e,t,n,r,i,o,a,s){var l,u,c,f,d,h,p=e.dom;if(n){for(h=n.parentNode,l=r.parentNode;l&&l!==h;l=l.parentNode){for(u=p.clone(l,!1),d=0;d<t.length;d++)if(Pm(e,t[d],s,u,u)){u=0;break}u&&(c&&u.appendChild(c),f||(f=u),c=u)}a.mixed&&p.isBlock(n)||(r=p.split(n,r)),c&&(i.parentNode.insertBefore(c,i),f.appendChild(i))}return r}(e,s,d,r,r,0,l,n)},h=function(t){var r,i,o,a,f;if(xi.isElement(t)&&c.getContentEditable(t)&&(a=u,u="true"===c.getContentEditable(t),f=!0),r=Gt.grep(t.childNodes),u&&!f)for(i=0,o=s.length;i<o&&!Pm(e,s[i],n,t,t);i++);if(l.deep&&r.length){for(i=0,o=r.length;i<o;i++)h(r[i]);f&&(u=a)}},p=function(e){var t,n=c.get(e?"_start":"_end"),r=n[e?"firstChild":"lastChild"];return Gl(t=r)&&xi.isElement(t)&&("_start"===t.id||"_end"===t.id)&&(r=r[e?"firstChild":"lastChild"]),xi.isText(r)&&0===r.data.length&&(r=e?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),c.remove(n,!0),r},m=function(t){var n,r,i=t.commonAncestorContainer;if(t=bu(e,t,s,!0),l.split){if(t=fm(t),(n=Mm(e,t,!0))!==(r=Mm(e,t))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&/^(TH|TD)$/.test(r.nodeName)&&r.firstChild&&(r=r.firstChild||r),Om(c,n,r)){var o=O.from(n.firstChild).getOr(n);return d(Lm(c,o,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void p(!0)}if(Om(c,r,n))return o=O.from(r.lastChild).getOr(r),d(Lm(c,o,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void p(!1);n=Am(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=Am(c,r,"span",{id:"_end","data-mce-type":"bookmark"}),d(n),d(r),n=p(!0),r=p()}else n=r=d(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=c.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=c.nodeIndex(r)+1}Cu(c,t,function(t){Em(t,function(t){h(t),xi.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===au(c,t.parentNode)&&Pm(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(r)r.nodeType?((a=c.createRng()).setStartBefore(r),a.setEndAfter(r),m(a)):m(r);else if("false"!==c.getContentEditable(f.getNode()))f.isCollapsed()&&l.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,r){var i,o,a,s,l,u,c=e.dom,f=e.selection,d=[],h=f.getRng();for(3===(s=i=h.startContainer).nodeType&&(h.startOffset!==i.nodeValue.length&&(a=!0),s=s.parentNode);s;){if(um.matchNode(e,s,t,n,r)){l=s;break}s.nextSibling&&(a=!0),d.push(s),s=s.parentNode}if(l)if(a){o=f.getBookmark(),h.collapse(!0);var p=bu(e,h,e.formatter.get(t),!0);p=fm(p),e.formatter.remove(t,n,p),f.moveToBookmark(o)}else{u=ks(e.getBody(),l);var m=gm(!1).dom(),g=Cm(d,m);bm(e,m,u||l),vm(e,u,!1),f.setCursorLocation(g,1),c.isEmpty(l)&&c.remove(l)}}(e,t,n,i):(o=Cs.getPersistentBookmark(e.selection,!0),m(f.getRng()),f.moveToBookmark(o),l.inline&&um.match(e,t,n,f.getStart())&&Zl(c,f,f.getRng()),e.nodeChanged());else{r=f.getNode();for(var g=0,v=s.length;g<v&&(!s[g].ceFalseOverride||!Pm(e,s[g],n,r,r));g++);}},Fm=Gt.each,Hm=function(e){return e&&1===e.nodeType&&!Gl(e)&&!Ss(e)&&!xi.isBogus(e)},Wm=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!Gl(n))return n}return e},zm=function(e,t,n){var r,i,o=new Ou(e);if(t&&n&&(t=Wm(t,"previousSibling"),n=Wm(n,"nextSibling"),o.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)r=(i=r).nextSibling,t.appendChild(i);return e.remove(n),Gt.each(Gt.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},Um=function(e,t,n){Fm(e.childNodes,function(e){Hm(e)&&(t(e)&&n(e),e.hasChildNodes()&&Um(e,t,n))})},Ym=function(e,t){return i(function(t,n){return!(!n||!ou(e,n,t))},t)},Vm=function(e,t,n){return i(function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),jm(e,r)},t,n)},jm=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},qm=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=au(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},$m=Gt.each,Gm=function(e,t,n,r){var o,a,s=e.formatter.get(t),l=s[0],u=!r&&e.selection.isCollapsed(),c=e.dom,f=e.selection,d=function(e,t){if(t=t||l,e){if(t.onformat&&t.onformat(e,t,n,r),$m(t.styles,function(t,r){c.setStyle(e,r,nu(t,n))}),t.styles){var i=c.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}$m(t.attributes,function(t,r){c.setAttrib(e,r,nu(t,n))}),$m(t.classes,function(t){t=nu(t,n),c.hasClass(e,t)||c.addClass(e,t)})}},h=function(e,t){var n=!1;return!!l.selector&&($m(e,function(e){if(!("collapsed"in e&&e.collapsed!==u))return c.is(t,e.selector)&&!Ss(t)?(d(t,e),!(n=!0)):void 0}),n)},p=function(r,i,o,a){var u,c,f=[],p=!0;c=r.create(u=l.inline||l.block),d(c),Cu(r,i,function(i){var o,m=function(i){var g,v,y,b;if(b=p,g=i.nodeName.toLowerCase(),v=i.parentNode.nodeName.toLowerCase(),1===i.nodeType&&r.getContentEditable(i)&&(b=p,p="true"===r.getContentEditable(i),y=!0),ru(g,"br"))return o=0,void(l.block&&r.remove(i));if(l.wrapper&&um.matchNode(e,i,t,n))o=0;else{if(p&&!y&&l.block&&!l.wrapper&&Ql(e,g)&&eu(e,v,u))return i=r.rename(i,u),d(i),f.push(i),void(o=0);if(l.selector){var w=h(s,i);if(!l.inline||w)return void(o=0)}!p||y||!eu(e,u,g)||!eu(e,v,u)||!a&&3===i.nodeType&&1===i.nodeValue.length&&65279===i.nodeValue.charCodeAt(0)||Ss(i)||l.inline&&r.isBlock(i)?(o=0,$m(Gt.grep(i.childNodes),m),y&&(p=b),o=0):(o||(o=r.clone(c,!1),i.parentNode.insertBefore(o,i),f.push(o)),o.appendChild(i))}};$m(i,m)}),!0===l.links&&$m(f,function(e){var t=function(e){"A"===e.nodeName&&d(e,l),$m(Gt.grep(e.childNodes),t)};t(e)}),$m(f,function(i){var o,a,u,c,h;a=0,$m(i.childNodes,function(e){tu(e)||Gl(e)||a++}),o=a,!(1<f.length)&&r.isBlock(i)||0!==o?(l.inline||l.wrapper)&&(l.exact||1!==o||((c=function(e){var t=!1;return $m(e.childNodes,function(e){if((n=e)&&1===n.nodeType&&!Gl(n)&&!Ss(n)&&!xi.isBogus(n))return t=e,!1;var n}),t}(u=i))&&!Gl(c)&&um.matchName(r,c,l)&&(h=r.clone(c,!1),d(h),r.replace(h,u,!0),r.remove(c,1)),i=h||u),function(e,t,n,r){Fm(s,function(t){Fm(e.dom.select(t.inline,r),function(r){Hm(r)&&Bm(e,t,n,r,t.exact?r:null)}),function(e,t,n){t.clear_child_styles&&Fm(e.select(t.links?"*:not(a)":"*",r),function(n){Hm(n)&&Fm(t.styles,function(t,r){e.setStyle(n,r,"")})})}(e.dom,t)})}(e,0,n,i),function(e,t,n,r,i){um.matchNode(e,i.parentNode,n,r)&&Bm(e,t,r,i)||t.merge_with_parents&&e.dom.getParent(i.parentNode,function(o){if(um.matchNode(e,o,n,r))return Bm(e,t,r,i),!0})}(e,l,t,n,i),function(e,t,n,r){t.styles&&t.styles.backgroundColor&&Um(r,Ym(e,"fontSize"),Vm(e,"backgroundColor",nu(t.styles.backgroundColor,n)))}(r,l,n,i),function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(Um(r,Ym(e,"fontSize"),Vm(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))}(r,l,0,i),function(e,t,n,r){r&&!1!==l.merge_siblings&&(r=zm(e,Jl(r),r),r=zm(e,r,Jl(r,!0)))}(r,0,0,i)):r.remove(i,1)})};if("false"!==c.getContentEditable(f.getNode())){if(l){if(r)r.nodeType?h(s,r)||((a=c.createRng()).setStartBefore(r),a.setEndAfter(r),p(c,bu(e,a,s),0,!0)):p(c,r,0,!0);else if(u&&l.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var r,i,o,a,s,l,u=e.selection;a=(r=u.getRng(!0)).startOffset,l=r.startContainer.nodeValue,(i=ks(e.getBody(),u.getStart()))&&(o=mm(i));var c,f,d=/[^\s\u00a0\u00ad\u200b\ufeff]/;l&&0<a&&a<l.length&&d.test(l.charAt(a))&&d.test(l.charAt(a-1))?(s=u.getBookmark(),r.collapse(!0),r=bu(e,r,e.formatter.get(t)),r=fm(r),e.formatter.apply(t,n,r),u.moveToBookmark(s)):(i&&o.nodeValue===dm||(c=e.getDoc(),f=gm(!0).dom(),o=(i=c.importNode(f,!0)).firstChild,r.insertNode(i),a=1),e.formatter.apply(t,n,i),u.setCursorLocation(o,a))}(e,t,n);else{var m=e.selection.getNode();e.settings.forced_root_block||!s[0].defaultBlock||c.getParent(m,c.isBlock)||Gm(e,s[0].defaultBlock),e.selection.setRng(Bu(e.selection.getRng())),o=Cs.getPersistentBookmark(e.selection,!0),p(c,bu(e,f.getRng(),s)),l.styles&&function(e,t,n,r){(l.styles.color||l.styles.textDecoration)&&(Gt.walk(r,i(qm,e),"childNodes"),qm(e,r))}(c,0,0,m),f.moveToBookmark(o),Zl(c,f,f.getRng()),e.nodeChanged()}!function(e,n){Nm(km[t],function(e){e(n)})}(0,e)}}else{r=f.getNode();for(var g=0,v=s.length;g<v;g++)if(s[g].ceFalseOverride&&c.is(r,s[g].selector))return void d(r,s[g])}},Km={applyFormat:Gm},Xm=Gt.each,Zm=function(e,t,n,r,i){var o,a,s,l,u,c,f,d;null===t.get()&&(a=e,s={},(o=t).set({}),a.on("NodeChange",function(e){var t=su(a.dom,e.element),n={};t=Gt.grep(t,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),Xm(o.get(),function(e,r){Xm(t,function(i){return a.formatter.matchNode(i,r,{},e.similar)?(s[r]||(Xm(e,function(e){e(!0,{node:i,format:r,parents:t})}),s[r]=e),n[r]=e,!1):!um.matchesUnInheritedFormatSelector(a,i,r)&&void 0})}),Xm(s,function(r,i){n[i]||(delete s[i],Xm(r,function(n){n(!1,{node:e.element,format:i,parents:t})}))})})),u=n,c=r,f=i,d=(l=t).get(),Xm(u.split(","),function(e){d[e]||(d[e]=[],d[e].similar=f),d[e].push(c)}),l.set(d)},Jm={get:function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){Gt.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Gt.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},Qm=Gt.each,eg=ao.DOM,tg=function(e,t){var n,r,i,o=t&&t.schema||$i({}),a=function(e){var t,n,i;return n=t=eg.create((r="string"==typeof e?{name:e,classes:[],attrs:{}}:e).name),(i=r).classes.length&&eg.addClass(n,i.classes.join(" ")),eg.setAttribs(n,i.attrs),t},s=function(e,t,n){var r,i,l,u,c,f,d,h,p=0<t.length&&t[0],m=p&&p.name;if(c=m,f="string"!=typeof(u=e)?u.nodeName.toLowerCase():u,l=!(!(h=(d=o.getElementRule(f))&&d.parentsRequired)||!h.length)&&(c&&-1!==Gt.inArray(h,c)?c:h[0]))m===l?(i=t[0],t=t.slice(1)):i=l;else if(p)i=t[0],t=t.slice(1);else if(!n)return e;return i&&(r=a(i)).appendChild(e),n&&(r||(r=eg.create("div")).appendChild(e),Gt.each(n,function(t){var n=a(t);r.insertBefore(n,e)})),s(r,t,i&&i.siblings)};return e&&e.length?(n=a(r=e[0]),(i=eg.create("div")).appendChild(s(n,e.slice(1),r.siblings)),i):""},ng=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=Gt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,i,o){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==Gt.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===i){var a=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=t||"div",n},rg=function(e,t){var n,r,i,o,a,s,l="";if(!1===(s=e.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var u=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(s=t.preview)?"":(n=t.block||t.inline||"span",(o=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Gt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=Gt.map(e.split(/(?:~\+|~|\+)/),ng),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]}(t.selector)).length?(o[0].name||(o[0].name=n),n=t.selector,r=tg(o,e)):r=tg([n],e),i=eg.select(n,r)[0]||r.firstChild,Qm(t.styles,function(e,t){(e=u(e))&&eg.setStyle(i,t,e)}),Qm(t.attributes,function(e,t){(e=u(e))&&eg.setAttrib(i,t,e)}),Qm(t.classes,function(e){e=u(e),eg.hasClass(i,e)||eg.addClass(i,e)}),e.fire("PreviewFormats"),eg.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=eg.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,Qm(s.split(" "),function(t){var n=eg.getStyle(i,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=eg.getStyle(e.getBody(),t,!0),"#ffffff"===eg.toHex(n).toLowerCase())||"color"===t&&"#000000"===eg.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(l+="padding:0 2px;"),l+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),eg.remove(r),l)},ig=function(e,t,n,r,i){var o=t.get(n);!um.match(e,n,r,i)||"toggle"in o[0]&&!o[0].toggle?Km.applyFormat(e,n,r,i):Im(e,n,r,i)},og=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])};function ag(e){var t,n,r,o=(n={},(r=function(e,t){e&&("string"!=typeof e?Gt.each(e,function(e,t){r(t,e)}):(Gt.each(t=t.length?t:[t],function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))})(Jm.get((t=e).dom)),r(t.settings.formats),{get:function(e){return e?n[e]:n},register:r,unregister:function(e){return e&&n[e]&&delete n[e],n}}),a=To(null);return og(e),xm(e),{get:o.get,register:o.register,unregister:o.unregister,apply:i(Km.applyFormat,e),remove:i(Im,e),toggle:i(ig,e,o),match:i(um.match,e),matchAll:i(um.matchAll,e),matchNode:i(um.matchNode,e),canApply:i(um.canApply,e),formatChanged:i(Zm,e,a),getCssText:i(rg,e)}}var sg,lg=Object.prototype.hasOwnProperty,ug=(sg=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var i=e[r];for(var o in i)lg.call(i,o)&&(n[o]=sg(0,i[o]))}return n}),cg={register:function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,r){for(var i,o,a=e.length,s="data-mce-"+r,l=t.url_converter,u=t.url_converter_scope;a--;)void 0!==(o=(i=e[a]).attributes.map[s])?(i.attr(r,0<o.length?o:null),i.attr(s,null)):(o=i.attributes.map[r],"style"===r?o=n.serializeStyle(n.parseStyle(o),i.name):l&&(o=l.call(u,o,r,i.name)),i.attr(r,0<o.length?o:null))}),e.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)"bookmark"!==(r=e[i]).attributes.map["data-mce-type"]||n.cleanup||r.remove()}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Bi.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var r,i,o,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)i=(r=e[a]).firstChild?r.firstChild.value:"","script"===n?((o=r.attr("type"))&&r.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===t.element_format&&0<i.length&&(r.firstChild.value="// <![CDATA[\n"+s(i)+"\n// ]]>")):"xhtml"===t.element_format&&0<i.length&&(r.firstChild.value="\x3c!--\n"+s(i)+"\n--\x3e")}),e.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){U(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())}},fg={process:function(e,t,n){return f=n,(c=e)&&c.hasEventListeners("PreProcess")&&!f.no_events?(o=n,u=(r=e).dom,i=(i=t).cloneNode(!0),(a=document.implementation).createHTMLDocument&&(s=a.createHTMLDocument(""),Gt.each("BODY"===i.nodeName?i.childNodes:[i],function(e){s.body.appendChild(s.importNode(e,!0))}),i="BODY"!==i.nodeName?s.body.firstChild:s.body,l=u.doc,u.doc=s),function(e,t){e.fire("PreProcess",t)}(r,ug(o,{node:i})),l&&(u.doc=l),i):t;var r,i,o,a,s,l,u,c,f}},dg={register:function(e,t){t.inline_styles&&function(e,t){var n,r=Ki();t.convert_fonts_to_spans&&function(e,t,n){e.addNodeFilter("font",function(e){U(e,function(e){var r,i=t.parse(e.attr("style")),o=e.attr("color"),a=e.attr("face"),s=e.attr("size");o&&(i.color=o),a&&(i["font-family"]=a),s&&(i["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(i)),r=e,U(["color","face","size"],function(e){r.attr(e,null)})})})}(e,r,Gt.explode(t.font_size_legacy_values)),n=r,e.addNodeFilter("strike",function(e){U(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})}(e,t)}},hg=/^[ \t\r\n]*$/,pg={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},mg=function(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}},gg=function(){function e(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,i;if(r=new e(t,pg[t]||1),n)for(i in n)r.attr(i,n[i]);return r},e.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},e.prototype.attr=function(e,t){var n,r;if("string"!=typeof e){for(r in e)this.attr(r,e[r]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),this;return this}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},e.prototype.clone=function(){var t,n,r,i,o,a=new e(this.name,this.type);if(r=this.attributes){for((o=[]).map={},t=0,n=r.length;t<n;t++)"id"!==(i=r[t]).name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value);a.attributes=o}return a.value=this.value,a.shortEnded=this.shortEnded,a},e.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},e.prototype.unwrap=function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},e.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},e.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},e.prototype.getAll=function(e){var t,n=[];for(t=this.firstChild;t;t=mg(t,this))t.name===e&&n.push(t);return n},e.prototype.empty=function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=mg(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},e.prototype.isEmpty=function(e,t,n){var r,i,o=this.firstChild;if(t=t||{},o)do{if(1===o.type){if(o.attributes.map["data-mce-bogus"])continue;if(e[o.name])return!1;for(r=o.attributes.length;r--;)if("name"===(i=o.attributes[r].name)||0===i.indexOf("data-mce-bookmark"))return!1}if(8===o.type)return!1;if(3===o.type&&!hg.test(o.value))return!1;if(3===o.type&&o.parent&&t[o.parent.name]&&hg.test(o.value))return!1;if(n&&n(o))return!1}while(o=mg(o,this));return!0},e.prototype.walk=function(e){return mg(this,null,e)},e}(),vg=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new gg("br",1)).shortEnded=!0:r.empty().append(new gg("#text",3)).value="\xa0"},yg=function(e){return bg(e,"#text")&&"\xa0"===e.firstChild.value},bg=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},wg=function(e,t,n,r){return r.isEmpty(t,n,function(t){return(n=e.getElementRule(t.name))&&n.paddEmpty;var n})},Cg=function(e,t){return e&&(t[e.name]||"br"===e.name)},xg=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,r,i){var o,a,s,l,u,c,f,d,h=e.length,p=Gt.extend({},n.getBlockElements()),m=n.getNonEmptyElements(),g=n.getNonEmptyElements();for(p.body=1,o=0;o<h;o++)if(s=(a=e[o]).parent,p[a.parent.name]&&a===s.lastChild){for(u=a.prev;u;){if("span"!==(c=u.name)||"bookmark"!==u.attr("data-mce-type")){if("br"!==c)break;if("br"===c){a=null;break}}u=u.prev}a&&(a.remove(),wg(n,m,g,s)&&(f=n.getElementRule(s.name))&&(f.removeEmpty?s.remove():f.paddEmpty&&vg(t,i,p,s)))}else{for(l=a;s&&s.firstChild===l&&s.lastChild===l&&!p[(l=s).name];)s=s.parent;l===s&&!0!==t.padd_empty_with_br&&((d=new gg("#text",3)).value="\xa0",a.replace(d))}}),e.addAttributeFilter("href",function(e){var n,r,i,o=e.length;if(!t.allow_unsafe_link_target)for(;o--;)"a"===(n=e[o]).name&&"_blank"===n.attr("target")&&n.attr("rel",(i=(r=n.attr("rel"))?Gt.trim(r):"",/\b(noopener)\b/g.test(i)?i:i.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if("a"===(i=e[o]).name&&i.firstChild&&!i.attr("href"))for(r=i.parent,t=i.lastChild;n=t.prev,r.insert(t,i),t=n;);}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)if("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var i=new gg("li",1);i.attr("style","list-style-type: none"),t.wrap(i)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,r,i,o,a,s,l,u=e.length,c=n.getValidClasses();u--;){for(r=(t=e[u]).attr("class").split(" "),a="",i=0;i<r.length;i++)o=r[i],l=!1,(s=c["*"])&&s[o]&&(l=!0),s=c[t.name],!l&&s&&s[o]&&(l=!0),l&&(a&&(a+=" "),a+=o);a.length||(a=null),t.attr("class",a)}})},Sg=Gt.makeMap,kg=Gt.each,Tg=Gt.explode,Ng=Gt.extend;function _g(e,t){void 0===t&&(t=$i());var n={},r=[],i={},o={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var t,a,s;(a=e.name)in n&&((s=i[a])?s.push(e):i[a]=[e]),t=r.length;for(;t--;)(a=r[t].name)in e.attributes.map&&((s=o[a])?s.push(e):o[a]=[e]);return e},s={schema:t,addAttributeFilter:function(e,t){kg(Tg(e),function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){kg(Tg(e),function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)})},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:a,parse:function(s,l){var u,c,f,d,h,p,m,g,v,y,b,w=[];l=l||{},i={},o={},v=Ng(Sg("script,style,head,html,body,title,meta,param"),t.getBlockElements());var C=t.getNonEmptyElements(),x=t.children,S=e.validate,k="forced_root_block"in l?l.forced_root_block:e.forced_root_block,T=t.getWhiteSpaceElements(),N=/^[ \t\r\n]+/,_=/[ \t\r\n]+$/,E=/[ \t\r\n]+/g,D=/^[ \t\r\n]+$/;y=T.hasOwnProperty(l.context)||T.hasOwnProperty(e.root_name);var O=function(e,t){var r,o=new gg(e,t);return e in n&&((r=i[e])?r.push(o):i[e]=[o]),o},M=function(e){var n,r,i,o,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if(0<(i=n.value.replace(_,"")).length)return void(n.value=i);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}o=n.prev,n.remove(),n=o}};u=Vp({validate:S,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){b.append(O("#cdata",4)).value=e},text:function(e,t){var n;y||(e=e.replace(E," "),Cg(b.lastChild,v)&&(e=e.replace(N,""))),0!==e.length&&((n=O("#text",3)).raw=!!t,b.append(n).value=e)},comment:function(e){b.append(O("#comment",8)).value=e},pi:function(e,t){b.append(O(e,7)).value=t,M(b)},doctype:function(e){b.append(O("#doctype",10)).value=e,M(b)},start:function(e,n,i){var a,s,l,u,c;if(l=S?t.getElementRule(e):{}){for((a=O(l.outputName||e,1)).attributes=n,a.shortEnded=i,b.append(a),(c=x[b.name])&&x[a.name]&&!c[a.name]&&w.push(a),s=r.length;s--;)(u=r[s].name)in n.map&&((m=o[u])?m.push(a):o[u]=[a]);v[e]&&M(a),i||(b=a),!y&&T[e]&&(y=!0)}},end:function(n){var r,i,o,a,s;if(i=S?t.getElementRule(n):{}){if(v[n]&&!y){if((r=b.firstChild)&&3===r.type)if(0<(o=r.value.replace(N,"")).length)r.value=o,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)a=r.next,(0===(o=r.value).length||D.test(o))&&(r.remove(),r=a),r=a;if((r=b.lastChild)&&3===r.type)if(0<(o=r.value.replace(_,"")).length)r.value=o,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)a=r.prev,(0===(o=r.value).length||D.test(o))&&(r.remove(),r=a),r=a}if(y&&T[n]&&(y=!1),i.removeEmpty&&wg(t,C,T,b)&&!b.attributes.map.name&&!b.attr("id"))return s=b.parent,v[b.name]?b.empty().remove():b.unwrap(),void(b=s);i.paddEmpty&&(yg(b)||wg(t,C,T,b))&&vg(e,l,v,b),b=b.parent}}},t);var A=b=new gg(l.context||e.root_name,11);if(u.parse(s),S&&w.length&&(l.context?l.invalid=!0:function(e){var n,r,i,o,s,l,u,c,f,d,h,p,m,g,v,y;for(p=Sg("tr,td,th,tbody,thead,tfoot,table"),d=t.getNonEmptyElements(),h=t.getWhiteSpaceElements(),m=t.getTextBlockElements(),g=t.getSpecialElements(),n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(m[r.name]&&"li"===r.parent.name){for(v=r.next;v&&m[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(o=[r],i=r.parent;i&&!t.isValidChild(i.name,r.name)&&!p[i.name];i=i.parent)o.push(i);if(i&&1<o.length){for(o.reverse(),s=l=a(o[0].clone()),f=0;f<o.length-1;f++){for(t.isValidChild(l.name,o[f].name)?(u=a(o[f].clone()),l.append(u)):u=l,c=o[f].firstChild;c&&c!==o[f+1];)y=c.next,u.append(c),c=y;l=u}wg(t,d,h,s)?i.insert(r,o[0],!0):(i.insert(s,o[0],!0),i.insert(r,s)),(wg(t,d,h,i=o[0])||bg(i,"br"))&&i.empty().remove()}else if(r.parent){if("li"===r.name){if((v=r.prev)&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if((v=r.next)&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(a(new gg("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(a(new gg("div",1))):g[r.name]?r.empty().remove():r.unwrap()}}}(w)),k&&("body"===A.name||l.isRootContent)&&function(){var n,r,i=A.firstChild,o=function(e){e&&((i=e.firstChild)&&3===i.type&&(i.value=i.value.replace(N,"")),(i=e.lastChild)&&3===i.type&&(i.value=i.value.replace(_,"")))};if(t.isValidChild(A.name,k.toLowerCase())){for(;i;)n=i.next,3===i.type||1===i.type&&"p"!==i.name&&!v[i.name]&&!i.attr("data-mce-type")?(r||((r=O(k,1)).attr(e.forced_root_block_attrs),A.insert(r,i)),r.append(i)):(o(r),r=null),i=n;o(r)}}(),!l.invalid){for(g in i){for(m=n[g],h=(c=i[g]).length;h--;)c[h].parent||c.splice(h,1);for(f=0,d=m.length;f<d;f++)m[f](c,g,l)}for(f=0,d=r.length;f<d;f++)if((m=r[f]).name in o){for(h=(c=o[m.name]).length;h--;)c[h].parent||c.splice(h,1);for(h=0,p=m.callbacks.length;h<p;h++)m.callbacks[h](c,m.name,l)}}return A}};return xg(s,e),dg.register(s,e),s}var Eg=function(e,t,n){-1===Gt.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},Dg=function(e,t,n){var r=Qo(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||fi(tr.fromDom(t))?r:Gt.trim(r)},Og=function(e,t,n){var r=n.selection?ug({forced_root_block:!1},n):n,i=e.parse(t,r);return cg.trimTrailingBr(i),i},Mg=function(e,t,n,r,i){var o,a,s,l;return a=e,o=r,l=Pu(t,n).serialize(o),!(s=i).no_events&&a?function(e,t){return e.fire("PostProcess",t)}(a,ug(s,{content:l})).content:l};function Ag(e,t){var n,r,o,a,s,l,u=(n=e,l=["data-mce-selected"],o=(r=t)&&r.dom?r.dom:ao.DOM,a=r&&r.schema?r.schema:$i(n),n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs=!("remove_trailing_brs"in n)||n.remove_trailing_brs,s=_g(n,a),cg.register(s,n,o),{schema:a,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:function(e,t){var i=ug({format:"html"},t||{}),l=fg.process(r,e,i),u=Dg(o,l,i),c=Og(s,u,i);return"tree"===i.format?c:Mg(r,n,a,c,i)},addRules:function(e){a.addValidElements(e)},setRules:function(e){a.setValidElements(e)},addTempAttr:i(Eg,s,l),getTempAttrs:function(){return l}});return{schema:u.schema,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:u.serialize,addRules:u.addRules,setRules:u.setRules,addTempAttr:u.addTempAttr,getTempAttrs:u.getTempAttrs}}function Lg(e){return{getBookmark:i(ql,e),moveToBookmark:i($l,e)}}(Lg||(Lg={})).isBookmarkNode=Gl;var Rg,Pg,Bg=Lg,Ig=xi.isContentEditableFalse,Fg=xi.isContentEditableTrue,Hg=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,p,m,g,v,y,b=t.dom,w=Gt.each,C=t.getDoc(),x=document,S=Math.abs,k=Math.round,T=t.getBody();o={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var N=".mce-content-body";t.contentStyles.push(N+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+N+" .mce-resizehandle:hover {background: #000}"+N+" img[data-mce-selected],"+N+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+N+" .mce-clonedresizable {position: absolute;"+(fe.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+N+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var _=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},E=function(e){var n,r,i=e.target;n=e,r=t.selection.getRng(),!_(n.target)||Ep(n.clientX,n.clientY,r)||e.isDefaultPrevented()||(e.preventDefault(),t.selection.select(i))},D=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},O=function(e){var n=t.settings.object_resizing;return!1!==n&&!fe.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&Tr(tr.fromDom(e),n))},M=function(e){var o,w,C,x;g=(w=e.screenY-l)*a[3]+d,m=(m=(o=e.screenX-s)*a[2]+f)<5?5:m,g=g<5?5:g,(_(n)&&!1!==t.settings.resize_img_proportional?!Pp.modifierPressed(e):Pp.modifierPressed(e)||_(n)&&a[2]*a[3]!=0)&&(S(o)>S(w)?(g=k(m*h),m=k(g/h)):(m=k(g/h),g=k(m*h))),b.setStyles(D(r),{width:m,height:g}),C=0<(C=a.startPos.x+o)?C:0,x=0<(x=a.startPos.y+w)?x:0,b.setStyles(i,{left:C,top:x,display:"block"}),i.innerHTML=m+" &times; "+g,a[2]<0&&r.clientWidth<=m&&b.setStyle(r,"left",u+(f-m)),a[3]<0&&r.clientHeight<=g&&b.setStyle(r,"top",c+(d-g)),(o=T.scrollWidth-v)+(w=T.scrollHeight-y)!=0&&b.setStyles(i,{left:C-o,top:x-w}),p||(t.fire("ObjectResizeStart",{target:n,width:f,height:d}),p=!0)},A=function(){p=!1;var e=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?b.setStyle(D(n),e,r):b.setAttrib(D(n),e,r))};e("width",m),e("height",g),b.unbind(C,"mousemove",M),b.unbind(C,"mouseup",A),x!==C&&(b.unbind(x,"mousemove",M),b.unbind(x,"mouseup",A)),b.remove(r),b.remove(i),L(n),t.fire("ObjectResized",{target:n,width:m,height:g}),b.setAttrib(n,"style",b.getAttrib(n,"style")),t.nodeChanged()},L=function(e){var p,S,k,N,_;R(),I(),p=b.getPos(e,T),u=p.x,c=p.y,_=e.getBoundingClientRect(),S=_.width||_.right-_.left,k=_.height||_.bottom-_.top,n!==e&&(n=e,m=g=0),N=t.fire("ObjectSelected",{target:e}),O(e)&&!N.isDefaultPrevented()?w(o,function(e,t){var o;(o=b.get("mceResizeHandle"+t))&&b.remove(o),o=b.add(T,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===fe.ie&&(o.contentEditable=!1),b.bind(o,"mousedown",function(t){var o;t.stopImmediatePropagation(),t.preventDefault(),s=(o=t).screenX,l=o.screenY,f=D(n).clientWidth,d=D(n).clientHeight,h=d/f,(a=e).startPos={x:S*e[0]+u,y:k*e[1]+c},v=T.scrollWidth,y=T.scrollHeight,r=n.cloneNode(!0),b.addClass(r,"mce-clonedresizable"),b.setAttrib(r,"data-mce-bogus","all"),r.contentEditable=!1,r.unSelectabe=!0,b.setStyles(r,{left:u,top:c,margin:0}),r.removeAttribute("data-mce-selected"),T.appendChild(r),b.bind(C,"mousemove",M),b.bind(C,"mouseup",A),x!==C&&(b.bind(x,"mousemove",M),b.bind(x,"mouseup",A)),i=b.add(T,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},f+" &times; "+d)}),e.elm=o,b.setStyles(o,{left:S*e[0]+u-o.offsetWidth/2,top:k*e[1]+c-o.offsetHeight/2})}):R(),n.setAttribute("data-mce-selected","1")},R=function(){var e,t;for(e in I(),n&&n.removeAttribute("data-mce-selected"),o)(t=b.get("mceResizeHandle"+e))&&(b.unbind(t),b.remove(t))},P=function(n){var r,i=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};p||t.removed||(w(b.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),r="mousedown"===n.type?n.target:e.getNode(),i(r=b.$(r).closest("table,img,figure.image,hr")[0],T)&&(F(),i(e.getStart(!0),r)&&i(e.getEnd(!0),r))?L(r):R())},B=function(e){return Ig(function(e,t){for(;t&&t!==e;){if(Fg(t)||Ig(t))return t;t=t.parentNode}return null}(t.getBody(),e))},I=function(){for(var e in o){var t=o[e];t.elm&&(b.unbind(t.elm),delete t.elm)}},F=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return t.on("init",function(){F(),fe.ie&&11<=fe.ie&&(t.on("mousedown click",function(e){var n=e.target,r=n.nodeName;p||!/^(TABLE|IMG|HR)$/.test(r)||B(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())}),t.dom.bind(T,"mscontrolselect",function(e){var n=function(e){ge.setEditorTimeout(t,function(){t.selection.select(e)})};if(B(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))}));var e=ge.throttle(function(e){t.composing||P(e)});t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),t.on("keyup compositionend",function(t){n&&"TABLE"===n.nodeName&&e(t)}),t.on("hide blur",R),t.on("contextmenu",E)}),t.on("remove",I),{isResizable:O,showResizeRect:L,hideResizeRect:R,updateResizeRect:P,destroy:function(){n=r=null}}},Wg=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},zg=function(e){return xi.isContentEditableTrue(e)||xi.isContentEditableFalse(e)},Ug=function(e,t,n){var r,i,o,a,s,l=n;if(l.caretPositionFromPoint)(i=l.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(i.offsetNode,i.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(l.body.createTextRange){r=l.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(i){r=function(e,t,n){var r,i,o;if(r=n.elementFromPoint(e,t),i=n.body.createTextRange(),r&&"HTML"!==r.tagName||(r=n.body),i.moveToElementText(r),0<(o=(o=Gt.toArray(i.getClientRects())).sort(function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))})).length){t=(o[0].bottom+o[0].top)/2;try{return i.moveToPoint(e,t),i.collapse(!0),i}catch(e){}}return null}(e,t,n)}return a=n.body,s=(o=r)&&o.parentElement?o.parentElement():null,xi.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(s,a,zg))?null:o}return r},Yg=function(e,t){return z(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},Vg=function(e,t){var n=(t||document).createDocumentFragment();return U(e,function(e){n.appendChild(e.dom())}),tr.fromDom(n)},jg=Cr("element","width","rows"),qg=Cr("element","cells"),$g=Cr("x","y"),Gg=function(e,t){var n=parseInt(gr(e,t),10);return isNaN(n)?1:n},Kg=function(e){return j(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},Xg=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var i=n[r].cells(),o=0;o<i.length;o++)if(_r(i[o],t))return O.some($g(o,r));return O.none()},Zg=function(e,t,n,r,i){for(var o=[],a=e.rows(),s=n;s<=i;s++){var l=a[s].cells(),u=t<r?l.slice(t,r+1):l.slice(r,t+1);o.push(qg(a[s].element(),u))}return o},Jg=function(){return Vg([])},Qg=function(e,t){if(void 0===t&&(t={}),t.get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return O.from(e.selection.getRng()).map(function(e){return Qo(e.toString())}).getOr("");t.getInner=!0;var r,o,a,s,l,u,c,f=(o=t,s=(r=e).selection.getRng(),l=r.dom.create("body"),u=r.selection.getSel(),c=Yg(r,Yf(u)),s.cloneContents?(a=o.contextual?function(e,t){var r,o,a=jf(t,e);return 0<a.length?function(e,t){return(n=e,r=t[0],Bo(r,"table",i(_r,n))).bind(function(e){var n=t[0],r=t[t.length-1];return function(e,t,n){return Xg(e,t).bind(function(t){return Xg(e,n).map(function(n){return r=e,o=n,a=(i=t).x(),s=i.y(),l=o.x(),c=s<(u=o.y())?Zg(r,a,s,l,u):Zg(r,a,u,l,s),jg(r.element(),Kg(c),c);var r,i,o,a,s,l,u,c})})}(function(e){var t=jg(Go(e),0,[]);return U(Mo(e,"tr"),function(e,n){U(Mo(e,"td,th"),function(r,i){!function(e,t,n,r,i){for(var o=Gg(i,"rowspan"),a=Gg(i,"colspan"),s=e.rows(),l=n;l<n+o;l++){s[l]||(s[l]=qg(Ko(r),[]));for(var u=t;u<t+a;u++)s[l].cells()[u]=l===n&&u===t?i:Go(i)}}(t,function(e,t,n){for(;r=t,i=n,o=void 0,((o=e.rows())[i]?o[i].cells():[])[r];)t++;var r,i,o;return t}(t,i,n),n,e,r)})}),jg(t.element(),Kg(t.rows()),t.rows())}(e),n,r).map(function(e){return Vg([function(e){return n=z((t=e).rows(),function(e){var t=z(e.cells(),function(e){var t=Ko(e);return vr(t,"colspan"),vr(t,"rowspan"),t}),n=Go(e.element());return wo(n,t),n}),r=Go(t.element()),i=tr.fromTag("tbody"),wo(i,n),bo(r,i),r;var t,n,r,i}(e)])})}).getOrThunk(Jg);var n,r}(e,a):(r=e,0<(o=t).length&&o[0].collapsed?Jg():function(e,t){return r=tr.fromDom(t.cloneContents()),o=function(e,t){var r,o=tr.fromDom(t.commonAncestorContainer),a=cc(o,e),s=V(a,function(e){return ri(e)||ti(e)}),l=function(e,t){return q(e,function(e){return"li"===or(e)&&function(e,t){return Aa([(a=t,s=a.startContainer,l=a.startOffset,xi.isText(s)?0===l?O.some(tr.fromDom(s)):O.none():O.from(s.childNodes[l]).map(tr.fromDom)),(n=t,r=n.endContainer,o=n.endOffset,xi.isText(r)?o===r.data.length?O.some(tr.fromDom(r)):O.none():O.from(r.childNodes[o-1]).map(tr.fromDom))],function(t,n){var r=q(ap(e),i(_r,t)),o=q(sp(e),i(_r,n));return r.isSome()&&o.isSome()}).getOr(!1);var n,r,o,a,s,l}(e,t)}).fold(n([]),function(t){return(n=e,q(n,function(e){return"ul"===or(e)||"ol"===or(e)})).map(function(e){return[tr.fromTag("li"),tr.fromTag(or(e))]}).getOr([]);var n})}(a,t),u=s.concat(l.length?l:si(r=o)?Or(r).filter(ai).fold(n([]),function(e){return[r,e]}):ai(r)?[r]:[]);return z(u,Go)}(e,t),a=j(o,function(e,t){return bo(t,e),t},r),0<o.length?Vg([a]):a;var r,o,a}(r,o[0]))}(tr.fromDom(r.getBody()),c).dom():s.cloneContents())&&l.appendChild(a):l.innerHTML=s.toString(),r.selection.serializer.serialize(l,o));return"tree"===t.format?f:(t.content=e.selection.isCollapsed()?"":f,e.fire("GetContent",t),t.content)},ev=function(e,t,n,r,i){var o=n?t.startOffset:t.endOffset;return O.from(n?t.startContainer:t.endContainer).map(tr.fromDom).map(function(e){return r&&t.collapsed?e:Br(e,i(e,o)).getOr(e)}).bind(function(e){return sr(e)?O.some(e):Or(e)}).map(function(e){return e.dom()}).getOr(e)},tv=function(e,t,n){return ev(e,t,!0,n,function(e,t){return Math.min(e.dom().childNodes.length,t)})},nv=function(e,t,n){return ev(e,t,!1,n,function(e,t){return 0<t?t-1:t})},rv=function(e,t){for(var n=e;e&&xi.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},iv=Gt.each,ov=function(e){return!!e.select},av=function(e){return!(!e||!e.ownerDocument)&&Er(tr.fromDom(e.ownerDocument),tr.fromDom(e))},sv=function(e,t,n,r){var i,o,a,s,l,u=function(e,t){return function(e,t,n){var r,i,o,a=e.selection.getRng(),s=e.getDoc();if((n=n||{format:"html"}).set=!0,n.selection=!0,n.content=t,n.no_events||!(n=e.fire("BeforeSetContent",n)).isDefaultPrevented()){if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer===s&&a.endContainer===s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=t,a.insertNode(i))),r=e.dom.get("__caret"),(a=s.createRange()).setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)}else e.fire("SetContent",n)}(r,e,t)},c=function(e){var t=d();t.collapse(!!e),h(t)},f=function(){return t.getSelection?t.getSelection():t.document.selection},d=function(){var n,i,o,l,u=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;if(null==(l=t.document))return null;if(void 0!==r.bookmark&&!1===Th(r)){var c=Gd(r);if(c.isSome())return c.map(function(e){return Yg(r,[e])[0]}).getOr(l.createRange())}try{(n=f())&&(i=0<n.rangeCount?n.getRangeAt(0):n.createRange?n.createRange():l.createRange())}catch(e){}return(i=Yg(r,[i])[0])||(i=l.createRange?l.createRange():l.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=e.getRoot(),i.setStart(o,0),i.setEnd(o,0)),a&&s&&(0===u(i.START_TO_START,i,a)&&0===u(i.END_TO_END,i,a)?i=s:s=a=null),i},h=function(e,t){var n,i;if((o=e)&&(ov(o)||av(o.startContainer)&&av(o.endContainer))){var o,l=ov(e)?e:null;if(l){s=null;try{l.select()}catch(e){}}else{if(n=f(),e=r.fire("SetSelectionRange",{range:e,forward:t}).range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=0<n.rangeCount?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||fe.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(i=e.startContainer.childNodes[e.startOffset])&&"IMG"===i.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(i,0,i,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},p=function(){var t,n,r=f();return!(r&&r.anchorNode&&r.focusNode)||((t=e.createRng()).setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},m={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:c,setCursorLocation:function(t,n){var i=e.createRng();t?(i.setStart(t,n),i.setEnd(t,n),h(i),c(!1)):(lp(e,i,r.getBody(),!0),h(i))},getContent:function(e){return Qg(r,e)},setContent:u,getBookmark:function(e,t){return i.getBookmark(e,t)},moveToBookmark:function(e){return i.moveToBookmark(e)},select:function(t,n){var r,i,o;return(r=e,i=t,o=n,O.from(i).map(function(e){var t=r.nodeIndex(e),n=r.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),o&&(lp(r,n,e,!0),lp(r,n,e,!1)),n})).each(h),t},isCollapsed:function(){var e=d(),t=f();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:p,setNode:function(t){return u(e.getOuterHTML(t)),t},getNode:function(){return e=r.getBody(),(t=d())?(i=t.startContainer,o=t.endContainer,a=t.startOffset,s=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(i===o&&s-a<2&&i.hasChildNodes()&&(n=i.childNodes[a]),3===i.nodeType&&3===o.nodeType&&(i=i.length===a?rv(i.nextSibling,!0):i.parentNode,o=0===s?rv(o.previousSibling,!1):o.parentNode,i&&i===o))?i:n&&3===n.nodeType?n.parentNode:n):e;var e,t,n,i,o,a,s},getSel:f,setRng:h,getRng:d,getStart:function(e){return tv(r.getBody(),d(),e)},getEnd:function(e){return nv(r.getBody(),d(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,r){var i,o,a=[];if(o=e.getRoot(),n=e.getParent(n||tv(o,t,t.collapsed),e.isBlock),r=e.getParent(r||nv(o,t,t.collapsed),e.isBlock),n&&n!==o&&a.push(n),n&&r&&n!==r)for(var s=new Xr(i=n,o);(i=s.next())&&i!==r;)e.isBlock(i)&&a.push(i);return r&&n!==r&&r!==o&&a.push(r),a}(e,d(),t,n)},normalize:function(){var t=d();if(!function(e){return 1<Uf(e).length}(f())&&up(r)){var n=Nd(e,t);return n.each(function(e){h(e,p())}),n.getOr(t)}return t},selectorChanged:function(t,n){var i;return l||(l={},i={},r.on("NodeChange",function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),o={};iv(l,function(t,n){iv(r,function(a){if(e.is(a,n))return i[n]||(iv(t,function(e){e(!0,{node:a,selector:n,parents:r})}),i[n]=t),o[n]=t,!1})}),iv(i,function(e,t){o[t]||(delete i[t],iv(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),l[t]||(l[t]=[]),l[t].push(n),m},getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){var r,i,o,a,s,l=e.dom,u=l.getRoot(),c=0;if(e.fire("scrollIntoView",s={elm:t,alignToTop:n}),!s.isDefaultPrevented()&&xi.isElement(t)){if(!1===n&&(c=t.offsetHeight),"BODY"!==u.nodeName){var f=e.selection.getScrollContainer();if(f)return r=Wg(t).y-Wg(f).y+c,a=f.clientHeight,void((r<(o=f.scrollTop)||o+a<r+25)&&(f.scrollTop=r<o?r:r-a+25))}i=l.getViewPort(e.getWin()),r=l.getPos(t).y+c,o=i.y,a=i.h,(r<i.y||o+a<r+25)&&e.getWin().scrollTo(0,r<o?r:r-a+25)}}(r,e,t)},placeCaretAt:function(e,t){return h(Ug(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=d();return e.collapsed?ts.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=a=s=null,o.destroy()}};return i=Bg(m),o=Hg(m,r),m.bookmarkManager=i,m.controlSelection=o,m},lv=xi.isContentEditableFalse,uv=Ea,cv=cl,fv=ul,dv=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},hv=function(e,t,n){var r,o,a,s,l=Ml(e.getBody()),u=i(dv,l.next),c=i(dv,l.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?u(ts.fromRangeStart(n)):c(ts.fromRangeStart(n)))||(s=(a=e).dom.create(a.settings.forced_root_block),(!fe.ie||11<=fe.ie)&&(s.innerHTML='<br data-mce-bogus="1">'),o=s,1===t?e.$(r).after(o):e.$(r).before(o),e.selection.select(o,!0),e.selection.collapse())}},pv=function(e,t){return function(){var n,r,o,a,s,l,u,c,f=(r=t,a=Ml((n=e).getBody()),s=i(dv,a.next),l=i(dv,a.prev),(o=function(e,t,n,r){var i,o,a,s,l,u,c=e===Qa.Forwards,f=c?fv:cv;return!r.collapsed&&(i=uv(r),lv(i))?Mp(e,t,i,e===Qa.Backwards,!0):(s=na(r.startContainer),f(o=ll(e,t.getBody(),r))?Ap(t,o.getNode(!c)):(o=n(o))?f(o)?Mp(e,t,o.getNode(!c),c,!0):f(a=n(o))&&(!(u=Js(l=o,a))&&xi.isBr(l.getNode())||u)?Mp(e,t,a.getNode(!c),c,!0):s?Rp(t,o.toRange(),!0):null:s?r:null)}(u=r?Qa.Forwards:Qa.Backwards,n,r?s:l,c=n.selection.getRng()))?o:(o=hv(n,u,c))||null);return!!f&&(e.selection.setRng(f),!0)}},mv=function(e,t){return function(){var n,r,i,o,a,s,l=(o=(r=t)?1:-1,a=r?yp:vp,s=(n=e).selection.getRng(),(i=function(e,t,n,r){var i,o,a,s,l,u,c,f,d;if(d=uv(r),i=ll(e,t.getBody(),r),o=n(t.getBody(),bp(1),i),a=V(o,wp(1)),l=Yt.last(i.getClientRects()),(fv(i)||fl(i))&&(d=i.getNode()),(cv(i)||dl(i))&&(d=i.getNode(!0)),!l)return null;if((s=Np(a,u=l.left))&&lv(s.node))return c=Math.abs(u-s.left),f=Math.abs(u-s.right),Mp(e,t,s.node,c<f,!0);if(d){var h=function(e,t,n,r){var i,o,a,s,l,u,c=Ml(t),f=[],d=0,h=function(e){return Yt.last(e.getClientRects())};1===e?(i=c.next,o=_a,a=Na,s=ts.after(r)):(i=c.prev,o=Na,a=_a,s=ts.before(r)),u=h(s);do{if(s.isVisible()&&!a(l=h(s),u)){if(0<f.length&&o(l,Yt.last(f))&&d++,(l=Sa(l)).position=s,l.line=d,n(l))return f;f.push(l)}}while(s=i(s));return f}(e,t.getBody(),bp(1),d);if(s=Np(V(h,wp(1)),u))return Rp(t,s.position.toRange(),!0);if(s=Yt.last(V(h,wp(0))))return Rp(t,s.position.toRange(),!0)}}(o,n,a,s))?i:(i=hv(n,o,s))||null);return!!l&&(e.selection.setRng(l),!0)}};(Pg=Rg||(Rg={}))[Pg.Br=0]="Br",Pg[Pg.Block=1]="Block",Pg[Pg.Wrap=2]="Wrap",Pg[Pg.Eol=3]="Eol";var gv=function(e,t){return e===Qa.Backwards?t.reverse():t},vv=function(e,t,n,r){for(var i,o,a,s,l,u=Ml(n),c=r,f=[];c&&(s=u,l=c,i=t===Qa.Forwards?s.next(l):s.prev(l));){if(xi.isBr(i.getNode(!1)))return t===Qa.Forwards?{positions:gv(t,f).concat([i]),breakType:Rg.Br,breakAt:O.some(i)}:{positions:gv(t,f),breakType:Rg.Br,breakAt:O.some(i)};if(i.isVisible()){if(e(c,i)){var d=(o=c,xi.isBr((a=i).getNode(t===Qa.Forwards))?Rg.Br:!1===Js(o,a)?Rg.Block:Rg.Wrap);return{positions:gv(t,f),breakType:d,breakAt:O.some(i)}}f.push(i),c=i}else c=i}return{positions:gv(t,f),breakType:Rg.Eol,breakAt:O.none()}},yv=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var i=t(n,r).positions;return e===Qa.Backwards?i.concat(r):[r].concat(i)}).getOr([])},bv=function(e,t){return j(e,function(e,n){return e.fold(function(){return O.some(n)},function(r){return Aa([ee(r.getClientRects()),ee(n.getClientRects())],function(e,i){var o=Math.abs(t-e.left);return Math.abs(t-i.left)<=o?n:r}).or(e)})},O.none())},wv=function(e,t){return ee(t.getClientRects()).bind(function(t){return bv(e,t.left)})},Cv=i(vv,Ja.isAbove,-1),xv=i(vv,Ja.isBelow,1),Sv=i(yv,-1,Cv),kv=i(yv,1,xv),Tv=function(e,t,n,r,i){var o,a,s,l,u=Mo(tr.fromDom(n),"td,th,caption").map(function(e){return e.dom()});return(a=V((o=e,X(u,function(e){var t,n={left:(t=Sa(e.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:n.left,y:o(n),cell:e},{x:n.right,y:o(n),cell:e}]})),function(e){return t(e,i)}),s=r,l=i,j(a,function(e,t){return e.fold(function(){return O.some(t)},function(e){var n=Math.sqrt(Math.abs(e.x-s)+Math.abs(e.y-l)),r=Math.sqrt(Math.abs(t.x-s)+Math.abs(t.y-l));return O.some(r<n?t:e)})},O.none())).map(function(e){return e.cell})},Nv=i(Tv,function(e){return e.bottom},function(e,t){return e.y<t}),_v=i(Tv,function(e){return e.top},function(e,t){return e.y>t}),Ev=function(e,t){var n;e.selection.setRng(t),n=e,ee(Ja.fromRangeStart(t).getClientRects()).each(function(e){var t,r,i,o,a,s,l,u,c,f=(a=t=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(n),(s=r=e).left>a.left&&s.right<a.right?0:s.left<a.left?s.left-a.left:s.right-a.right),d=(o=r).top>(i=t).top&&o.bottom<i.bottom?0:o.top<i.top?o.top-i.top:o.bottom-i.bottom;u=0!==f?0<f?f+4:f-4:0,c=0!==d?0<d?d+4:d-4:0,(l=n).inline?(l.getBody().scrollLeft+=u,l.getBody().scrollTop+=c):l.getWin().scrollBy(u,c)})},Dv=function(e,t,n){var r,i,o,a,s=e(t,n);return(a=s).breakType===Rg.Wrap&&0===a.positions.length||!xi.isBr(n.getNode())&&(o=s).breakType===Rg.Br&&1===o.positions.length?(r=e,i=t,!s.breakAt.map(function(e){return r(i,e).breakAt.isSome()}).getOr(!1)):s.breakAt.isNone()},Ov=i(Dv,Cv),Mv=i(Dv,xv),Av=function(e,t,n){var r,i=(r=n.getNode(!!t),xi.isElement(r)&&"TABLE"===r.nodeName?O.some(r):O.none()),o=!1===t;i.fold(function(){return Ev(e,n.toRange())},function(r){return Hl.positionIn(o,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return Ev(e,n.toRange())},function(i){return o=t,s=r,l=n,void((u=id(a=e))?a.undoManager.transact(function(){var e=tr.fromTag(u);mr(e,od(a)),bo(e,tr.fromTag("br")),o?vo(tr.fromDom(s),e):go(tr.fromDom(s),e);var t=a.dom.createRng();t.setStart(e.dom(),0),t.setEnd(e.dom(),0),Ev(a,t)}):Ev(a,l.toRange()));var o,a,s,l,u})})},Lv=function(e,t){return function(){return O.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return O.from(e.dom.getParent(n,"table")).map(function(n){return function(e,t,n,r){var i,o,a,s=e.selection.getRng(),l=t?1:-1;if(Bs()&&(i=t,o=n,a=ts.fromRangeStart(s),Hl.positionIn(!i,o).map(function(e){return e.isEqual(a)}).getOr(!1))){var u=Mp(l,e,n,!t,!0);return Ev(e,u),!0}return!1}(e,t,n)})}).getOr(!1)}},Rv=function(e,t){return function(){return O.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return O.from(e.dom.getParent(n,"table")).map(function(r){return function(e,t,n,r){var i,o,a,s,l,u,c=e.selection.getRng(),f=ts.fromRangeStart(c),d=e.getBody();if(!t&&Ov(r,f)){var h=(s=d,function(e,t){return ee(t.getClientRects()).bind(function(t){return Nv(e,t.left,t.top)}).bind(function(e){return wv(Hl.lastPositionIn(n=e).map(function(e){return Cv(n,e).positions.concat(e)}).getOr([]),t);var n})}(l=n,u=f).orThunk(function(){return ee(u.getClientRects()).bind(function(e){return bv(Sv(s,ts.before(l)),e.left)})}).getOr(ts.before(l)));return Av(e,t,h),!0}return!(!t||!Mv(r,f)||(i=d,h=function(e,t){return te(t.getClientRects()).bind(function(t){return _v(e,t.left,t.top)}).bind(function(e){return wv(Hl.firstPositionIn(n=e).map(function(e){return[e].concat(xv(n,e).positions)}).getOr([]),t);var n})}(o=n,a=f).orThunk(function(){return ee(a.getClientRects()).bind(function(e){return bv(kv(i,ts.after(o)),e.left)})}).getOr(ts.after(o)),Av(e,t,h),0))}(e,t,r,n)})}).getOr(!1)}},Pv=function(e){return W(["figcaption"],or(e))},Bv=function(e){var t=document.createRange();return t.setStartBefore(e.dom()),t.setEndBefore(e.dom()),t},Iv=function(e,t,n){n?bo(e,t):yo(e,t)},Fv=function(e,t){return function(){return!!e.selection.isCollapsed()&&function(e,t){var n,r,o,a=tr.fromDom(e.getBody()),s=ts.fromRangeStart(e.selection.getRng()),l=id(e),u=od(e);return(n=s,r=a,o=i(_r,r),Po(tr.fromDom(n.container()),ni,o).filter(Pv)).exists(function(){if(function(e,t,n){return t?(i=e.dom(),xv(i,n).breakAt.isNone()):(r=e.dom(),Cv(r,n).breakAt.isNone());var r,i}(a,t,s)){var n=function(e,t,n,r){return""===t?(u=e,c=r,f=tr.fromTag("br"),Iv(u,f,c),Bv(f)):(i=e,o=r,a=n,s=tr.fromTag(t),l=tr.fromTag("br"),mr(s,a),bo(s,l),Iv(i,s,o),Bv(l));var i,o,a,s,l,u,c,f}(a,l,u,t);return e.selection.setRng(n),!0}return!1})}(e,t)}},Hv=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},Wv=function(t,n){return q(function(t,n){return X(z(t,function(t){return ug({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:e},t)}),function(e){return(r=n).keyCode===(t=e).keyCode&&r.shiftKey===t.shiftKey&&r.altKey===t.altKey&&r.ctrlKey===t.ctrlKey&&r.metaKey===t.metaKey?[e]:[];var t,r})}(t,n),function(e){return e.action()})},zv=function(e){return 1===Pr(e).length},Uv=function(e,t){return!!e.selection.isCollapsed()&&function(e,t){var r,o=tr.fromDom(e.getBody()),a=tr.fromDom(e.selection.getStart()),s=V((r=cc(a,o),$(r,ni).fold(n(r),function(e){return r.slice(0,e)})),zv);return te(s).map(function(n){var r,o=ts.fromRangeStart(e.selection.getRng());return!(!function(e,t,n){return Aa([Hl.firstPositionIn(n),Hl.lastPositionIn(n)],function(r,i){var o=Zu.normalizePosition(!0,r),a=Zu.normalizePosition(!1,i),s=Zu.normalizePosition(!1,t);return e?Hl.nextPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(o)}).getOr(!1):Hl.prevPosition(n,s).map(function(e){return e.isEqual(o)&&t.isEqual(a)}).getOr(!1)}).getOr(!0)}(t,o,n.dom())||Ss((r=n).dom())&&pm(r.dom())||(function(e,t,n,r){var o,a,s,l,u=i(Sm,t),c=z(V(r,u),function(e){return e.dom()});if(0===c.length)Hc(t,e,n);else{var f=(o=n.dom(),a=c,s=gm(!1),l=Cm(a,s.dom()),go(tr.fromDom(o),s),xo(tr.fromDom(o)),ts(l,0));t.selection.setRng(f.toRange())}}(t,e,n,s),0))}).getOr(!1)}(e,t)},Yv=function(e){return O.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},Vv=function(e,t){var n,r,i,o=t,a=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&t.insertBefore(a.doc.createTextNode("\xa0"),t.firstChild)}if(i=a.createRng(),t.normalize(),t.hasChildNodes()){for(n=new Xr(t,t);r=n.current();){if(xi.isText(r)){i.setStart(r,0),i.setEnd(r,0);break}if(s[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}o=r,r=n.next()}r||(i.setStart(o,0),i.setEnd(o,0))}else xi.isBr(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),a.remove(void 0),e.selection.scrollIntoView(t)}},jv=Yv,qv=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},$v=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},Gv=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Kv=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!xi.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},Xv=function(e){e.innerHTML='<br data-mce-bogus="1">'},Zv=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},Jv=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},Qv=function(e,t,n){return!1===xi.isText(t)?n:e?1===n&&t.data.charAt(n-1)===Jo?0:n:n===t.data.length-1&&t.data.charAt(n)===Jo?t.data.length:n},ey=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},ty=function(e,t){var n=id(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,od(e))},ny=function(e,t){return jv(e).filter(function(e){return 0<t.length&&Tr(tr.fromDom(e),t)}).isSome()},ry=Cc([{br:[]},{block:[]},{none:[]}]),iy=function(e,t){return function(e){return ny(e,function(e){return e.getParam("no_newline_selector","")}(e))}(e)},oy=function(e){return function(t,n){return""===id(t)===e}},ay=function(e){return function(t,n){return function(e){return Yv(e).filter(function(e){return si(tr.fromDom(e))}).isSome()}(t)===e}},sy=function(e,t){return function(r,i){return function(e){return Yv(e).fold(n(""),function(e){return e.nodeName.toUpperCase()})}(r)===e.toUpperCase()===t}},ly=function(e){return sy("pre",e)},uy=function(e){return function(t,n){return function(e){return e.getParam("br_in_pre",!0)}(t)===e}},cy=function(e,t){return function(e){return ny(e,function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(e))}(e)},fy=function(e,t){return t},dy=function(e){var t=id(e),n=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},hy=function(e,t){return function(n,r){return j(e,function(e,t){return e&&t(n,r)},!0)?O.some(t):O.none()}},py=function(t,n){(function(e,t){return Jc([hy([iy],ry.none()),hy([sy("summary",!0)],ry.br()),hy([ly(!0),uy(!1),fy],ry.br()),hy([ly(!0),uy(!1)],ry.block()),hy([ly(!0),uy(!0),fy],ry.block()),hy([ly(!0),uy(!0)],ry.br()),hy([ay(!0),fy],ry.br()),hy([ay(!0)],ry.block()),hy([oy(!0),fy,dy],ry.block()),hy([oy(!0)],ry.br()),hy([cy],ry.br()),hy([oy(!1),fy],ry.br()),hy([dy],ry.block())],[e,t.shiftKey]).getOr(ry.none())})(t,n).fold(function(){Pd(t,n)},function(){!function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,p,m,g,v,y,b,w=e.dom,C=e.schema,x=C.getNonEmptyElements(),S=e.selection.getRng(),k=function(t){var n,o,s,l=i,u=C.getTextInlineElements();if(t||"TABLE"===f||"HR"===f?(n=w.create(t||h),ty(e,n)):n=a.cloneNode(!1),s=n,!1===e.getParam("keep_styles",!0))w.setAttrib(n,"style",null),w.setAttrib(n,"class",null);else do{if(u[l.nodeName]){if(Ss(l))continue;o=l.cloneNode(!1),w.setAttrib(o,"id",""),n.hasChildNodes()?o.appendChild(n.firstChild):s=o,n.appendChild(o)}}while((l=l.parentNode)&&l!==r);return Xv(s),n},T=function(e){var t,n,r,s;if(s=Qv(e,i,o),xi.isText(i)&&(e?0<s:s<i.nodeValue.length))return!1;if(i.parentNode===a&&p&&!e)return!0;if(e&&xi.isElement(i)&&i===a.firstChild)return!0;if(Zv(i,"TABLE")||Zv(i,"HR"))return p&&!e||!p&&e;for(t=new Xr(i,a),xi.isText(i)&&(e&&0===s?t.prev():e||s!==i.nodeValue.length||t.next());n=t.current();){if(xi.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),x[r]&&"br"!==r))return!1}else if(xi.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},N=function(){l=/^(H[1-6]|PRE|FIGURE)$/.test(f)&&"HGROUP"!==d?k(h):k(),e.getParam("end_container_on_empty_block",!1)&&Jv(w,c)&&w.isEmpty(a)?l=w.split(c,a):w.insertAfter(l,a),Vv(e,l)};Nd(w,S).each(function(e){S.setStart(e.startContainer,e.startOffset),S.setEnd(e.endContainer,e.endOffset)}),i=S.startContainer,o=S.startOffset,h=id(e),s=t.shiftKey,xi.isElement(i)&&i.hasChildNodes()&&(p=o>i.childNodes.length-1,i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i,o=p&&xi.isText(i)?i.nodeValue.length:0),(r=ey(w,i))&&((h&&!s||!h&&s)&&(i=function(e,t,n,r,i){var o,a,s,l,u,c,f,d=t||"P",h=e.dom,p=ey(h,r);if(!(a=h.getParent(r,h.isBlock))||!Jv(h,a)){if(c=(a=a||p)===e.getBody()||(f=a)&&/^(TD|TH|CAPTION)$/.test(f.nodeName)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return o=h.create(d),ty(e,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(l=r;l.parentNode!==a;)l=l.parentNode;for(;l&&!h.isBlock(l);)l=(s=l).previousSibling;if(s&&e.schema.isValidChild(c,d.toLowerCase())){for(o=h.create(d),ty(e,o),s.parentNode.insertBefore(o,s),l=s;l&&!h.isBlock(l);)u=l.nextSibling,o.appendChild(l),l=u;n.setStart(r,i),n.setEnd(r,i)}}return r}(e,h,S,i,o)),a=w.getParent(i,w.isBlock),c=a?w.getParent(a.parentNode,w.isBlock):null,f=a?a.nodeName.toUpperCase():"","LI"!==(d=c?c.nodeName.toUpperCase():"")||t.ctrlKey||(c=(a=c).parentNode,f=d),/^(LI|DT|DD)$/.test(f)&&w.isEmpty(a)?function(e,t,n,r,i){var o=e.dom,a=e.selection.getRng();if(n!==e.getBody()){var s;$v(s=n)&&$v(s.parentNode)&&(i="LI");var l,u=i?t(i):o.create("BR");if(Kv(n,r,!0)&&Kv(n,r,!1))qv(n,"LI")?o.insertAfter(u,Gv(n)):o.replace(u,n);else if(Kv(n,r,!0))qv(n,"LI")?(o.insertAfter(u,Gv(n)),u.appendChild(o.doc.createTextNode(" ")),u.appendChild(n)):n.parentNode.insertBefore(u,n);else if(Kv(n,r,!1))o.insertAfter(u,Gv(n));else{n=Gv(n);var c=a.cloneRange();c.setStartAfter(r),c.setEndAfter(n);var f=c.extractContents();"LI"===i&&(l=f).firstChild&&"LI"===l.firstChild.nodeName?(u=f.firstChild,o.insertAfter(f,n)):(o.insertAfter(f,n),o.insertAfter(u,n))}o.remove(r),Vv(e,u)}}(e,k,c,a,h):h&&a===e.getBody()||(h=h||"P",na(a)?(l=ca(a),w.isEmpty(a)&&Xv(a),Vv(e,l)):T()?N():T(!0)?(l=a.parentNode.insertBefore(k(),a),Vv(e,Zv(a,"HR")?l:a)):((n=(y=S,b=y.cloneRange(),b.setStart(y.startContainer,Qv(!0,y.startContainer,y.startOffset)),b.setEnd(y.endContainer,Qv(!1,y.endContainer,y.endOffset)),b).cloneRange()).setEndAfter(a),u=n.extractContents(),U(Oo(tr.fromDom(u),lr),function(e){var t=e.dom();t.nodeValue=Qo(t.nodeValue)}),function(e){for(;xi.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);}(u),l=u.firstChild,w.insertAfter(u,a),function(e,t,n){var r,i=n,o=[];if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;xi.isElement(i)&&!t[i.nodeName.toLowerCase()]&&o.push(i)}for(r=o.length;r--;)!(i=o[r]).hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue?e.remove(i):(a=i)&&"A"===a.nodeName&&e.isEmpty(a)&&e.remove(i);var a}}(w,x,l),m=w,(g=a).normalize(),(v=g.lastChild)&&!/^(left|right)$/gi.test(m.getStyle(v,"float",!0))||m.add(g,"br"),w.isEmpty(a)&&Xv(a),l.normalize(),w.isEmpty(l)?(w.remove(l),N()):Vv(e,l)),w.setAttrib(l,"id",""),e.fire("NewBlock",{newBlock:l})))}(t,n)},e)},my=function(e,t){var n=t.container(),r=t.offset();return xi.isText(n)?(n.insertData(r,e),O.some(Ja(n,r+e.length))):gl(t).map(function(n){var r=tr.fromText(e);return t.isAtEnd()?vo(n,r):go(n,r),Ja(r.dom(),e.length)})},gy=i(my,"\xa0"),vy=i(my," "),yy=function(e,t,n){var r=V(cc(tr.fromDom(n.container()),t),ni);return ee(r).fold(function(){return Hl.navigate(e,t.dom(),n).forall(function(e){return!1===Js(e,n,t.dom())})},function(t){return Hl.navigate(e,t.dom(),n).isNone()})},by=i(yy,!1),wy=i(yy,!0),Cy=function(e){return Ja.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},xy=function(e,t){var n=V(cc(tr.fromDom(t.container()),e),ni);return ee(n).getOr(e)},Sy=function(e,t){return Cy(t)?ml(t):ml(t)||Hl.prevPosition(xy(e,t).dom(),t).exists(ml)},ky=function(e,t){return Cy(t)?pl(t):pl(t)||Hl.nextPosition(xy(e,t).dom(),t).exists(pl)},Ty=function(e){return gl(e).bind(function(e){return Po(e,sr)}).exists(function(e){return t=br(e,"white-space"),W(["pre","pre-line","pre-wrap"],t);var t})},Ny=function(e,t){return Fs(e.charAt(t))},_y=function(e){var t=e.container();return xi.isText(t)&&jn(t.data,"\xa0")},Ey=function(e){var t=tr.fromDom(e.getBody());e.selection.isCollapsed()&&function(e,t){return O.some(t).filter(_y).bind(function(t){var n,r=t.container(),i=r.nodeValue,o=function(e,t,n){var r,i,o=Ja(t,0);return Ny(n,0)&&(r=e,Ty(i=o)||!(by(r,i)||Tc(r,i)||Sy(r,i)))?" "+n.slice(1):n}(e,r,(n=function(e,t,n){var r,i,o=Ja(t,n.length);return Ny(n,n.length-1)&&(r=e,Ty(i=o)||!(wy(r,i)||kc(r,i)||ky(r,i)))?n.slice(0,-1)+" ":n}(e,r,i),z(n.split(""),function(e,t,n){return Fs(e)&&0<t&&t<n.length-1&&Ws(n[t-1])&&Ws(n[t+1])?" ":e}).join("")));return i!==o?(t.container().nodeValue=o,O.some(t)):O.none()})}(t,Ja.fromRangeStart(e.selection.getRng())).each(function(t){e.selection.setRng(t.toRange())})},Dy=function(e){var t,n,r=ts.fromRangeStart(e.selection.getRng()),o=tr.fromDom(e.getBody());if(e.selection.isCollapsed()){var a=i(Zu.isInlineTarget,e),s=ts.fromRangeStart(e.selection.getRng());return vf(a,e.getBody(),s).bind((n=o,function(e){return e.fold(function(e){return Hl.prevPosition(n.dom(),ts.before(e))},function(e){return Hl.firstPositionIn(e)},function(e){return Hl.lastPositionIn(e)},function(e){return Hl.nextPosition(n.dom(),ts.after(e))})})).bind(function(e,t){return function(n){return r=e,!Ty(i=n)&&(function(e,t){return r=t,Hl.prevPosition(e.dom(),r).isNone()||(n=t,Hl.nextPosition(e.dom(),n).isNone())||by(e,t)||wy(e,t)||Tc(e,t)||kc(e,t);var n,r}(r,i)||Sy(r,i)||ky(r,i))?gy(t):vy(t);var r,i}}(o,r)).exists((t=e,function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}))}return!1},Oy=function(e,t){var n;t.hasAttribute("data-mce-caret")&&(ca(t),(n=e).selection.setRng(n.selection.getRng()),e.selection.scrollIntoView(t))},My=function(e,t){var r=Io(tr.fromDom(e.getBody()),"*[data-mce-caret]").fold(n(null),function(e){return e.dom()});if(r)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void Oy(e,r)):void(oa(r)&&(Oy(e,r),e.undoManager.add()))},Ay=Qn.detect().browser,Ly=function(e){var t,n,r,o,a=_f.setupSelectedState(e);(function(e){e.on("keyup compositionstart",i(My,e))})(e),o=a,(r=e).on("keydown",function(e){var t,n,i,a;!1===e.isDefaultPrevented()&&(t=r,n=o,i=e,a=Qn.detect().os,Wv([{keyCode:Pp.RIGHT,action:pv(t,!0)},{keyCode:Pp.LEFT,action:pv(t,!1)},{keyCode:Pp.UP,action:mv(t,!1)},{keyCode:Pp.DOWN,action:mv(t,!0)},{keyCode:Pp.RIGHT,action:Lv(t,!0)},{keyCode:Pp.LEFT,action:Lv(t,!1)},{keyCode:Pp.UP,action:Rv(t,!1)},{keyCode:Pp.DOWN,action:Rv(t,!0)},{keyCode:Pp.RIGHT,action:_f.move(t,n,!0)},{keyCode:Pp.LEFT,action:_f.move(t,n,!1)},{keyCode:Pp.RIGHT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:_f.moveNextWord(t,n)},{keyCode:Pp.LEFT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:_f.movePrevWord(t,n)},{keyCode:Pp.UP,action:Fv(t,!1)},{keyCode:Pp.DOWN,action:Fv(t,!0)}],i).each(function(e){i.preventDefault()}))}),function(e,t){e.on("keydown",function(n){var r,i,o;!1===n.isDefaultPrevented()&&(i=t,o=n,Wv([{keyCode:Pp.BACKSPACE,action:Hv(Wc,r=e,!1)},{keyCode:Pp.DELETE,action:Hv(Wc,r,!0)},{keyCode:Pp.BACKSPACE,action:Hv(Of,r,i,!1)},{keyCode:Pp.DELETE,action:Hv(Of,r,i,!0)},{keyCode:Pp.BACKSPACE,action:Hv(Jf,r,!1)},{keyCode:Pp.DELETE,action:Hv(Jf,r,!0)},{keyCode:Pp.BACKSPACE,action:Hv(wc,r,!1)},{keyCode:Pp.DELETE,action:Hv(wc,r,!0)},{keyCode:Pp.BACKSPACE,action:Hv(yc,r,!1)},{keyCode:Pp.DELETE,action:Hv(yc,r,!0)},{keyCode:Pp.BACKSPACE,action:Hv(Uv,r,!1)},{keyCode:Pp.DELETE,action:Hv(Uv,r,!0)}],o).each(function(e){o.preventDefault()}))}),e.on("keyup",function(t){var n,r;!1===t.isDefaultPrevented()&&(r=t,Wv([{keyCode:Pp.BACKSPACE,action:Hv(zc,n=e)},{keyCode:Pp.DELETE,action:Hv(zc,n)}],r))})}(e,a),(n=e).on("keydown",function(e){var t,r,i;e.keyCode===Pp.ENTER&&(t=n,(r=e).isDefaultPrevented()||(r.preventDefault(),(i=t.undoManager).typing&&(i.typing=!1,i.add()),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),py(t,r)})))}),(t=e).on("keydown",function(e){var n;!1===e.isDefaultPrevented()&&(n=e,Wv([{keyCode:Pp.SPACEBAR,action:Hv(Dy,t)}],n).each(function(e){n.preventDefault()}))}),function(e){var t,n;t=e,n=ko(function(){t.composing||Ey(t)},0),Ay.isIE()&&(t.on("keypress",function(e){n.throttle()}),t.on("remove",function(e){n.cancel()})),e.on("input",function(t){!1===t.isComposing&&Ey(e)})}(e)},Ry=function(e){return xi.isElement(e)&&oi(tr.fromDom(e))},Py=ao.DOM,By=function(e){var t;e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),(t=e).settings.auto_focus&&ge.setEditorTimeout(t,function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()},100)},Iy=function(e,t){var r,i,o,a,s,l,u,c,f=e.settings,d=e.getElement(),h=e.getDoc();f.inline||(e.getElement().style.visibility=e.orgVisibility),t||f.content_editable||(h.open(),h.write(e.iframeHTML),h.close()),f.content_editable&&(e.on("remove",function(){var e=this.getBody();Py.removeClass(e,"mce-content-body"),Py.removeClass(e,"mce-edit-focus"),Py.setAttrib(e,"contentEditable",null)}),Py.addClass(d,"mce-content-body"),e.contentDocument=h=f.content_document||document,e.contentWindow=f.content_window||window,e.bodyElement=d,f.content_document=f.content_window=null,f.root_name=d.nodeName.toLowerCase()),(r=e.getBody()).disabled=!0,e.readonly=f.readonly,e.readonly||(e.inline&&"static"===Py.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable=e.getParam("content_editable_state",!0)),r.disabled=!1,e.editorUpload=function(e){var t,r,i,o,a,s,l,u,c,f=(t=[],r=function(e){var t,r,i;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||Qh.uuid("blobid"),r=e.name||t,{id:n(t),name:n(r),filename:n(r+"."+(i=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[i.toLowerCase()]||"dat")),blob:n(e.blob),base64:n(e.base64),blobUri:n(e.blobUri||ae.createObjectURL(e.blob)),uri:n(e.uri)}},{create:function(e,t,n,i){if(A(e))return r({id:e,name:i,blob:t,base64:n});if(L(e))return r(e);throw new Error("Unknown input type")},add:function(e){i(e.id())||t.push(e)},get:i=function(e){return o(function(t){return t.id()===e})},getByUri:function(e){return o(function(t){return t.blobUri()===e})},findFirst:o=function(e){return V(t,e)[0]},removeByUri:function(e){t=V(t,function(t){return t.blobUri()!==e||(ae.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){U(t,function(e){ae.revokeObjectURL(e.blobUri())}),t=[]}}),d=(l={},u=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:c=function(e){return e in l},getResultUri:function(e){var t=l[e];return t?t.resultUri:null},isPending:function(e){return!!c(e)&&1===l[e].status},isUploaded:function(e){return!!c(e)&&2===l[e].status},markPending:function(e){l[e]=u(1,null)},markUploaded:function(e,t){l[e]=u(2,t)},removeFailed:function(e){delete l[e]},destroy:function(){l={}}}),h=[],p=function(t){return function(n){return e.selection?t(n):[]}},m=function(e,t,n){for(var r=0;-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e},g=function(e,t,n){return e=m(e,'src="'+t+'"','src="'+n+'"'),m(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},v=function(t,n){U(e.undoManager.data,function(e){"fragmented"===e.type?e.fragments=z(e.fragments,function(e){return g(e,t,n)}):e.content=g(e.content,t,n)})},y=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},b=function(t){return a||(a=function(e,t){var n={},r=function(e,n,r,i){var o,a;(o=Vh()).open("POST",t.url),o.withCredentials=t.credentials,o.upload.onprogress=function(e){i(e.loaded/e.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e,i,a;o.status<200||300<=o.status?r("HTTP Error: "+o.status):(e=JSON.parse(o.responseText))&&"string"==typeof e.location?n((a=e.location,(i=t.basePath)?i.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a)):r("Invalid JSON: "+o.responseText)},(a=new FormData).append("file",e.blob(),e.filename()),o.send(a)},i=function(e,t){return{url:t,blobInfo:e,status:!0}},o=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},a=function(e,t){Gt.each(n[e],function(e){e(t)}),delete n[e]};return!1===I(t.handler)&&(t.handler=r),{upload:function(s,l){return t.url||t.handler!==r?function(r,s){return r=Gt.grep(r,function(t){return!e.isUploaded(t.blobUri())}),de.all(Gt.map(r,function(r){return e.isPending(r.blobUri())?(f=r.blobUri(),new de(function(e){n[f]=n[f]||[],n[f].push(e)})):(u=t.handler,c=s,e.markPending((l=r).blobUri()),new de(function(t){var n;try{var r=function(){n&&n.close()};u(l,function(n){r(),e.markUploaded(l.blobUri(),n),a(l.blobUri(),i(l,n)),t(i(l,n))},function(n){r(),e.removeFailed(l.blobUri()),a(l.blobUri(),o(l,n)),t(o(l,n))},function(e){e<0||100<e||(n||(n=c()),n.progressBar.value(e))})}catch(e){t(o(l,e.message))}}));var l,u,c,f}))}(s,l):new de(function(e){e([])})}}}(d,{url:cd(e),basePath:fd(e),credentials:dd(e),handler:hd(e)})),x().then(p(function(n){var r;return r=z(n,function(e){return e.blobInfo}),a.upload(r,y).then(p(function(r){var i=z(r,function(t,r){var i=n[r].image;return t.status&&ud(e)?function(t,n){f.removeByUri(t.src),v(t.src,n),e.$(t).attr({src:ld(e)?n+"?"+(new Date).getTime():n,"data-mce-src":e.convertURL(n,"src")})}(i,t.url):t.error&&Hh(e,t.error),{element:i,status:t.status}});return t&&t(i),i}))}))},w=function(t){if(sd(e))return b(t)},C=function(t){return!1!==Z(h,function(e){return e(t)})&&(0!==t.getAttribute("src").indexOf("data:")||ad(e)(t))},x=function(){var t,r,i;return s||(t=d,r=f,i={},s={findAll:function(e,o){var a;o||(o=n(!0)),a=V(Zh(e),function(e){var n=e.src;return!!fe.fileApi&&!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!n||n===fe.transparentSrc)&&(0===n.indexOf("blob:")?!t.isUploaded(n)&&o(e):0===n.indexOf("data:")&&o(e))});var s=z(a,function(e){if(i[e.src])return new de(function(t){i[e.src].then(function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})})});var t=new de(function(t,n){Xh(r,e,t,n)}).then(function(e){return delete i[e.image.src],e}).catch(function(t){return delete i[e.src],t});return i[e.src]=t});return de.all(s)}}),s.findAll(e.getBody(),C).then(p(function(t){return t=V(t,function(t){return"string"!=typeof t||(Wh(e,t),!1)}),U(t,function(e){v(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},S=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=d.getResultUri(n);if(r)return'src="'+r+'"';var i=f.getByUri(n);return i||(i=j(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t})};return e.on("setContent",function(){sd(e)?w():x()}),e.on("RawSaveContent",function(e){e.content=S(e.content)}),e.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=S(e.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){U(e,function(e){var t=e.attr("src");if(!f.getByUri(t)){var n=d.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:f,addFilter:function(e){h.push(e)},uploadImages:b,uploadImagesAuto:w,scanForImages:x,destroy:function(){f.destroy(),d.destroy(),s=a=null}}}(e),e.schema=$i(f),e.dom=ao(h,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:f.force_hex_style_colors,class_filter:f.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:f.content_editable,schema:e.schema,contentCssCors:e.getParam("content_css_cors",!1,"boolean"),onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=((a=_g((o=e).settings,o.schema)).addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,i,a=e.length,s=o.dom;a--;)if(r=(n=e[a]).attr(t),!n.attributes.map[i="data-mce-"+t]){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===t?((r=s.serializeStyle(s.parseStyle(r),n.name)).length||(r=null),n.attr(i,r),n.attr(t,r)):"tabindex"===t?(n.attr(i,r),n.attr(t,null)):n.attr(i,o.convertURL(r,t,n.name))}}),a.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),a.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,r=o.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(r)&&0===t.getAll("br").length&&(t.append(new gg("br",1)).shortEnded=!0)}),a),e.serializer=Ag(f,e),e.selection=sv(e.dom,e.getWin(),e.serializer,e),e.annotator=Nu(e),e.formatter=ag(e),e.undoManager=tm(e),e._nodeChangeDispatcher=new function(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var r,i;i={startContainer:(r=e.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&bd(i,t)||e.fire("SelectionChange"),t=i}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!fe.range&&e.selection.isCollapsed()||up(e)&&!function(t){var r,i;if((i=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(r=i.length;0<=r&&i[r]===n[r];r--);if(-1===r)return n=i,!0}return n=i,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){!t.isDefaultPrevented()&&up(e)&&("IMG"===e.selection.getNode().nodeName?ge.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,r,i,o=e.selection;e.initialized&&o&&!e.settings.disable_nodechange&&!e.readonly&&(i=e.getBody(),(n=o.getStart(!0)||i).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,i)||(n=i),r=[],e.dom.getParent(n,function(e){if(e===i)return!0;r.push(e)}),(t=t||{}).element=n,t.parents=r,e.fire("NodeChange",t))}}(e),e._selectionOverrides=zp(e),function(e){var t,n;(t=e).on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()}),(n=e).parser.addNodeFilter("details",function(e){U(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),n.serializer.addNodeFilter("details",function(e){U(e,function(e){var t=e.attr("data-mce-open");e.attr("open",A(t)?t:null),e.attr("data-mce-open",null)})})}(e),function(e){e.on("click",function(t){3<=t.detail&&function(e){var t=e.selection.getRng(),n=Ja.fromRangeStart(t),r=Ja.fromRangeEnd(t);if(Ja.isElementPosition(n)){var i=n.container();Ry(i)&&Hl.firstPositionIn(i).each(function(e){return t.setStart(e.container(),e.offset())})}Ja.isElementPosition(r)&&(i=n.container(),Ry(i)&&Hl.lastPositionIn(i).each(function(e){return t.setEnd(e.container(),e.offset())})),e.selection.setRng(Bu(t))}(e)})}(e),Ly(e),op(e),e.fire("PreInit"),f.browser_spellcheck||f.gecko_spellcheck||(h.body.spellcheck=!1,Py.setAttrib(r,"spellcheck","false")),e.quirks=function(e){var t,n,r,i=Gt.each,o=Pp.BACKSPACE,a=Pp.DELETE,s=e.dom,l=e.selection,u=e.settings,c=e.parser,f=fe.gecko,d=fe.webkit,h="data:text/mce-internal,",p=fe.ie?"Text":"URL",m=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},g=function(e){return e.isDefaultPrevented()},v=function(){e.shortcuts.add("meta+a",null,"SelectAll")},y=function(){e.on("keydown",function(e){if(!g(e)&&e.keyCode===o&&l.isCollapsed()&&0===l.getRng().startOffset){var t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},b=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(t){var n;if("HTML"===t.target.nodeName){if(11<fe.ie)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}}))};return e.on("keydown",function(t){var n,r,i,o,a;if(!g(t)&&t.keyCode===Pp.BACKSPACE&&(r=(n=l.getRng()).startContainer,i=n.startOffset,o=s.getRoot(),a=r,n.collapsed&&0===i)){for(;a&&a.parentNode&&a.parentNode.firstChild===a&&a.parentNode!==o;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(e.formatter.toggle("blockquote",null,a),(n=s.createRng()).setStart(r,0),n.setEnd(r,0),l.setRng(n))}}),t=function(e){var t=s.create("body"),n=e.cloneContents();return t.appendChild(n),l.serializer.serialize(t,{format:"html"})},e.on("keydown",function(n){var r,i,l,u,c,f=n.keyCode;if(!g(n)&&(f===a||f===o)){if(r=e.selection.isCollapsed(),i=e.getBody(),r&&!s.isEmpty(i))return;if(!r&&(l=e.selection.getRng(),u=t(l),(c=s.createRng()).selectNode(e.getBody()),u!==t(c)))return;n.preventDefault(),e.setContent(""),i.firstChild&&s.isBlock(i.firstChild)?e.selection.setCursorLocation(i.firstChild,0):e.selection.setCursorLocation(i,0),e.nodeChanged()}}),fe.windowsPhone||e.on("keyup focusin mouseup",function(e){Pp.modifierPressed(e)||l.normalize()},!0),d&&(e.settings.content_editable||s.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement)if(n=l.getRng(),e.getBody().focus(),"mousedown"===t.type){if(ia(n.startContainer))return;l.placeCaretAt(t.clientX,t.clientY)}else l.setRng(n)}),e.on("click",function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==s.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&s.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),l.select(n))}),u.forced_root_block&&e.on("init",function(){m("DefaultParagraphSeparator",u.forced_root_block)}),e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})}),y(),c.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),fe.iOS?(e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()}),b(),e.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):v()),11<=fe.ie&&(b(),y()),fe.ie&&(v(),m("AutoUrlDetect",!1),e.on("dragstart",function(t){var n,r,i;(n=t).dataTransfer&&(e.selection.isCollapsed()&&"IMG"===n.target.tagName&&l.select(n.target),0<(r=e.selection.getContent()).length&&(i=h+escape(e.id)+","+escape(r),n.dataTransfer.setData(p,i)))}),e.on("drop",function(t){if(!g(t)){var n=(o=t).dataTransfer&&(a=o.dataTransfer.getData(p))&&0<=a.indexOf(h)?(a=a.substr(h.length).split(","),{id:unescape(a[0]),html:unescape(a[1])}):null;if(n&&n.id!==e.id){t.preventDefault();var r=Ug(t.x,t.y,e.getDoc());l.setRng(r),i=n.html,e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:i,internal:!0}):e.execCommand("mceInsertContent",!1,i)}}var i,o,a})),f&&(e.on("keydown",function(t){if(!g(t)&&t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var n=l.getNode(),r=n.previousSibling;if("HR"===n.nodeName)return s.remove(n),void t.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(s.remove(r),t.preventDefault())}}}),Range.prototype.getClientRects||e.on("mousedown",function(t){if(!g(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),ge.setEditorTimeout(e,function(){n.focus()})}}),n=function(){var t=s.getAttribs(l.getStart().cloneNode(!1));return function(){var n=l.getStart();n!==e.getBody()&&(s.setAttrib(n,"style",null),i(t,function(e){n.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!l.isCollapsed()&&s.getParent(l.getStart(),s.isBlock)!==s.getParent(l.getEnd(),s.isBlock)},e.on("keypress",function(t){var i;if(!g(t)&&(8===t.keyCode||46===t.keyCode)&&r())return i=n(),e.getDoc().execCommand("delete",!1,null),i(),t.preventDefault(),!1}),s.bind(e.getDoc(),"cut",function(t){var i;!g(t)&&r()&&(i=n(),ge.setEditorTimeout(e,function(){i()}))}),u.readonly||e.on("BeforeExecCommand MouseDown",function(){m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),u.object_resizing||m("enableObjectResizing",!1)}),e.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||i(s.select("a"),function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})}),e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),fe.mac&&e.on("keydown",function(t){!Pp.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}),y()),{refreshContentEditable:function(){},isHidden:function(){var t;return!f||e.removed?0:!(t=e.selection.getSel())||!t.rangeCount||0===t.rangeCount}}}(e),e.fire("PostRender"),f.directionality&&(r.dir=f.directionality),f.nowrap&&(r.style.whiteSpace="nowrap"),f.protect&&e.on("BeforeSetContent",function(e){Gt.each(f.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),0<e.contentStyles.length&&(i="",Gt.each(e.contentStyles,function(e){i+=e+"\r\n"}),e.dom.addStyle(i)),(s=e,s.inline?Py.styleSheetLoader:s.dom.styleSheetLoader).loadAll(e.contentCSS,function(t){By(e)},function(t){By(e)}),f.content_style&&(l=f.content_style,u=tr.fromDom(e.getDoc().head),c=tr.fromTag("style"),pr(c,"type","text/css"),bo(c,tr.fromText(l)),bo(u,c))},Fy=ao.DOM,Hy=ao.DOM,Wy=function(e,t,n){var r,i,o=Uh.get(n);if(r=Uh.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=Gt.trim(n),o&&-1===Gt.inArray(t,n)){if(Gt.each(Uh.dependencies(n),function(n){Wy(e,t,n)}),e.plugins[n])return;i=new o(e,r,e.$),(e.plugins[n]=i).init&&(i.init(e,r),t.push(n))}},zy=function(e){return e.replace(/^\-/,"")},Uy=function(e){return{editorContainer:e,iframeContainer:e}},Yy=function(e){var t,n,r,i,o,a,s=e.settings,l=e.getElement();return e.rtl=s.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(s.language),s.aria_label=s.aria_label||Hy.getAttrib(l,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),i=(n=e).settings.theme,A(i)?(n.settings.theme=zy(i),r=Yh.get(i),n.theme=new r(n,Yh.urls[i]),n.theme.init&&n.theme.init(n,Yh.urls[i]||n.documentBaseUrl.replace(/\/$/,""),n.$)):n.theme={},a=[],Gt.each((o=e).settings.plugins.split(/[ ,]/),function(e){Wy(o,a,zy(e))}),t=function(e){var t,n,r,i,o,a,s,l,u,c,f,d=e.settings,h=e.getElement();return e.orgDisplay=h.style.display,A(d.theme)?(c=(i=e).settings,f=i.getElement(),o=c.width||Hy.getStyle(f,"width")||"100%",a=c.height||Hy.getStyle(f,"height")||f.offsetHeight,s=c.min_height||100,(l=/^[0-9\.]+(|px)$/i).test(""+o)&&(o=Math.max(parseInt(o,10),100)),l.test(""+a)&&(a=Math.max(parseInt(a,10),s)),u=i.theme.renderUI({targetNode:f,width:o,height:a,deltaWidth:c.delta_width,deltaHeight:c.delta_height}),c.content_editable||(a=(u.iframeHeight||a)+("number"==typeof a?u.deltaHeight||0:""))<s&&(a=s),u.height=a,u):I(d.theme)?(r=(t=e).getElement(),(n=t.settings.theme(t,r)).editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:r.offsetHeight,n):function(e){var t,n,r=e.getElement();return e.inline?Uy(null):(t=r,n=Hy.create("div"),Hy.insertAfter(n,t),Uy(n))}(e)}(e),e.editorContainer=t.editorContainer?t.editorContainer:null,s.content_css&&Gt.each(Gt.explode(s.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),s.content_editable?Iy(e):function(e,t){var n=function(e,t){var n,r,i,o,a,s,l,u=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),c=(n=e.id,r=u,i=t.height,o=function(e){return e.getParam("iframe_attrs",{})}(e),l=tr.fromTag("iframe"),mr(l,o),mr(l,{id:n+"_ifr",frameBorder:"0",allowTransparency:"true",title:r}),function(e,t){var n=l.dom();fr(t,function(e,t){!function(e,t,n){if(!A(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);yr(e)&&e.style.setProperty(t,n)}(n,t,e)})}(0,{width:"100%",height:(a=i,s="number"==typeof a?a+"px":a,s||""),display:"block"}),l).dom();c.onload=function(){c.onload=null,e.fire("load")};var f,d,h,p,m=function(e,t){if(document.domain!==window.location.hostname&&fe.ie&&fe.ie<12){var n=Qh.uuid("mce");e[n]=function(){Iy(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return Fy.setAttrib(t,"src",r),!0}return!1}(e,c);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=c,e.iframeHTML=(p=function(e){return e.getParam("doctype","<!DOCTYPE html>")}(f=e)+"<html><head>",f.getParam("document_base_url","")!==f.documentBaseUrl&&(p+='<base href="'+f.documentBaseURI.getURI()+'" />'),p+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',d=nd(f,"body_id","tinymce"),h=nd(f,"body_class",""),rd(f)&&(p+='<meta http-equiv="Content-Security-Policy" content="'+rd(f)+'" />'),p+='</head><body id="'+d+'" class="mce-content-body '+h+'" data-id="'+f.id+'"><br></body></html>'),Fy.add(t.iframeContainer,c),m}(e,t);t.editorContainer&&(Fy.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=Fy.isHidden(t.editorContainer)),e.getElement().style.display="none",Fy.setAttrib(e.id,"aria-hidden","true"),n||Iy(e)}(e,t)},Vy=ao.DOM,jy=function(e){return"-"===e.charAt(0)},qy=Gt.each,$y=Gt.trim,Gy="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Ky={ftp:21,http:80,https:443,mailto:25},Xy=function(e,t){var n,r,i=this;if(e=$y(e),n=(t=i.settings=t||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))i.source=e;else{var o=0===e.indexOf("//");0!==e.indexOf("/")||o||(e=(n&&n.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=t.base_uri?t.base_uri.path:new Xy(document.location.href).directory,""==t.base_uri.protocol?e="//mce_host"+i.toAbsPath(r,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(n&&n.protocol||"http")+"://mce_host"+i.toAbsPath(r,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),qy(Gy,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),i[t]=r}),n&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""),o&&(i.protocol="")}};Xy.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t;if("./"===e)return e;if("mce_host"!==(e=new Xy(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var n=this.getURI(),r=e.getURI();return n===r||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===r?n:(t=this.toRelPath(this.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new Xy(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=Ky[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;r<i;r++)if(r>=n.length||e[r]!==n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;r<i;r++)if(r>=e.length||e[r]!==n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);r<i;r++)a+="../";for(r=o-1,i=n.length;r<i;r++)a+=r!==o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,i,o=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),qy(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?0<o?o--:a.push(t[n]):o++);return 0!==(i=(n=e.length-o)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},Xy.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},Xy.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var Zy=function(e,t){t(e),e.firstChild&&Zy(e.firstChild,t),e.next&&Zy(e.next,t)},Jy=function(e){return e instanceof gg},Qy=function(e,t){var n;e.dom.setHTML(e.getBody(),t),Th(n=e)&&Hl.firstPositionIn(n.getBody()).each(function(e){var t=e.getNode(),r=xi.isTable(t)?Hl.firstPositionIn(t).getOr(e):e;n.selection.setRng(r.toRange())})},eb=ao.DOM,tb=function(e){return O.from(e).each(function(e){return e.destroy()})},nb=ao.DOM,rb=Gt.extend,ib=Gt.each,ob=Gt.resolve,ab=fe.ie,sb=function(e,t,n){var r,i,o=this,a=o.documentBaseUrl=n.documentBaseURL,s=n.baseURI;i={id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"40px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:(r=o).convertURL,url_converter_scope:r,ie7_compat:!0},t=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h,p=function(e,t){var n,r,i,o=(n=function(t,n){return W(e,n)},r={},i={},fr(t,function(e,t){(n(0,t)?r:i)[t]=e}),{t:r,f:i});return Wu(o.t,o.f)}(["mobile"],r),m=Gt.extend(t,n,p.settings(),(f=e,h=(d=p).settings().inline,f&&ju(d,"mobile")&&!h?(s="mobile",l=Yu,c=(u=p.sections()).hasOwnProperty(s)?u[s]:{},Gt.extend({},l,c)):{}),{validate:!0,content_editable:p.settings().inline,external_plugins:(i=n,o=p.settings(),a=o.external_plugins?o.external_plugins:{},i&&i.external_plugins?Gt.extend({},i.external_plugins,a):a)});return qu(e,p,n,m)}(zu,i,n.defaultSettings,t),o.settings=t,mo.language=t.language||"en",mo.languageLoad=t.language_load,mo.baseURL=n.baseURL,o.id=e,o.setDirty(!1),o.plugins={},o.documentBaseURI=new Xy(t.document_base_url,{base_uri:s}),o.baseURI=s,o.contentCSS=[],o.contentStyles=[],o.shortcuts=new bh(o),o.loadedCSS={},o.editorCommands=new th(o),o.suffix=n.suffix,o.editorManager=n,o.inline=t.inline,o.buttons={},o.menuItems={},t.cache_suffix&&(fe.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(fe.overrideViewPort=!1),n.fire("SetupEditor",{editor:o}),o.execCallback("setup",o),o.$=pn.overrideDefaults(function(){return{context:o.inline?o.getBody():o.getDoc(),element:o.getBody()}})};rb(sb.prototype={render:function(){!function(e){var t,n,r,i=e.settings,o=e.id,a=function(){Vy.unbind(window,"ready",a),e.render()};if(Te.Event.domLoaded){if(e.getElement()&&fe.contentEditable){i.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var s=e.getElement().form||Vy.getParent(o,"form");s&&(e.formElement=s,i.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(Vy.insertAfter(Vy.create("input",{type:"hidden",name:o}),o),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},Vy.bind(s,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),!i.submit_patch||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),s._mceOldSubmit(s)})),e.windowManager=Ph(e),e.notificationManager=Rh(e),"xml"===i.encoding&&e.on("GetContent",function(e){e.save&&(e.content=Vy.encode(e.content))}),i.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),i.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),function(e,t,n,r){var i=t.settings,o=i.theme;if(A(o)){if(!jy(o)&&!Yh.urls.hasOwnProperty(o)){var a=i.theme_url;Yh.load(o,a?t.documentBaseURI.toAbsolute(a):"themes/"+o+"/theme"+n+".js")}e.loadQueue(function(){Yh.waitFor(o,r)})}else r()}(r=fo.ScriptLoader,t=e,n=e.suffix,function(){var e,i,o,a,s;e=r,(o=(i=t).settings).language&&"en"!==o.language&&!o.language_url&&(o.language_url=i.editorManager.baseURL+"/langs/"+o.language+".js"),o.language_url&&!i.editorManager.i18n.data[o.language]&&e.add(o.language_url),s=n,Gt.isArray((a=t.settings).plugins)&&(a.plugins=a.plugins.join(" ")),Gt.each(a.external_plugins,function(e,t){Uh.load(t,e),a.plugins+=" "+t}),Gt.each(a.plugins.split(/[ ,]/),function(e){if((e=Gt.trim(e))&&!Uh.urls[e])if(jy(e)){e=e.substr(1,e.length);var t=Uh.dependencies(e);Gt.each(t,function(e){e=Uh.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"},e),Uh.load(e.resource,e)})}else Uh.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"})}),r.loadQueue(function(){t.removed||Yy(t)},t,function(e){Fh(t,function(e,t){var n=function(e,t){for(var n in Bh.urls)if(Bh.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t}(t,e[0])),t.removed||Yy(t)})})}}else Vy.bind(window,"ready",a)}(this)},focus:function(e){!function(e,t){e.removed||(t?kh(e):function(e){var t=e.selection,n=e.settings.content_editable,r=e.getBody(),i=t.getRng();e.quirks.refreshContentEditable();var o,a,s=(o=e,a=t.getNode(),o.dom.getParent(a,function(e){return"true"===o.dom.getContentEditable(e)}));if(e.$.contains(r,s))return xh(s),Ch(e,i),kh(e);void 0!==e.bookmark&&!1===Sh(e)&&Gd(e).each(function(t){e.selection.setRng(t),i=t}),n||(fe.opera||xh(r),e.getWin().focus()),(fe.gecko||n)&&(xh(r),Ch(e,i)),kh(e)}(e))}(this,e)},hasFocus:function(){return Th(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=this.settings[e];if(i)return this.callbackLookup&&(r=this.callbackLookup[e])&&(i=r.func,r=r.scope),"string"==typeof i&&(r=(r=i.replace(/\.\w+$/,""))?ob(r):0,i=ob(i),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:i,scope:r}),i.apply(r||this,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Gt.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return function(e,t,n,r){var i,o,a,s=t in e.settings?e.settings[t]:n;return"hash"===r?(a={},"string"==typeof(o=s)?U(0<o.indexOf("=")?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){var t=e.split("=");a[Gt.trim(t[0])]=Gt.trim(1<t.length?t[1]:t)}):a=o,a):"string"===r?$u(A,e,t).getOr(n):"number"===r?$u(F,e,t).getOr(n):"boolean"===r?$u(B,e,t).getOr(n):"object"===r?$u(L,e,t).getOr(n):"array"===r?$u(R,e,t).getOr(n):"string[]"===r?$u((i=A,function(e){return R(e)&&Z(e,i)}),e,t).getOr(n):"function"===r?$u(I,e,t).getOr(n):s}(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r}(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:Qh.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(nb.show(this.getContainer()),nb.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(ab&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(nb.hide(e.getContainer()),nb.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=i,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(!e.is_removing&&r.inline||(i.innerHTML=t),(n=nb.getParent(r.id,"form"))&&ib(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=i=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return r=this,i=e,void 0===(o=t)&&(o={}),o.format=o.format?o.format:"html",o.set=!0,o.content=Jy(i)?"":i,Jy(i)||o.no_events||(r.fire("BeforeSetContent",o),i=o.content),O.from(r.getBody()).fold(n(i),function(e){return Jy(i)?function(e,t,n,r){!function(e,t,n){var r=function(e,t,n){var r={},i={},o=[];for(var a in n.firstChild&&Zy(n.firstChild,function(n){U(e,function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}),U(t,function(e){"string"==typeof n.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})})}),r)r.hasOwnProperty(a)&&o.push(r[a]);for(var a in i)i.hasOwnProperty(a)&&o.push(i[a]);return o}(e,t,n);U(r,function(e){U(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})}(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var i=Pu({validate:e.validate},e.schema).serialize(n);return r.content=fi(tr.fromDom(t))?i:Gt.trim(i),Qy(e,r.content),r.no_events||e.fire("SetContent",r),n}(r,e,i,o):(t=r,n=e,s=o,0===(a=i).length||/^\s+$/.test(a)?(u='<br data-mce-bogus="1">',"TABLE"===n.nodeName?a="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(a="<li>"+u+"</li>"),(l=id(t))&&t.schema.isValidChild(n.nodeName.toLowerCase(),l.toLowerCase())?a=t.dom.createHTML(l,t.settings.forced_root_block_attrs,a=u):a||(a='<br data-mce-bogus="1">'),Qy(t,a),t.fire("SetContent",s)):("raw"!==s.format&&(a=Pu({validate:t.validate},t.schema).serialize(t.parser.parse(a,{isRootContent:!0,insert:!0}))),s.content=fi(tr.fromDom(n))?a:Gt.trim(a),Qy(t,s.content),s.no_events||t.fire("SetContent",s)),s.content);var t,n,a,s,l,u});var r,i,o},getContent:function(e){return t=this,void 0===(r=e)&&(r={}),O.from(t.getBody()).fold(n("tree"===r.format?new gg("body",11):""),function(e){return function(e,t,n){var r,i,o,a,s;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=Gt.trim(qp(e.serializer,n.innerHTML));else if("text"===t.format)r=Qo(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);o=(i=e).serializer.serialize(n,t),a=id(i),s=new RegExp("^(<"+a+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+a+">[\r\n]*|<br \\/>[\r\n]*)$"),r=o.replace(s,"")}return t.content="text"===t.format||fi(tr.fromDom(n))?r:Gt.trim(r),t.no_events||e.fire("GetContent",t),t.content}(t,r,e)});var t,r},insertContent:function(e,t){t&&(e=rb({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){var t,n;(n=e)!==function(e){return e.readonly?"readonly":"design"}(t=this)&&(t.initialized?lh(t,"readonly"===n):t.on("init",function(){lh(t,"readonly"===n)}),function(e,t){e.fire("SwitchMode",{mode:n})}(t))},getContainer:function(){return this.container||(this.container=nb.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=nb.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,i=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),ib(i.select("table,a",e),function(e){var o;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",void((o=i.getAttrib(e,"border"))&&"0"!==o||!n.hasVisual?i.removeClass(e,t):i.addClass(e,t));case"A":return void(i.getAttrib(e,"href")||(o=i.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",o&&n.hasVisual?i.addClass(e,t):i.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){!function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&i&&eb.remove(i.nextSibling),!e.inline&&r&&eb.setStyle((o=e).id,"display",o.orgDisplay),function(e){e.fire("remove")}(e),e.editorManager.remove(e),eb.remove(e.getContainer()),tb(t),tb(n),e.destroy()}var o}(this)},destroy:function(e){!function(e,t){var n,r,i,o=e.selection,a=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),tb(o),tb(a)),(r=(n=e).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,r._mceOldSubmit=null),eb.unbind(r,"submit reset",n.formEventDelegate)),(i=e).contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null,i.selection&&(i.selection=i.selection.win=i.selection.dom=i.selection.dom.doc=null),e.destroyed=!0):e.remove())}(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},ph);var lb,ub,cb,fb={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},db=ao.DOM,hb=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==db.getParent(t,function(t){return function(e){return fb.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)})},pb=function(e,t){var n=t.editor;(function(e){var t,n,r,i=ko(function(){qd(e)},0);e.inline&&(t=e,n=i,r=function(){n.throttle()},ao.DOM.bind(document,"mouseup",r),t.on("remove",function(){ao.DOM.unbind(document,"mouseup",r)})),e.on("init",function(){!function(e,t){var n,r;Qn.detect().browser.isIE()?(r=e).on("focusout",function(){qd(r)}):(n=t,e.on("mouseup touchend",function(e){n.throttle()})),e.on("keyup nodechange",function(t){var n;"nodechange"===(n=t).type&&n.selectionChange||qd(e)})}(e,i)}),e.on("remove",function(){i.cancel()})})(n),n.on("focusin",function(){var t=e.focusedEditor;t!==this&&(t&&t.fire("blur",{focusedEditor:this}),e.setActive(this),(e.focusedEditor=this).fire("focus",{blurredEditor:t}),this.focus(!0))}),n.on("focusout",function(){var t=this;ge.setEditorTimeout(t,function(){var n=e.focusedEditor;hb(t,function(){try{return document.activeElement}catch(e){return document.body}}())||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),lb||(lb=function(t){var n,r=e.activeEditor;n=t.target,r&&n.ownerDocument===document&&(n===document.body||hb(r,n)||e.focusedEditor!==r||(r.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},db.bind(document,"focusin",lb))},mb=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(db.unbind(document,"focusin",lb),lb=null)},gb={},vb="en",yb={setCode:function(e){e&&(vb=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return vb},rtl:!1,add:function(e,t){var n=gb[e];for(var r in n||(gb[e]=n={}),t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=gb[vb]||{},n=function(e){return Gt.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||Gt.is(e,"undefined")},i=function(e){return e=n(e),Gt.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(Gt.is(e,"object")&&Gt.hasOwn(e,"raw"))return n(e.raw);if(Gt.is(e,"array")){var o=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return Gt.hasOwn(o,t)?n(o[t]):e})}return i(e).replace(/{context:\w+}$/,"")},data:gb},bb=ao.DOM,wb=Gt.explode,Cb=Gt.each,xb=Gt.extend,Sb=0,kb=!1,Tb=[],Nb=[],_b=function(e){Cb(cb.get(),function(t){t.fire("scroll"===e.type?"ScrollWindow":"ResizeWindow",e)})},Eb=function(e){e!==kb&&(e?pn(window).on("resize scroll",_b):pn(window).off("resize scroll",_b),kb=e)},Db=function(e){var t=Nb;delete Tb[e.id];for(var n=0;n<Tb.length;n++)if(Tb[n]===e){Tb.splice(n,1);break}return Nb=V(Nb,function(t){return e!==t}),cb.activeEditor===e&&(cb.activeEditor=0<Nb.length?Nb[0]:null),cb.focusedEditor===e&&(cb.focusedEditor=null),t.length!==Nb.length};xb(cb={defaultSettings:{},$:pn,majorVersion:"4",minorVersion:"9.2",releaseDate:"2018-12-17",editors:Tb,i18n:yb,activeEditor:null,settings:{},setup:function(){var e,t,n,r,o="";if(t=Xy.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,o=n.suffix;else{for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var l=(r=a[s].src).substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==l.indexOf(".min")&&(o=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(r=document.currentScript.src).indexOf(".min")&&(o=".min"),e=r.substring(0,r.lastIndexOf("/")))}this.baseURL=new Xy(t).toAbsolute(e),this.documentBaseURL=t,this.baseURI=new Xy(this.baseURL),this.suffix=o,function(e){e.on("AddEditor",i(pb,e)),e.on("RemoveEditor",i(mb,e))}(this)},overrideDefaults:function(e){var t;(t=e.base_url)&&(this.baseURL=new Xy(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Xy(this.baseURL)),e.suffix&&(this.suffix=e.suffix);var n=(this.defaultSettings=e).plugin_base_urls;for(var r in n)mo.PluginManager.urls[r]=n[r]},init:function(e){var t,n,r=this;n=Gt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var i=function(e){var t=e.id;return t||(t=(t=e.name)&&!bb.get(t)?e.name:bb.uniqueId(),e.setAttribute("id",t)),t},o=function(e,t){return t.constructor===RegExp?t.test(e.className):bb.hasClass(e,t)},a=function(e){t=e},s=function(){var t,l=0,u=[],c=function(e,n,i){var o=new sb(e,n,r);u.push(o),o.on("init",function(){++l===t.length&&a(u)}),o.targetElm=o.targetElm||i,o.render()};bb.unbind(window,"ready",s),function(t){var n=e[t];n&&n.apply(r,Array.prototype.slice.call(arguments,2))}("onpageload"),t=pn.unique(function(e){var t,n=[];if(fe.ie&&fe.ie<11)return zh("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return Cb(e.types,function(e){n=n.concat(bb.select(e.selector))}),n;if(e.selector)return bb.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":0<(t=e.elements||"").length&&Cb(wb(t),function(e){var t;(t=bb.get(e))?n.push(t):Cb(document.forms,function(t){Cb(t.elements,function(t){t.name===e&&(e="mce_editor_"+Sb++,bb.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":Cb(bb.select("textarea"),function(t){e.editor_deselector&&o(t,e.editor_deselector)||e.editor_selector&&!o(t,e.editor_selector)||n.push(t)})}return n}(e)),e.types?Cb(e.types,function(n){Gt.each(t,function(t){return!bb.is(t,n.selector)||(c(i(t),xb({},e,n),t),!1)})}):(Gt.each(t,function(e){var t;(t=r.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(Db(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)}),0===(t=Gt.grep(t,function(e){return!r.get(e.id)})).length?a([]):Cb(t,function(t){e.inline&&t.tagName.toLowerCase()in n?zh("Could not initialize inline editor on invalid inline target element",t):c(i(t),e,t)}))};return r.settings=e,bb.bind(window,"ready",s),new de(function(e){t?e(t):a=function(t){e(t)}})},get:function(e){return 0===arguments.length?Nb.slice(0):A(e)?q(Nb,function(t){return t.id===e}).getOr(null):F(e)&&Nb[e]?Nb[e]:null},add:function(e){var t=this;return Tb[e.id]===e||(null===t.get(e.id)&&("length"!==e.id&&(Tb[e.id]=e),Tb.push(e),Nb.push(e)),Eb(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),ub||(ub=function(){t.fire("BeforeUnload")},bb.bind(window,"beforeunload",ub))),e},createEditor:function(e,t){return this.add(new sb(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!A(e))return P(r.get((n=e).id))?null:(Db(n)&&r.fire("RemoveEditor",{editor:n}),0===Nb.length&&bb.unbind(window,"beforeunload",ub),n.remove(),Eb(0<Nb.length),n);Cb(bb.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=Nb.length-1;0<=t;t--)r.remove(Nb[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new sb(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",0,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){Cb(Nb,function(e){e.save()})},addI18n:function(e,t){yb.add(e,t)},translate:function(e){return yb.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},ah),cb.setup();var Ob,Mb=cb;function Ab(e){return{walk:function(t,n){return Cu(e,t,n)},split:fm,normalize:function(t){return Nd(e,t).fold(n(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}(Ob=Ab||(Ab={})).compareRanges=bd,Ob.getCaretRangeFromPoint=Ug,Ob.getSelectedNode=Ea,Ob.getNode=Da;var Lb,Rb,Pb=Ab,Bb=Math.min,Ib=Math.max,Fb=Math.round,Hb=function(e,t,n){var r,i,o,a,s,l;return r=t.x,i=t.y,o=e.w,a=e.h,s=t.w,l=t.h,"b"===(n=(n||"").split(""))[0]&&(i+=l),"r"===n[1]&&(r+=s),"c"===n[0]&&(i+=Fb(l/2)),"c"===n[1]&&(r+=Fb(s/2)),"b"===n[3]&&(i-=a),"r"===n[4]&&(r-=o),"c"===n[3]&&(i-=Fb(a/2)),"c"===n[4]&&(r-=Fb(o/2)),Wb(r,i,o,a)},Wb=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},zb={inflate:function(e,t,n){return Wb(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:Hb,findBestRelativePosition:function(e,t,n,r){var i,o;for(o=0;o<r.length;o++)if((i=Hb(e,t,r[o])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},intersect:function(e,t){var n,r,i,o;return n=Ib(e.x,t.x),r=Ib(e.y,t.y),i=Bb(e.x+e.w,t.x+t.w),o=Bb(e.y+e.h,t.y+t.h),i-n<0||o-r<0?null:Wb(n,r,i-n,o-r)},clamp:function(e,t,n){var r,i,o,a,s,l,u,c,f,d;return l=e.y,u=e.x+e.w,c=e.y+e.h,f=t.x+t.w,d=t.y+t.h,r=Ib(0,t.x-(s=e.x)),i=Ib(0,t.y-l),o=Ib(0,u-f),a=Ib(0,c-d),s+=r,l+=i,n&&(u+=r,c+=i,s-=o,l-=a),Wb(s,l,(u-=o)-s,(c-=a)-l)},create:Wb,fromClientRect:function(e){return Wb(e.left,e.top,e.width,e.height)}},Ub={},Yb={add:function(e,t){Ub[e.toLowerCase()]=t},has:function(e){return!!Ub[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=Ub.hasOwnProperty(t)?Ub[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=Ub[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},Vb=Gt.each,jb=Gt.extend,qb=function(){};qb.extend=Lb=function(e){var t,n,r,i=this.prototype,o=function(){var e,t,n;if(!Rb&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},a=function(){return this},s=function(e,t){return function(){var n,r=this._super;return this._super=i[e],n=t.apply(this,arguments),this._super=r,n}};for(n in Rb=!0,t=new this,Rb=!1,e.Mixins&&(Vb(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),i.Mixins&&(e.Mixins=i.Mixins.concat(e.Mixins))),e.Methods&&Vb(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&Vb(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}}),e.Statics&&Vb(e.Statics,function(e,t){o[t]=e}),e.Defaults&&i.Defaults&&(e.Defaults=jb({},i.Defaults,e.Defaults)),e)t[n]="function"==typeof(r=e[n])&&i[n]?s(n,r):r;return o.prototype=t,(o.constructor=o).extend=Lb,o};var $b=Math.min,Gb=Math.max,Kb=Math.round,Xb=function(e,t){var n,r,i,o;if(t=t||'"',null===e)return"null";if("string"==(i=typeof e))return r="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return'"'===t&&"'"===e?e:(n=r.indexOf(i))+1?"\\"+r.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+t;if("object"===i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,r="[";n<e.length;n++)r+=(0<n?",":"")+Xb(e[n],t);return r+"]"}for(o in r="{",e)e.hasOwnProperty(o)&&(r+="function"!=typeof e[o]?(1<r.length?","+t:t)+o+t+":"+Xb(e[o],t):"");return r+"}"}return""+e},Zb={serialize:Xb,parse:function(e){try{return JSON.parse(e)}catch(e){}}},Jb={callbacks:{},count:0,send:function(e){var t=this,n=ao.DOM,r=void 0!==e.count?e.count:t.count,i="tinymce_jsonp_"+r;t.callbacks[r]=function(o){n.remove(i),delete t.callbacks[r],e.callback(o)},n.add(n.doc.body,"script",{id:i,src:e.url,type:"text/javascript"}),t.count++}},Qb={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",Qb.fire("beforeInitialize",{settings:e}),t=Vh()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Gt.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=Qb.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}};Gt.extend(Qb,ah);var ew,tw,nw,rw,iw=Gt.extend,ow=function(e){this.settings=iw({},e),this.count=0};ow.sendRPC=function(e){return(new ow).send(e)},ow.prototype={send:function(e){var t=e.error,n=e.success;(e=iw(this.settings,e)).success=function(r,i){void 0===(r=Zb.parse(r))&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,i):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=Zb.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",Qb.send(e)}};try{ew=window.localStorage}catch(e){tw={},nw=[],rw={getItem:function(e){return tw[e]||null},setItem:function(e,t){nw.push(e),tw[e]=String(t)},key:function(e){return nw[e]},removeItem:function(e){nw=nw.filter(function(t){return t===e}),delete tw[e]},clear:function(){nw=[],tw={}},length:0},Object.defineProperty(rw,"length",{get:function(){return nw.length},configurable:!1,enumerable:!1}),ew=rw}var aw,sw=Gt.extend(Mb,{geom:{Rect:zb},util:{Promise:de,Delay:ge,Tools:Gt,VK:Pp,URI:Xy,Class:qb,EventDispatcher:rh,Observable:ah,I18n:yb,XHR:Qb,JSON:Zb,JSONRequest:ow,JSONP:Jb,LocalStorage:ew,Color:function(e){var t={},n=0,r=0,i=0,o=function(e){var o;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,i=e.b):"v"in e&&function(e,t,o){var a,s,l,u;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,o=parseInt(o,10)/100,t=Gb(0,$b(t,1)),o=Gb(0,$b(o,1)),0!==t){switch(a=e/60,l=(s=o*t)*(1-Math.abs(a%2-1)),u=o-s,Math.floor(a)){case 0:n=s,r=l,i=0;break;case 1:n=l,r=s,i=0;break;case 2:n=0,r=s,i=l;break;case 3:n=0,r=l,i=s;break;case 4:n=l,r=0,i=s;break;case 5:n=s,r=0,i=l;break;default:n=r=i=0}n=Kb(255*(n+u)),r=Kb(255*(r+u)),i=Kb(255*(i+u))}else n=r=i=Kb(255*o)}(e.h,e.s,e.v):(o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(o[1],10),r=parseInt(o[2],10),i=parseInt(o[3],10)):(o=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(o[1],16),r=parseInt(o[2],16),i=parseInt(o[3],16)):(o=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),i=parseInt(o[3]+o[3],16)),n=n<0?0:255<n?255:n,r=r<0?0:255<r?255:r,i=i<0?0:255<i?255:i,t};return e&&o(e),t.toRgb=function(){return{r:n,g:r,b:i}},t.toHsv=function(){return e=n,t=r,o=i,s=0,(l=$b(e/=255,$b(t/=255,o/=255)))===(u=Gb(e,Gb(t,o)))?{h:0,s:0,v:100*(s=l)}:(a=(u-l)/u,{h:Kb(60*((e===l?3:o===l?1:5)-(e===l?t-o:o===l?e-t:o-e)/((s=u)-l))),s:Kb(100*a),v:Kb(100*s)});var e,t,o,a,s,l,u},t.toHex=function(){var e=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+e(n)+e(r)+e(i)},t.parse=o,t}},dom:{EventUtils:Te,Sizzle:Tt,DomQuery:pn,TreeWalker:Xr,DOMUtils:ao,ScriptLoader:fo,RangeUtils:Pb,Serializer:Ag,ControlSelection:Hg,BookmarkManager:Bg,Selection:sv,Event:Te.Event},html:{Styles:Ki,Entities:Bi,Node:gg,Schema:$i,SaxParser:Vp,DomParser:_g,Writer:Ru,Serializer:Pu},ui:{Factory:Yb},Env:fe,AddOnManager:mo,Annotator:Nu,Formatter:ag,UndoManager:tm,EditorCommands:th,WindowManager:Ph,NotificationManager:Rh,EditorObservable:ph,Shortcuts:bh,Editor:sb,FocusManager:fb,EditorManager:Mb,DOM:ao.DOM,ScriptLoader:fo.ScriptLoader,PluginManager:mo.PluginManager,ThemeManager:mo.ThemeManager,trim:Gt.trim,isArray:Gt.isArray,is:Gt.is,toArray:Gt.toArray,makeMap:Gt.makeMap,each:Gt.each,map:Gt.map,grep:Gt.grep,inArray:Gt.inArray,extend:Gt.extend,create:Gt.create,walk:Gt.walk,createNS:Gt.createNS,resolve:Gt.resolve,explode:Gt.explode,_addCacheSuffix:Gt._addCacheSuffix,isOpera:fe.opera,isWebKit:fe.webkit,isIE:fe.ie,isGecko:fe.gecko,isMac:fe.mac});aw=sw,window.tinymce=aw,window.tinyMCE=aw,function(e){if("object"==typeof module)try{module.exports=e}catch(e){}}(sw)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.CodeMirror=t()}(this,function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),a=r||i||o,s=a&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\//.test(e),u=l&&/Qt\/\d+\.\d+/.test(e),c=!o&&/Chrome\//.test(e),f=/Opera\//.test(e),d=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),m=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=m||/Mac/.test(t),b=/\bCrOS\b/.test(e),w=/win/i.test(t),C=f&&e.match(/Version\/(\d*\.\d*)/);C&&(C=Number(C[1])),C&&C>=15&&(f=!1,l=!0);var x=y&&(u||f&&(null==C||C<12.11)),S=n||a&&s>=9;function k(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var T,N=function(e,t){var n=e.className,r=k(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function _(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function E(e,t){return _(e).appendChild(t)}function D(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function O(e,t,n,r){var i=D(e,t,n,r);return i.setAttribute("role","presentation"),i}function M(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function A(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function L(e,t){var n=e.className;k(t).test(n)||(e.className+=(n?" ":"")+t)}function R(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!k(n[r]).test(t)&&(t+=" "+n[r]);return t}T=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var P=function(e){e.select()};function B(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function I(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function F(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,a=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}}m?P=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(P=function(e){try{e.select()}catch(e){}});var H=function(){this.id=null};function W(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}H.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var z=30,U={toString:function(){return"CodeMirror.Pass"}},Y={scroll:!1},V={origin:"*mouse"},j={origin:"+move"};function q(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var $=[""];function G(e){for(;$.length<=e;)$.push(K($)+" ");return $[e]}function K(e){return e[e.length-1]}function X(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Z(){}function J(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&I(t,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&re.test(e)}function oe(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}function se(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function le(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function ue(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function ce(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function fe(e){if(null==e.parent)return null;for(var t=e.parent,n=W(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function de(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a].height;if(t<s)break;t-=s}return n+a}function he(e,t){return t>=e.first&&t<e.first+e.size}function pe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function me(e,t,n){if(void 0===n&&(n=null),!(this instanceof me))return new me(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ge(e,t){return e.line-t.line||e.ch-t.ch}function ve(e,t){return e.sticky==t.sticky&&0==ge(e,t)}function ye(e){return me(e.line,e.ch)}function be(e,t){return ge(e,t)<0?t:e}function we(e,t){return ge(e,t)<0?e:t}function Ce(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function xe(e,t){if(t.line<e.first)return me(e.first,0);var n=e.first+e.size-1;return t.line>n?me(n,se(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?me(e.line,t):n<0?me(e.line,0):e}(t,se(e,t.line).text.length)}function Se(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=xe(e,t[r]);return n}var ke=!1,Te=!1;function Ne(e,t,n){this.marker=e,this.from=t,this.to=n}function _e(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Ee(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function De(e,t){if(t.full)return null;var n=he(e,t.from.line)&&se(e,t.from.line).markedSpans,r=he(e,t.to.line)&&se(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==ge(t.from,t.to),s=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;null!=o.from&&!(a.inclusiveLeft?o.from<=t:o.from<t)&&(o.from!=t||"bookmark"!=a.type||n&&o.marker.insertLeft)||(r||(r=[])).push(new Ne(a,o.from,null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)?null:o.to))}return r}(n,i,a),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft))&&(r||(r=[])).push(new Ne(a,null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)?null:o.from-t,null==o.to?null:o.to-t))}return r}(r,o,a),u=1==t.text.length,c=K(t.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){var d=s[f];if(null==d.to){var h=_e(l,d.marker);h?u&&(d.to=null==h.to?null:h.to+c):d.to=i}}if(l)for(var p=0;p<l.length;++p){var m=l[p];null!=m.to&&(m.to+=c),null==m.from?_e(s,m.marker)||(m.from=c,u&&(s||(s=[])).push(m)):(m.from+=c,u&&(s||(s=[])).push(m))}s&&(s=Oe(s)),l&&l!=s&&(l=Oe(l));var g=[s];if(!u){var v,y=t.text.length-2;if(y>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(v||(v=[])).push(new Ne(s[b].marker,null,null));for(var w=0;w<y;++w)g.push(v);g.push(l)}return g}function Oe(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Me(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Ae(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Le(e){return e.inclusiveLeft?-1:0}function Re(e){return e.inclusiveRight?1:0}function Pe(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=ge(r.from,i.from)||Le(e)-Le(t);return o?-o:ge(r.to,i.to)||Re(e)-Re(t)||t.id-e.id}function Be(e,t){var n,r=Te&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Pe(n,i.marker)<0)&&(n=i.marker);return n}function Ie(e){return Be(e,!0)}function Fe(e){return Be(e,!1)}function He(e,t){var n,r=Te&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Pe(n,o.marker)<0)&&(n=o.marker)}return n}function We(e,t,n,r,i){var o=se(e,t),a=Te&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=ge(u.from,n)||Le(l.marker)-Le(i),f=ge(u.to,r)||Re(l.marker)-Re(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ge(u.to,n)>=0:ge(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ge(u.from,r)<=0:ge(u.from,r)<0)))return!0}}}function ze(e){for(var t;t=Ie(e);)e=t.find(-1,!0).line;return e}function Ue(e,t){var n=se(e,t),r=ze(n);return n==r?t:fe(r)}function Ye(e,t){if(t>e.lastLine())return t;var n,r=se(e,t);if(!Ve(e,r))return t;for(;n=Fe(r);)r=n.find(1,!0).line;return fe(r)+1}function Ve(e,t){var n=Te&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&je(e,t,r))return!0}}function je(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return je(e,r.line,_e(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&je(e,t,i))return!0}function qe(e){for(var t=0,n=(e=ze(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function $e(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Ie(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Fe(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Ge(e){var t=e.display,n=e.doc;t.maxLine=se(n,n.first),t.maxLineLength=$e(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=$e(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var Ke=null;function Xe(e,t,n){var r;Ke=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:Ke=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:Ke=i)}return null!=r?r:Ke}var Ze=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function o(e,t,n){this.level=e,this.from=t,this.to=n}return function(a,s){var l="ltr"==s?"L":"R";if(0==a.length||"ltr"==s&&!e.test(a))return!1;for(var u,c=a.length,f=[],d=0;d<c;++d)f.push((u=a.charCodeAt(d))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var h=0,p=l;h<c;++h){var m=f[h];"m"==m?f[h]=p:p=m}for(var g=0,v=l;g<c;++g){var y=f[g];"1"==y&&"r"==v?f[g]="n":n.test(y)&&(v=y,"r"==y&&(f[g]="R"))}for(var b=1,w=f[0];b<c-1;++b){var C=f[b];"+"==C&&"1"==w&&"1"==f[b+1]?f[b]="1":","!=C||w!=f[b+1]||"1"!=w&&"n"!=w||(f[b]=w),w=C}for(var x=0;x<c;++x){var S=f[x];if(","==S)f[x]="N";else if("%"==S){var k=void 0;for(k=x+1;k<c&&"%"==f[k];++k);for(var T=x&&"!"==f[x-1]||k<c&&"1"==f[k]?"1":"N",N=x;N<k;++N)f[N]=T;x=k-1}}for(var _=0,E=l;_<c;++_){var D=f[_];"L"==E&&"1"==D?f[_]="L":n.test(D)&&(E=D)}for(var O=0;O<c;++O)if(t.test(f[O])){var M=void 0;for(M=O+1;M<c&&t.test(f[M]);++M);for(var A="L"==(O?f[O-1]:l),L=A==("L"==(M<c?f[M]:l))?A?"L":"R":l,R=O;R<M;++R)f[R]=L;O=M-1}for(var P,B=[],I=0;I<c;)if(r.test(f[I])){var F=I;for(++I;I<c&&r.test(f[I]);++I);B.push(new o(0,F,I))}else{var H=I,W=B.length;for(++I;I<c&&"L"!=f[I];++I);for(var z=H;z<I;)if(i.test(f[z])){H<z&&B.splice(W,0,new o(1,H,z));var U=z;for(++z;z<I&&i.test(f[z]);++z);B.splice(W,0,new o(2,U,z)),H=z}else++z;H<I&&B.splice(W,0,new o(1,H,I))}return"ltr"==s&&(1==B[0].level&&(P=a.match(/^\s+/))&&(B[0].from=P[0].length,B.unshift(new o(0,0,P[0].length))),1==K(B).level&&(P=a.match(/\s+$/))&&(K(B).to-=P[0].length,B.push(new o(0,c-P[0].length,c)))),"rtl"==s?B.reverse():B}}();function Je(e,t){var n=e.order;return null==n&&(n=e.order=Ze(e.text,t)),n}var Qe=[],et=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Qe).concat(n)}};function tt(e,t){return e._handlers&&e._handlers[t]||Qe}function nt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=W(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function rt(e,t){var n=tt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function it(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),rt(e,n||t.type,e,t),ct(t)||t.codemirrorIgnore}function ot(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==W(n,t[r])&&n.push(t[r])}function at(e,t){return tt(e,t).length>0}function st(e){e.prototype.on=function(e,t){et(this,e,t)},e.prototype.off=function(e,t){nt(this,e,t)}}function lt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ut(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ct(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ft(e){lt(e),ut(e)}function dt(e){return e.target||e.srcElement}function ht(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var pt,mt,gt=function(){if(a&&s<9)return!1;var e=D("div");return"draggable"in e||"dragDrop"in e}();function vt(e){if(null==pt){var t=D("span","\u200b");E(e,D("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(pt=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&s<8))}var n=pt?D("span","\u200b"):D("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function yt(e){if(null!=mt)return mt;var t=E(e,document.createTextNode("A\u062eA")),n=T(t,0,1).getBoundingClientRect(),r=T(t,1,2).getBoundingClientRect();return _(e),!(!n||n.left==n.right)&&(mt=r.right-n.right<3)}var bt,wt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ct=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},xt="oncopy"in(bt=D("div"))||(bt.setAttribute("oncopy","return;"),"function"==typeof bt.oncopy),St=null,kt={},Tt={};function Nt(e){if("string"==typeof e&&Tt.hasOwnProperty(e))e=Tt[e];else if(e&&"string"==typeof e.name&&Tt.hasOwnProperty(e.name)){var t=Tt[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Nt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Nt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function _t(e,t){t=Nt(t);var n=kt[t.name];if(!n)return _t(e,"text/plain");var r=n(e,t);if(Et.hasOwnProperty(t.name)){var i=Et[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var Et={};function Dt(e,t){I(t,Et.hasOwnProperty(e)?Et[e]:Et[e]={})}function Ot(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Mt(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function At(e,t,n){return!e.startState||e.startState(t,n)}var Lt=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Lt.prototype.eol=function(){return this.pos>=this.string.length},Lt.prototype.sol=function(){return this.pos==this.lineStart},Lt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Lt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Lt.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Lt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Lt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Lt.prototype.skipToEnd=function(){this.pos=this.string.length},Lt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Lt.prototype.backUp=function(e){this.pos-=e},Lt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Lt.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},Lt.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Lt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Lt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Lt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Lt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Rt=function(e,t){this.state=e,this.lookAhead=t},Pt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Bt(e,t,n,r){var i=[e.state.modeGen],o={};jt(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},o,r);for(var a=n.state,s=function(r){n.baseTokens=i;var s=e.state.overlays[r],l=1,u=0;n.state=!0,jt(e,t.text,s.mode,n,function(e,t){for(var n=l;u<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,u=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}},o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)s(l);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function It(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Ft(e,fe(t)),i=t.text.length>e.options.maxHighlightLength&&Ot(e.doc.mode,r.state),o=Bt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ft(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Pt(r,!0,t);var o=function(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=se(o,s-1),u=l.stateAfter;if(u&&(!n||s+(u instanceof Rt?u.lookAhead:0)<=o.modeFrontier))return s;var c=F(l.text,null,e.options.tabSize);(null==i||r>c)&&(i=s-1,r=c)}return i}(e,t,n),a=o>r.first&&se(r,o-1).stateAfter,s=a?Pt.fromSaved(r,a,o):new Pt(r,At(r.mode),o);return r.iter(o,t,function(n){Ht(e,n.text,s);var r=s.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()}),n&&(r.modeFrontier=s.line),s}function Ht(e,t,n,r){var i=e.doc.mode,o=new Lt(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&Wt(i,n.state);!o.eol();)zt(i,o,n.state),o.start=o.pos}function Wt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Mt(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function zt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Mt(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}Pt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Pt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Pt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Pt.fromSaved=function(e,t,n){return t instanceof Rt?new Pt(e,Ot(e.mode,t.state),n,t.lookAhead):new Pt(e,Ot(e.mode,t),n)},Pt.prototype.save=function(e){var t=!1!==e?Ot(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Rt(t,this.maxLookAhead):t};var Ut=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Yt(e,t,n,r){var i,o,a=e.doc,s=a.mode,l=se(a,(t=xe(a,t)).line),u=Ft(e,t.line,n),c=new Lt(l.text,e.options.tabSize,u);for(r&&(o=[]);(r||c.pos<t.ch)&&!c.eol();)c.start=c.pos,i=zt(s,c,u.state),r&&o.push(new Ut(c,i,Ot(a.mode,u.state)));return r?o:new Ut(c,i,u.state)}function Vt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function jt(e,t,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,u=0,c=null,f=new Lt(t,e.options.tabSize,r),d=e.options.addModeClass&&[null];for(""==t&&Vt(Wt(n,r.state),o);!f.eol();){if(f.pos>e.options.maxHighlightLength?(s=!1,a&&Ht(e,t,r,f.pos),f.pos=t.length,l=null):l=Vt(zt(n,f,r.state,d),o),d){var h=d[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||c!=l){for(;u<f.start;)i(u=Math.min(f.start,u+5e3),c);c=l}f.start=f.pos}for(;u<f.pos;){var p=Math.min(f.pos,u+5e3);i(p,c),u=p}}var qt=function(e,t,n){this.text=e,Ae(this,t),this.height=n?n(this):1};function $t(e){e.parent=null,Me(e)}qt.prototype.lineNo=function(){return fe(this)},st(qt);var Gt={},Kt={};function Xt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Kt:Gt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Zt(e,t){var n=O("span",null,null,l?"padding-right: .1px":null),r={pre:O("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,a=void 0;r.pos=0,r.addToken=Qt,yt(e.display.measure)&&(a=Je(o,e.doc.direction))&&(r.addToken=en(r.addToken,a)),r.map=[],nn(o,r,It(e,o,t!=e.display.externalMeasured&&fe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=R(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=R(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(vt(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var s=r.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return rt(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=R(r.pre.className,r.textClass||"")),r}function Jt(e){var t=D("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,r,i,o,l){if(t){var u,c=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o="\xa0"),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,f=e.cm.state.specialChars,d=!1;if(f.test(t)){u=document.createDocumentFragment();for(var h=0;;){f.lastIndex=h;var p=f.exec(t),m=p?p.index-h:t.length-h;if(m){var g=document.createTextNode(c.slice(h,h+m));u.appendChild(a&&s<9?D("span",[g]):g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!p)break;h+=m+1;var v=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=u.appendChild(D("span",G(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=b}else"\r"==p[0]||"\n"==p[0]?((v=u.appendChild(D("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),u.appendChild(a&&s<9?D("span",[v]):v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,u=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,u),a&&s<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),n||r||i||d||o){var w=n||"";r&&(w+=r),i&&(w+=i);var C=D("span",[u],w,o);if(l)for(var x in l)l.hasOwnProperty(x)&&"style"!=x&&"class"!=x&&C.setAttribute(x,l[x]);return e.content.appendChild(C)}e.content.appendChild(u)}}function en(e,t){return function(n,r,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+r.length;;){for(var f=void 0,d=0;d<t.length&&!((f=t[d]).to>u&&f.from<=u);d++);if(f.to>=c)return e(n,r,i,o,a,s,l);e(n,r.slice(0,f.to-u),i,o,null,s,l),o=null,r=r.slice(f.to-u),u=f.to}}}function tn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,u,c,f,d,h=i.length,p=0,m=1,g="",v=0;;){if(v==p){l=u=c=s="",d=null,f=null,v=1/0;for(var y=[],b=void 0,w=0;w<r.length;++w){var C=r[w],x=C.marker;if("bookmark"==x.type&&C.from==p&&x.widgetNode)y.push(x);else if(C.from<=p&&(null==C.to||C.to>p||x.collapsed&&C.to==p&&C.from==p)){if(null!=C.to&&C.to!=p&&v>C.to&&(v=C.to,u=""),x.className&&(l+=" "+x.className),x.css&&(s=(s?s+";":"")+x.css),x.startStyle&&C.from==p&&(c+=" "+x.startStyle),x.endStyle&&C.to==v&&(b||(b=[])).push(x.endStyle,C.to),x.title&&((d||(d={})).title=x.title),x.attributes)for(var S in x.attributes)(d||(d={}))[S]=x.attributes[S];x.collapsed&&(!f||Pe(f.marker,x)<0)&&(f=C)}else C.from>p&&v>C.from&&(v=C.from)}if(b)for(var k=0;k<b.length;k+=2)b[k+1]==v&&(u+=" "+b[k]);if(!f||f.from==p)for(var T=0;T<y.length;++T)tn(t,0,y[T]);if(f&&(f.from||0)==p){if(tn(t,(null==f.to?h+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=h)break;for(var N=Math.min(h,v);;){if(g){var _=p+g.length;if(!f){var E=_>N?g.slice(0,N-p):g;t.addToken(t,E,a?a+l:l,c,p+E.length==v?u:"",s,d)}if(_>=N){g=g.slice(N-p),p=N;break}p=_,c=""}g=i.slice(o,o=n[m++]),a=Xt(n[m++],t.cm.options)}}else for(var D=1;D<n.length;D+=2)t.addToken(t,i.slice(o,o=n[D]),Xt(n[D+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Fe(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?fe(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Ve(e,t)}function on(e,t,n){for(var r,i=[],o=t;o<n;o=r){var a=new rn(e.doc,se(e.doc,o),o);r=o+a.size,i.push(a)}return i}var an=null,sn=null;function ln(e,t){var n=tt(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);an?r=an.delayedCallbacks:sn?r=sn:(r=sn=[],setTimeout(un,0));for(var o=function(e){r.push(function(){return n[e].apply(null,i)})},a=0;a<n.length;++a)o(a)}}function un(){var e=sn;sn=null;for(var t=0;t<e.length;++t)e[t]()}function cn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?hn(e,t):"gutter"==o?mn(e,t,n,r):"class"==o?pn(e,t):"widget"==o&&gn(e,t,r)}t.changes=null}function fn(e){return e.node==e.text&&(e.node=D("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&s<8&&(e.node.style.zIndex=2)),e.node}function dn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Zt(e,t)}function hn(e,t){var n=t.text.className,r=dn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,pn(e,t)):n&&(t.text.className=n)}function pn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=fn(t);t.background=r.insertBefore(D("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?fn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function mn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=fn(t);t.gutterBackground=D("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=fn(t),s=t.gutter=D("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),a.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(D("div",pe(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.options.gutters.length;++l){var u=e.options.gutters[l],c=o.hasOwnProperty(u)&&o[u];c&&s.appendChild(D("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[u]+"px; width: "+r.gutterWidth[u]+"px"))}}}function gn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);yn(e,t,n)}function vn(e,t,n,r){var i=dn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),pn(e,t),mn(e,t,n,r),yn(e,t,r),t.node}function yn(e,t,n){if(bn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)bn(e,t.rest[r],t,n,!1)}function bn(e,t,n,r,i){if(t.widgets)for(var o=fn(n),a=0,s=t.widgets;a<s.length;++a){var l=s[a],u=D("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),wn(l,u,n,r),e.display.input.setUneditable(u),i&&l.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),ln(l,"redraw")}}function wn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function Cn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!M(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),E(t.display.measure,D("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function xn(e,t){for(var n=dt(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Sn(e){return e.lineSpace.offsetTop}function kn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Tn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=E(e.measure,D("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Nn(e){return z-e.display.nativeBarWidth}function _n(e){return e.display.scroller.clientWidth-Nn(e)-e.display.barWidth}function En(e){return e.display.scroller.clientHeight-Nn(e)-e.display.barHeight}function Dn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(fe(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function On(e,t,n,r){return Ln(e,An(e,t),n,r)}function Mn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[lr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function An(e,t){var n=fe(t),r=Mn(e,n);r&&!r.text?r=null:r&&r.changes&&(cn(e,r,n,rr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=fe(t=ze(t)),r=e.display.externalMeasured=new rn(e.doc,t,n);r.lineN=n;var i=r.built=Zt(e,r);return r.text=i.pre,E(e.display.lineMeasure,i.pre),r}(e,t));var i=Dn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Ln(e,t,n,r,i){t.before&&(n=-1);var o,l=n+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&_n(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Bn(t.map,n,r),l=o.node,u=o.start,c=o.end,f=o.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;u&&ie(t.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+c));)++c;if((i=a&&s<9&&0==u&&c==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():In(T(l,u,c).getClientRects(),r)).left||i.right||0==u)break;c=u,u-=1,f="right"}a&&s<11&&(i=function(t,n){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=St)return St;var t=E(e,D("span","x")),n=t.getBoundingClientRect(),r=T(t,0,1).getBoundingClientRect();return St=Math.abs(n.left-r.left)>1}(e.display.measure))return n;var r=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*r,right:n.right*r,top:n.top*i,bottom:n.bottom*i}}(0,i))}else{var h;u>0&&(f=r="right"),i=e.options.lineWrapping&&(h=l.getClientRects()).length>1?h["right"==r?h.length-1:0]:l.getBoundingClientRect()}if(a&&s<9&&!u&&(!i||!i.left&&!i.right)){var p=l.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+nr(e.display),top:p.top,bottom:p.bottom}:Pn}for(var m=i.top-t.rect.top,g=i.bottom-t.rect.top,v=(m+g)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var w={left:("right"==f?i.right:i.left)-t.rect.left,right:("left"==f?i.left:i.right)-t.rect.left,top:b?y[b-1]:0,bottom:y[b]};return i.left||i.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}(e,t,n,r)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Rn,Pn={left:0,right:0,top:0,bottom:0};function Bn(e,t,n){for(var r,i,o,a,s,l,u=0;u<e.length;u+=3)if(l=e[u+1],t<(s=e[u])?(i=0,o=1,a="left"):t<l?o=1+(i=t-s):(u==e.length-3||t==l&&e[u+3]>t)&&(i=(o=l-s)-1,t>=l&&(a="right")),null!=i){if(r=e[u+2],s==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)r=e[2+(u-=3)],a="left";if("right"==n&&i==l-s)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)r=e[(u+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:l}}function In(e,t){var n=Pn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function Fn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Hn(e){e.display.externalMeasure=null,_(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Fn(e.display.view[t])}function Wn(e){Hn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function zn(){return c&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Un(){return c&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Yn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=Cn(e.widgets[n]));return t}function Vn(e,t,n,r,i){if(!i){var o=Yn(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=qe(t);if("local"==r?a+=Sn(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:Un());var l=s.left+("window"==r?0:zn());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function jn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=zn(),i-=Un();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function qn(e,t,n,r,i){return r||(r=se(e.doc,t.line)),Vn(e,r,On(e,r,t.ch,i),n)}function $n(e,t,n,r,i,o){function a(t,a){var s=Ln(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Vn(e,r,s,n)}r=r||se(e.doc,t.line),i||(i=An(e,r));var s=Je(r,e.doc.direction),l=t.ch,u=t.sticky;if(l>=r.text.length?(l=r.text.length,u="before"):l<=0&&(l=0,u="after"),!s)return a("before"==u?l-1:l,"before"==u);function c(e,t,n){return a(n?e-1:e,1==s[t].level!=n)}var f=Xe(s,l,u),d=Ke,h=c(l,f,"before"==u);return null!=d&&(h.other=c(l,d,"before"!=u)),h}function Gn(e,t){var n=0;t=xe(e.doc,t),e.options.lineWrapping||(n=nr(e.display)*t.ch);var r=se(e.doc,t.line),i=qe(r)+Sn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Kn(e,t,n,r,i){var o=me(e,t,n);return o.xRel=i,r&&(o.outside=!0),o}function Xn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Kn(r.first,0,null,!0,-1);var i=de(r,n),o=r.first+r.size-1;if(i>o)return Kn(r.first+r.size-1,se(r,o).text.length,null,!0,1);t<0&&(t=0);for(var a=se(r,i);;){var s=er(e,a,i,t,n),l=He(a,s.ch+(s.xRel>0?1:0));if(!l)return s;var u=l.find(1);if(u.line==i)return u;a=se(r,i=u.line)}}function Zn(e,t,n,r){r-=Yn(t);var i=t.text.length,o=ae(function(t){return Ln(e,n,t-1).bottom<=r},i,0);return{begin:o,end:i=ae(function(t){return Ln(e,n,t).top>r},o,i)}}function Jn(e,t,n,r){return n||(n=An(e,t)),Zn(e,t,n,Vn(e,t,Ln(e,n,r),"line").top)}function Qn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function er(e,t,n,r,i){i-=qe(t);var o=An(e,t),a=Yn(t),s=0,l=t.text.length,u=!0,c=Je(t,e.doc.direction);if(c){var f=(e.options.lineWrapping?function(e,t,n,r,i,o,a){var s=Zn(e,t,r,a),l=s.begin,u=s.end;/\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,f=null,d=0;d<i.length;d++){var h=i[d];if(!(h.from>=u||h.to<=l)){var p=Ln(e,r,1!=h.level?Math.min(u,h.to)-1:Math.max(l,h.from)).right,m=p<o?o-p+1e9:p-o;(!c||f>m)&&(c=h,f=m)}}return c||(c=i[i.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}:function(e,t,n,r,i,o,a){var s=ae(function(s){var l=i[s],u=1!=l.level;return Qn($n(e,me(n,u?l.to:l.from,u?"before":"after"),"line",t,r),o,a,!0)},0,i.length-1),l=i[s];if(s>0){var u=1!=l.level,c=$n(e,me(n,u?l.from:l.to,u?"after":"before"),"line",t,r);Qn(c,o,a,!0)&&c.top>a&&(l=i[s-1])}return l})(e,t,n,o,c,r,i);s=(u=1!=f.level)?f.from:f.to-1,l=u?f.to:f.from-1}var d,h,p=null,m=null,g=ae(function(t){var n=Ln(e,o,t);return n.top+=a,n.bottom+=a,!!Qn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(p=t,m=n),!0)},s,l),v=!1;if(m){var y=r-m.left<m.right-r,b=y==u;g=p+(b?0:1),h=b?"after":"before",d=y?m.left:m.right}else{u||g!=l&&g!=s||g++,h=0==g?"after":g==t.text.length?"before":Ln(e,o,g-(u?1:0)).bottom+a<=i==u?"after":"before";var w=$n(e,me(n,g,h),"line",t,o);d=w.left,v=i<w.top||i>=w.bottom}return Kn(n,g=oe(t.text,g,1),h,v,r-d)}function tr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Rn){Rn=D("pre");for(var t=0;t<49;++t)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(D("br"));Rn.appendChild(document.createTextNode("x"))}E(e.measure,Rn);var n=Rn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),_(e.measure),n||1}function nr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=D("span","xxxxxxxxxx"),n=D("pre",[t]);E(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function rr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[a]]=o.clientWidth;return{fixedPos:ir(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function ir(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function or(e){var t=tr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/nr(e.display)-3);return function(i){if(Ve(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function ar(e){var t=e.doc,n=or(e);t.iter(function(e){var t=n(e);t!=e.height&&ce(e,t)})}function sr(e,t,n,r){var i=e.display;if(!n&&"true"==dt(t).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var l,u=Xn(e,o,a);if(r&&1==u.xRel&&(l=se(e.doc,u.line).text).length==u.ch){var c=F(l,l.length,e.options.tabSize)-l.length;u=me(u.line,Math.max(0,Math.round((o-Tn(e.display).left)/nr(e.display))-c))}return u}function lr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function ur(e){e.display.input.showSelection(e.display.input.prepareSelection())}function cr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&fr(e,s.head,i),l||hr(e,s,o)}}return r}function fr(e,t,n){var r=$n(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(D("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(D("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function dr(e,t){return e.top-t.top||e.left-t.left}function hr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),a=Tn(e.display),s=a.left,l=Math.max(r.sizerWidth,_n(e)-r.sizer.offsetLeft)-a.right,u="ltr"==i.direction;function c(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(D("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function f(t,n,r){var o,a,f=se(i,t),d=f.text.length;function h(n,r){return qn(e,me(t,n),"div",f,r)}function p(t,n,r){var i=Jn(e,f,null,t),o="ltr"==n==("after"==r)?"left":"right";return h("after"==r?i.begin:i.end-(/\s/.test(f.text.charAt(i.end-1))?2:1),o)[o]}var m=Je(f,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(m,n||0,null==r?d:r,function(e,t,i,f){var g="ltr"==i,v=h(e,g?"left":"right"),y=h(t-1,g?"right":"left"),b=null==n&&0==e,w=null==r&&t==d,C=0==f,x=!m||f==m.length-1;if(y.top-v.top<=3){var S=(u?b:w)&&C?s:(g?v:y).left;c(S,v.top,((u?w:b)&&x?l:(g?y:v).right)-S,v.bottom)}else{var k,T,N,_;g?(k=u&&b&&C?s:v.left,T=u?l:p(e,i,"before"),N=u?s:p(t,i,"after"),_=u&&w&&x?l:y.right):(k=u?p(e,i,"before"):s,T=!u&&b&&C?l:v.right,N=!u&&w&&x?s:y.left,_=u?p(t,i,"after"):l),c(k,v.top,T-k,v.bottom),v.bottom<y.top&&c(s,v.bottom,null,y.top),c(N,y.top,_-N,y.bottom)}(!o||dr(v,o)<0)&&(o=v),dr(y,o)<0&&(o=y),(!a||dr(v,a)<0)&&(a=v),dr(y,a)<0&&(a=y)}),{start:o,end:a}}var d=t.from(),h=t.to();if(d.line==h.line)f(d.line,d.ch,h.ch);else{var p=se(i,d.line),m=se(i,h.line),g=ze(p)==ze(m),v=f(d.line,d.ch,g?p.text.length+1:null).end,y=f(h.line,g?0:null,h.ch).start;g&&(v.top<y.top-2?(c(v.right,v.top,null,v.bottom),c(s,y.top,y.left,y.bottom)):c(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&c(s,v.bottom,null,y.top)}n.appendChild(o)}function pr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function mr(e){e.state.focused||(e.display.input.focus(),vr(e))}function gr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,yr(e))},100)}function vr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(rt(e,"focus",e,t),e.state.focused=!0,L(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),pr(e))}function yr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(rt(e,"blur",e,t),e.state.focused=!1,N(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function br(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=e.options.lineWrapping,l=void 0,u=0;if(!i.hidden){if(a&&s<8){var c=i.node.offsetTop+i.node.offsetHeight;l=c-n,n=c}else{var f=i.node.getBoundingClientRect();l=f.bottom-f.top,!o&&i.text.firstChild&&(u=i.text.firstChild.getBoundingClientRect().right-f.left-1)}var d=i.line.height-l;if(l<2&&(l=tr(t)),(d>.005||d<-.005)&&(ce(i.line,l),wr(i.line),i.rest))for(var h=0;h<i.rest.length;h++)wr(i.rest[h]);if(u>e.display.sizerWidth){var p=Math.ceil(u/nr(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=i.line,e.display.maxLineChanged=!0)}}}}function wr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Cr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Sn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=de(t,r),a=de(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=de(t,qe(se(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=de(t,qe(se(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function xr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=ir(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Sr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=pe(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(D("div",[D("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",li(e),!0}return!1}function kr(e,t){var n=e.display,r=tr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=En(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+kn(n),l=t.bottom>s-r;if(t.top<i)a.scrollTop=t.top<r?0:t.top;else if(t.bottom>i+o){var u=Math.min(t.top,(l?s:t.bottom)-o);u!=i&&(a.scrollTop=u)}var c=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,f=_n(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),d=t.right-t.left>f;return d&&(t.right=t.left+f),t.left<10?a.scrollLeft=0:t.left<c?a.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>f+c-3&&(a.scrollLeft=t.right+(d?0:10)-f),a}function Tr(e,t){null!=t&&(Er(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Nr(e){Er(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function _r(e,t,n){null==t&&null==n||Er(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Er(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Dr(e,Gn(e,t.from),Gn(e,t.to),t.margin))}function Dr(e,t,n,r){var i=kr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});_r(e,i.scrollLeft,i.scrollTop)}function Or(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||si(e,{top:t}),Mr(e,t,!0),n&&si(e),ni(e,100))}function Mr(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Ar(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,xr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Lr(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+kn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Nn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Rr=function(e,t,n){this.cm=n;var r=this.vert=D("div",[D("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=D("div",[D("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),et(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),et(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Rr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?r:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Rr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Rr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Rr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=y&&!h?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new H,this.disableVert=new H},Rr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Rr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Pr=function(){};function Br(e,t){t||(t=Lr(e));var n=e.display.barWidth,r=e.display.barHeight;Ir(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&br(e),Ir(e,Lr(e)),n=e.display.barWidth,r=e.display.barHeight}function Ir(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Pr.prototype.update=function(){return{bottom:0,right:0}},Pr.prototype.setScrollLeft=function(){},Pr.prototype.setScrollTop=function(){},Pr.prototype.clear=function(){};var Fr={native:Rr,null:Pr};function Hr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&N(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Fr[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),et(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Ar(e,t):Or(e,t)},e),e.display.scrollbars.addClass&&L(e.display.wrapper,e.display.scrollbars.addClass)}var Wr=0;function zr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Wr},t=e.curOp,an?an.ops.push(t):t.ownsGroup=an={ops:[t],delayedCallbacks:[]}}function Ur(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{an=null,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Yr(t[n]);for(var r=0;r<t.length;r++)(i=t[r]).updatedDisplay=i.mustUpdate&&oi(i.cm,i.update);for(var i,o=0;o<t.length;o++)Vr(t[o]);for(var a=0;a<t.length;a++)jr(t[a]);for(var s=0;s<t.length;s++)qr(t[s])}(e)}(n)}}(t)}function Yr(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Nn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Nn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Ge(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ii(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Vr(e){var t=e.cm,n=t.display;e.updatedDisplay&&br(t),e.barMeasure=Lr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=On(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Nn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-_n(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function jr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Ar(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==A();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Br(t,e.barMeasure),e.updatedDisplay&&ui(t,e.barMeasure),e.selectionChanged&&pr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&mr(e.cm)}function qr(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&ai(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Mr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Ar(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!it(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=D("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Sn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Nn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?me(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?me(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,s=$n(e,t),l=n&&n!=t?$n(e,n):s,u=kr(e,i={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-r,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+r}),c=e.doc.scrollTop,f=e.doc.scrollLeft;if(null!=u.scrollTop&&(Or(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(a=!0)),null!=u.scrollLeft&&(Ar(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(a=!0)),!a)break}return i}(t,xe(r,e.scrollToPos.from),xe(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||rt(i[a],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&rt(o[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&rt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function $r(e,t){if(e.curOp)return t();zr(e);try{return t()}finally{Ur(e)}}function Gr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);zr(e);try{return t.apply(e,arguments)}finally{Ur(e)}}}function Kr(e){return function(){if(this.curOp)return e.apply(this,arguments);zr(this);try{return e.apply(this,arguments)}finally{Ur(this)}}}function Xr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);zr(t);try{return e.apply(this,arguments)}finally{Ur(t)}}}function Zr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Te&&Ue(e.doc,t)<i.viewTo&&Qr(e);else if(n<=i.viewFrom)Te&&Ye(e.doc,n+r)>i.viewFrom?Qr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Qr(e);else if(t<=i.viewFrom){var o=ei(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Qr(e)}else if(n>=i.viewTo){var a=ei(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):Qr(e)}else{var s=ei(e,t,t,-1),l=ei(e,n,n+r,1);s&&l?(i.view=i.view.slice(0,s.index).concat(on(e,s.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):Qr(e)}var u=i.externalMeasured;u&&(n<u.lineN?u.lineN+=r:t<u.lineN+u.size&&(i.externalMeasured=null))}function Jr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[lr(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==W(a,n)&&a.push(n)}}}function Qr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ei(e,t,n,r){var i,o=lr(e,t),a=e.display.view;if(!Te||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=e.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=t){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-t,o++}else i=s-t;t+=i,n+=i}for(;Ue(e.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function ti(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ni(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,B(ri,e))}function ri(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Ft(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(r.line>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength?Ot(t.mode,r.state):null,l=Bt(e,o,r,!0);s&&(r.state=s),o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var f=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),d=0;!f&&d<a.length;++d)f=a[d]!=o.styles[d];f&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&Ht(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ni(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&$r(e,function(){for(var t=0;t<i.length;t++)Jr(e,i[t],"text")})}}var ii=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Cr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=_n(e),this.force=n,this.dims=rr(e),this.events=[]};function oi(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Qr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ti(e))return!1;Sr(e)&&(Qr(e),t.dims=rr(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Te&&(o=Ue(e.doc,o),a=Ye(e.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=on(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=on(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(lr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(on(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,lr(e,n)))),r.viewTo=n}(e,o,a),n.viewOffset=qe(se(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var u=ti(e);if(!s&&0==u&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(e){if(e.hasFocus())return null;var t=A();if(!t||!M(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&M(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return u>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function s(t){var n=t.nextSibling;return l&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var u=r.view,c=r.viewFrom,f=0;f<u.length;f++){var d=u[f];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;a!=d.node;)a=s(a);var h=i&&null!=t&&t<=c&&d.lineNumber;d.changes&&(W(d.changes,"gutter")>-1&&(h=!1),cn(e,d,c,n)),h&&(_(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(pe(e.options,c)))),a=d.node.nextSibling}else{var p=vn(e,d,c,n);o.insertBefore(p,a)}c+=d.size}for(;a;)a=s(a)}(e,n.updateLineNumbers,t.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=A()&&(e.activeElt.focus(),e.anchorNode&&M(document.body,e.anchorNode)&&M(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(c),_(n.cursorDiv),_(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ni(e,400)),n.updateLineNumbers=null,!0}function ai(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=_n(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+kn(e.display)-En(e),n.top)}),t.visible=Cr(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&oi(e,t);r=!1){br(e);var i=Lr(e);ur(e),Br(e,i),ui(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function si(e,t){var n=new ii(e,t);if(oi(e,n)){br(e),ai(e,n);var r=Lr(e);ur(e),Br(e,r),ui(e,r),n.finish()}}function li(e){e.display.sizer.style.marginLeft=e.display.gutters.offsetWidth+"px"}function ui(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Nn(e)+"px"}function ci(e){var t=e.display.gutters,n=e.options.gutters;_(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(D("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",li(e)}function fi(e){var t=W(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}ii.prototype.signal=function(e,t){at(e,t)&&this.events.push(arguments)},ii.prototype.finish=function(){for(var e=0;e<this.events.length;e++)rt.apply(null,this.events[e])};var di=0,hi=null;function pi(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function mi(e){var t=pi(e);return t.x*=hi,t.y*=hi,t}function gi(e,t){var r=pi(t),i=r.x,o=r.y,a=e.display,s=a.scroller,u=s.scrollHeight>s.clientHeight;if(i&&s.scrollWidth>s.clientWidth||o&&u){if(o&&y&&l)e:for(var c=t.target,d=a.view;c!=s;c=c.parentNode)for(var h=0;h<d.length;h++)if(d[h].node==c){e.display.currentWheelTarget=c;break e}if(i&&!n&&!f&&null!=hi)return o&&u&&Or(e,Math.max(0,s.scrollTop+o*hi)),Ar(e,Math.max(0,s.scrollLeft+i*hi)),(!o||o&&u)&&lt(t),void(a.wheelStartX=null);if(o&&null!=hi){var p=o*hi,m=e.doc.scrollTop,g=m+a.wrapper.clientHeight;p<0?m=Math.max(0,m+p-50):g=Math.min(e.doc.height,g+p+50),si(e,{top:m,bottom:g})}di<20&&(null==a.wheelStartX?(a.wheelStartX=s.scrollLeft,a.wheelStartY=s.scrollTop,a.wheelDX=i,a.wheelDY=o,setTimeout(function(){if(null!=a.wheelStartX){var e=s.scrollLeft-a.wheelStartX,t=s.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(hi=(hi*di+n)/(di+1),++di)}},200)):(a.wheelDX+=i,a.wheelDY+=o))}}a?hi=-.53:n?hi=15:c?hi=-.7:d&&(hi=-1/3);var vi=function(e,t){this.ranges=e,this.primIndex=t};vi.prototype.primary=function(){return this.ranges[this.primIndex]},vi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!ve(n.anchor,r.anchor)||!ve(n.head,r.head))return!1}return!0},vi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new yi(ye(this.ranges[t].anchor),ye(this.ranges[t].head));return new vi(e,this.primIndex)},vi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},vi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ge(t,r.from())>=0&&ge(e,r.to())<=0)return n}return-1};var yi=function(e,t){this.anchor=e,this.head=t};function bi(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(e,t){return ge(e.from(),t.from())}),n=W(t,i);for(var o=1;o<t.length;o++){var a=t[o],s=t[o-1],l=ge(s.to(),a.from());if(r&&!a.empty()?l>0:l>=0){var u=we(s.from(),a.from()),c=be(s.to(),a.to()),f=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,t.splice(--o,2,new yi(f?c:u,f?u:c))}}return new vi(t,n)}function wi(e,t){return new vi([new yi(e,t||e)],0)}function Ci(e){return e.text?me(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function xi(e,t){if(ge(e,t.from)<0)return e;if(ge(e,t.to)<=0)return Ci(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Ci(t).ch-t.to.ch),me(n,r)}function Si(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new yi(xi(i.anchor,t),xi(i.head,t)))}return bi(e.cm,n,e.sel.primIndex)}function ki(e,t,n){return e.line==t.line?me(n.line,e.ch-t.ch+n.ch):me(n.line+(e.line-t.line),e.ch)}function Ti(e){e.doc.mode=_t(e.options,e.doc.modeOption),Ni(e)}function Ni(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ni(e,100),e.state.modeGen++,e.curOp&&Zr(e)}function _i(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ei(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Me(e),Ae(e,n);var i=r?r(e):1;i!=e.height&&ce(e,i)}(e,n,i,r),ln(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new qt(u[o],i(o),r));return n}var s=t.from,l=t.to,u=t.text,c=se(e,s.line),f=se(e,l.line),d=K(u),h=i(u.length-1),p=l.line-s.line;if(t.full)e.insert(0,a(0,u.length)),e.remove(u.length,e.size-u.length);else if(_i(e,t)){var m=a(0,u.length-1);o(f,f.text,h),p&&e.remove(s.line,p),m.length&&e.insert(s.line,m)}else if(c==f)if(1==u.length)o(c,c.text.slice(0,s.ch)+d+c.text.slice(l.ch),h);else{var g=a(1,u.length-1);g.push(new qt(d+c.text.slice(l.ch),h,r)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),e.insert(s.line+1,g)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+f.text.slice(l.ch),i(0)),e.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(f,d+f.text.slice(l.ch),h);var v=a(1,u.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,v)}ln(e,"change",e,t)}function Di(e,t,n){!function e(r,i,o){if(r.linked)for(var a=0;a<r.linked.length;++a){var s=r.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;n&&!l||(t(s.doc,l),e(s.doc,r,l))}}}(e,null,!0)}function Oi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ar(e),Ti(e),Mi(e),e.options.lineWrapping||Ge(e),e.options.mode=t.modeOption,Zr(e)}function Mi(e){("rtl"==e.doc.direction?L:N)(e.display.lineDiv,"CodeMirror-rtl")}function Ai(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Li(e,t){var n={from:ye(t.from),to:Ci(t),text:le(e,t.from,t.to)};return Ii(e,n,t.from.line,t.to.line+1),Di(e,function(e){return Ii(e,n,t.from.line,t.to.line+1)},!0),n}function Ri(e){for(;e.length&&K(e).ranges;)e.pop()}function Pi(e,t,n,r){var i=e.history;i.undone.length=0;var o,a,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Ri(e.done),K(e.done)):e.done.length&&!K(e.done).ranges?K(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),K(e.done)):void 0}(i,i.lastOp==r)))a=K(o.changes),0==ge(t.from,t.to)&&0==ge(t.from,a.to)?a.to=Ci(t):o.changes.push(Li(e,t));else{var l=K(i.done);for(l&&l.ranges||Bi(e.sel,i.done),o={changes:[Li(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||rt(e,"historyAdded")}function Bi(e,t){var n=K(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Ii(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function Fi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Hi(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Fi(n[i]));return r}(e,t),r=De(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function Wi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?vi.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var l=0;l<a.length;++l){var u=a[l],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var f in u)(c=f.match(/^spans_(\d+)$/))&&W(t,Number(c[1]))>-1&&(K(s)[f]=u[f],delete u[f])}}}return r}function zi(e,t,n,r){if(r){var i=e.anchor;if(n){var o=ge(t,i)<0;o!=ge(n,i)<0?(i=t,t=n):o!=ge(t,n)<0&&(t=n)}return new yi(i,t)}return new yi(n||t,t)}function Ui(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),$i(e,new vi([zi(e.sel.primary(),t,n,i)],0),r)}function Yi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=zi(e.sel.ranges[o],t[o],null,i);$i(e,bi(e.cm,r,e.sel.primIndex),n)}function Vi(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,$i(e,bi(e.cm,i,e.sel.primIndex),r)}function ji(e,t,n,r){$i(e,wi(t,n),r)}function qi(e,t,n){var r=e.history.done,i=K(r);i&&i.ranges?(r[r.length-1]=t,Gi(e,t,n)):$i(e,t,n)}function $i(e,t,n){Gi(e,t,n),function(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,K(i.done),t))?i.done[i.done.length-1]=t:Bi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Ri(i.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Gi(e,t,n){(at(e,"beforeSelectionChange")||e.cm&&at(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new yi(xe(e,t[n].anchor),xe(e,t[n].head))},origin:n&&n.origin};return rt(e,"beforeSelectionChange",e,r),e.cm&&rt(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?bi(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n)),Ki(e,Zi(e,t,n&&n.bias||(ge(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||Nr(e.cm)}function Ki(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ot(e.cm)),ln(e,"cursorActivity",e))}function Xi(e){Ki(e,Zi(e,e.sel,null,!1))}function Zi(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=Qi(e,a.anchor,s&&s.anchor,n,r),u=Qi(e,a.head,s&&s.head,n,r);(i||l!=a.anchor||u!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new yi(l,u))}return i?bi(e.cm,i,t.primIndex):t}function Ji(e,t,n,r,i){var o=se(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(rt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var u=l.find(r<0?1:-1),c=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(u=eo(e,u,-r,u&&u.line==t.line?o:null)),u&&u.line==t.line&&(c=ge(u,n))&&(r<0?c<0:c>0))return Ji(e,u,t,r,i)}var f=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(f=eo(e,f,r,f.line==t.line?o:null)),f?Ji(e,f,t,r,i):null}}return t}function Qi(e,t,n,r,i){var o=r||1;return Ji(e,t,n,o,i)||!i&&Ji(e,t,n,o,!0)||Ji(e,t,n,-o,i)||!i&&Ji(e,t,n,-o,!0)||(e.cantEdit=!0,me(e.first,0))}function eo(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?xe(e,me(t.line-1)):null:n>0&&t.ch==(r||se(e,t.line)).text.length?t.line<e.first+e.size-1?me(t.line+1,0):null:new me(t.line,t.ch+n)}function to(e){e.setSelection(me(e.firstLine(),0),me(e.lastLine()),Y)}function no(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=xe(e,t)),n&&(r.to=xe(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),rt(e,"beforeChange",e,r),e.cm&&rt(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function ro(e,t,n){if(e.cm){if(!e.cm.curOp)return Gr(e.cm,ro)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(at(e,"beforeChange")||e.cm&&at(e.cm,"beforeChange"))||(t=no(e,t,!0))){var r=ke&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=W(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var u=i[l];if(!(ge(u.to,s.from)<0||ge(u.from,s.to)>0)){var c=[l,1],f=ge(u.from,s.from),d=ge(u.to,s.to);(f<0||!a.inclusiveLeft&&!f)&&c.push({from:u.from,to:s.from}),(d>0||!a.inclusiveRight&&!d)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),l+=c.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)io(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else io(e,t)}}function io(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ge(t.from,t.to)){var n=Si(e,t);Pi(e,t,n,e.cm?e.cm.curOp.id:NaN),so(e,t,n,De(e,t));var r=[];Di(e,function(e,n){n||-1!=W(r,e.history)||(fo(e.history,t),r.push(e.history)),so(e,t,null,De(e,t))})}}function oo(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,o=e.history,a=e.sel,s="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,u=0;u<s.length&&(i=s[u],n?!i.ranges||i.equals(e.sel):i.ranges);u++);if(u!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(r)return void s.push(i);break}if(Bi(i,l),n&&!i.equals(e.sel))return void $i(e,i,{clearRedo:!1});a=i}var c=[];Bi(a,l),l.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var f=at(e,"beforeChange")||e.cm&&at(e.cm,"beforeChange"),d=function(n){var r=i.changes[n];if(r.origin=t,f&&!no(e,r,!1))return s.length=0,{};c.push(Li(e,r));var o=n?Si(e,r):K(s);so(e,r,o,Hi(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Ci(r)});var a=[];Di(e,function(e,t){t||-1!=W(a,e.history)||(fo(e.history,r),a.push(e.history)),so(e,r,null,Hi(e,r))})},h=i.changes.length-1;h>=0;--h){var p=d(h);if(p)return p.v}}}}function ao(e,t){if(0!=t&&(e.first+=t,e.sel=new vi(X(e.sel.ranges,function(e){return new yi(me(e.anchor.line+t,e.anchor.ch),me(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Zr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Jr(e.cm,r,"gutter")}}function so(e,t,n,r){if(e.cm&&!e.cm.curOp)return Gr(e.cm,so)(e,t,n,r);if(t.to.line<e.first)ao(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ao(e,i),t={from:me(e.first,0),to:me(t.to.line+i,t.to.ch),text:[K(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:me(o,se(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=le(e,t.from,t.to),n||(n=Si(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,a=t.to,s=!1,l=o.line;e.options.lineWrapping||(l=fe(ze(se(r,o.line))),r.iter(l,a.line+1,function(e){if(e==i.maxLine)return s=!0,!0})),r.sel.contains(t.from,t.to)>-1&&ot(e),Ei(r,t,n,or(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,function(e){var t=$e(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=se(e,r).stateAfter;if(i&&(!(i instanceof Rt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,o.line),ni(e,400);var u=t.text.length-(a.line-o.line)-1;t.full?Zr(e):o.line!=a.line||1!=t.text.length||_i(e.doc,t)?Zr(e,o.line,a.line+1,u):Jr(e,o.line,"text");var c=at(e,"changes"),f=at(e,"change");if(f||c){var d={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};f&&ln(e,"change",e,d),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}(e.cm,t,r):Ei(e,t,r),Gi(e,n,Y)}}function lo(e,t,n,r,i){var o;r||(r=n),ge(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),ro(e,{from:n,to:r,text:t,origin:i})}function uo(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function co(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)uo(o.ranges[s].anchor,t,n,r),uo(o.ranges[s].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=me(u.from.line+r,u.from.ch),u.to=me(u.to.line+r,u.to.ch);else if(t<=u.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function fo(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;co(e.done,n,r,i),co(e.undone,n,r,i)}function ho(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=se(e,Ce(e,t)):i=fe(t),null==i?null:(r(o,i)&&e.cm&&Jr(e.cm,i,n),o)}function po(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function mo(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}yi.prototype.from=function(){return we(this.anchor,this.head)},yi.prototype.to=function(){return be(this.anchor,this.head)},yi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},po.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,$t(i),ln(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},mo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof po))){var s=[];this.collapse(s),this.children=[new po(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var l=new po(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new mo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=W(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new mo(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var go=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function vo(e,t,n){qe(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Tr(e,n)}go.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=fe(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=Cn(this);ce(n,Math.max(0,n.height-o)),e&&($r(e,function(){vo(e,n,-o),Jr(e,r,"widget")}),ln(e,"lineWidgetCleared",e,this,r))}},go.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=Cn(this)-t;i&&(Ve(this.doc,r)||ce(r,r.height+i),n&&$r(n,function(){n.curOp.forceUpdate=!0,vo(n,r,i),ln(n,"lineWidgetChanged",n,e,fe(r))}))},st(go);var yo=0,bo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++yo};function wo(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=I(r)).shared=!1;var o=[wo(e,t,n,r,i)],a=o[0],s=r.widgetNode;return Di(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(wo(e,xe(e,t),xe(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=K(o)}),new Co(o,a)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Gr(e.cm,wo)(e,t,n,r,i);var o=new bo(e,i),a=ge(t,n);if(r&&I(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=O("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(We(e,t.line,t,n,o)||t.line!=n.line&&We(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Te=!0}o.addToHistory&&Pi(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,u=e.cm;if(e.iter(l,n.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&ze(e)==u.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&ce(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Ne(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Ve(e,t)&&ce(t,0)}),o.clearOnEnter&&et(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(ke=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++yo,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)Zr(u,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=t.line;c<=n.line;c++)Jr(u,c,"text");o.atomic&&Xi(u.doc),ln(u,"markerAdded",u,o)}return o}bo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&zr(e),at(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=_e(a.markedSpans,this);e&&!this.collapsed?Jr(e,fe(a),"text"):e&&(null!=s.to&&(i=fe(a)),null!=s.from&&(r=fe(a))),a.markedSpans=Ee(a.markedSpans,s),null==s.from&&this.collapsed&&!Ve(this.doc,a)&&e&&ce(a,tr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=ze(this.lines[l]),c=$e(u);c>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Zr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Xi(e.doc)),e&&ln(e,"markerCleared",e,this,r,i),t&&Ur(e),this.parent&&this.parent.clear()}},bo.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=_e(o.markedSpans,this);if(null!=a.from&&(n=me(t?o:fe(o),a.from),-1==e))return n;if(null!=a.to&&(r=me(t?o:fe(o),a.to),1==e))return r}return n&&{from:n,to:r}},bo.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&$r(r,function(){var i=t.line,o=fe(t.line),a=Mn(r,o);if(a&&(Fn(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Ve(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var l=Cn(n)-s;l&&ce(i,i.height+l)}ln(r,"markerChanged",r,e)})},bo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=W(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},bo.prototype.detachLine=function(e){if(this.lines.splice(W(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},st(bo);var Co=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function xo(e){return e.findMarks(me(e.first,0),e.clipPos(me(e.lastLine())),function(e){return e.parent})}function So(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Di(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==W(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}Co.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ln(this,"clear")}},Co.prototype.find=function(e,t){return this.primary.find(e,t)},st(Co);var ko=0,To=function(e,t,n,r,i){if(!(this instanceof To))return new To(e,t,n,r,i);null==n&&(n=0),mo.call(this,[new po([new qt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=me(n,0);this.sel=wi(o),this.history=new Ai(null),this.id=++ko,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Ei(this,{from:o,to:o,text:e}),$i(this,wi(o),Y)};To.prototype=J(mo.prototype,{constructor:To,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ue(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Xr(function(e){var t=me(this.first,0),n=this.first+this.size-1;ro(this,{from:t,to:me(n,se(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&_r(this.cm,0,0),$i(this,wi(t),Y)}),replaceRange:function(e,t,n,r){lo(this,e,t=xe(this,t),n=n?xe(this,n):t,r)},getRange:function(e,t,n){var r=le(this,xe(this,e),xe(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(he(this,e))return se(this,e)},getLineNumber:function(e){return fe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=se(this,e)),ze(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return xe(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Xr(function(e,t,n){ji(this,xe(this,"number"==typeof e?me(e,t||0):e),null,n)}),setSelection:Xr(function(e,t,n){ji(this,xe(this,e),xe(this,t||e),n)}),extendSelection:Xr(function(e,t,n){Ui(this,xe(this,e),t&&xe(this,t),n)}),extendSelections:Xr(function(e,t){Yi(this,Se(this,e),t)}),extendSelectionsBy:Xr(function(e,t){Yi(this,Se(this,X(this.sel.ranges,e)),t)}),setSelections:Xr(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new yi(xe(this,e[i].anchor),xe(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),$i(this,bi(this.cm,r,t),n)}}),addSelection:Xr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new yi(xe(this,e),xe(this,t||e))),$i(this,bi(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=le(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=le(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Xr(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var r=[],i=me(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=ki(s.from,i,o),u=ki(Ci(s),i,o);if(i=s.to,o=u,"around"==n){var c=e.sel.ranges[a],f=ge(c.head,c.anchor)<0;r[a]=new yi(f?u:l,f?l:u)}else r[a]=new yi(l,l)}return new vi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)ro(this,r[l]);s?qi(this,s):this.cm&&Nr(this.cm)}),undo:Xr(function(){oo(this,"undo")}),redo:Xr(function(){oo(this,"redo")}),undoSelection:Xr(function(){oo(this,"undo",!0)}),redoSelection:Xr(function(){oo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Ai(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Wi(this.history.done),undone:Wi(this.history.undone)}},setHistory:function(e){var t=this.history=new Ai(this.history.maxGeneration);t.done=Wi(e.done.slice(0),null,!0),t.undone=Wi(e.undone.slice(0),null,!0)},setGutterMarker:Xr(function(e,t,n){return ho(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ne(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Xr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&ho(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ne(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!he(this,e))return null;if(t=e,!(e=se(this,e)))return null}else if(null==(t=fe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Xr(function(e,t,n){return ho(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(k(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Xr(function(e,t,n){return ho(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(k(n));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Xr(function(e,t,n){return function(e,t,n,r){var i=new go(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),ho(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Ve(e,t)){var r=qe(t)<e.scrollTop;ce(t,t.height+Cn(i)),r&&Tr(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&ln(o,"lineWidgetAdded",o,i,"number"==typeof t?t:fe(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return wo(this,xe(this,e),xe(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return wo(this,e=xe(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=se(this,(e=xe(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=xe(this,e),t=xe(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n}),xe(this,me(n,t))},indexFromPos:function(e){var t=(e=xe(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new To(ue(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new To(ue(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(ge(o,a)){var s=wo(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}(r,xo(this)),r},unlinkDoc:function(e){if(e instanceof wa&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),So(xo(this));break}if(e.history==this.history){var n=[e.id];Di(e,function(e){return n.push(e.id)},!0),e.history=new Ai(null),e.history.done=Wi(this.history.done,n),e.history.undone=Wi(this.history.undone,n)}},iterLinkedDocs:function(e){Di(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):wt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Xr(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&$r(t=this.cm,function(){Mi(t),Zr(t)}))})}),To.prototype.eachLine=To.prototype.iter;var No=0;function _o(e){var t=this;if(Eo(t),!it(t,e)&&!xn(t.display,e)){lt(e),a&&(No=+new Date);var n=sr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),s=0,l=function(e,r){if(!t.options.allowDropFileTypes||-1!=W(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=Gr(t,function(){var e=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[r]=e,++s==i){var l={from:n=xe(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};ro(t.doc,l),qi(t.doc,wi(n,Ci(l)))}}),a.readAsText(e)}},u=0;u<i;++u)l(r[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var c=e.dataTransfer.getData("Text");if(c){var f;if(t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections()),Gi(t.doc,wi(n,n)),f)for(var d=0;d<f.length;++d)lo(t.doc,"",f[d].anchor,f[d].head,"drag");t.replaceSelection(c,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Eo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Do(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}var Oo=!1;function Mo(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ao={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Lo=0;Lo<10;Lo++)Ao[Lo+48]=Ao[Lo+96]=String(Lo);for(var Ro=65;Ro<=90;Ro++)Ao[Ro]=String.fromCharCode(Ro);for(var Po=1;Po<=12;Po++)Ao[Po+111]=Ao[Po+63235]="F"+Po;var Bo={};function Io(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Fo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=X(n.split(" "),Io),o=0;o<i.length;o++){var a=void 0,s=void 0;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var u in t)e[u]=t[u];return e}function Ho(e,t,n,r){var i=(t=Yo(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ho(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=Ho(e,t.fallthrough[o],n,r);if(a)return a}}}function Wo(e){var t="string"==typeof e?e:Ao[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function zo(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(x?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(x?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Uo(e,t){if(f&&34==e.keyCode&&e.char)return!1;var n=Ao[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),zo(n,e,t))}function Yo(e){return"string"==typeof e?Bo[e]:e}function Vo(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&ge(o.from,K(r).to)<=0;){var a=r.pop();if(ge(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}$r(e,function(){for(var t=r.length-1;t>=0;t--)lo(e.doc,"",r[t].from,r[t].to,"+delete");Nr(e)})}function jo(e,t,n){var r=oe(e.text,t+n,n);return r<0||r>e.text.length?null:r}function qo(e,t,n){var r=jo(e,t.ch,n);return null==r?null:new me(t.line,r,n<0?"after":"before")}function $o(e,t,n,r,i){if(e){var o=Je(n,t.doc.direction);if(o){var a,s=i<0?K(o):o[0],l=i<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var u=An(t,n),c=Ln(t,u,a=i<0?n.text.length-1:0).top;a=ae(function(e){return Ln(t,u,e).top==c},i<0==(1==s.level)?s.from:s.to-1,a),"before"==l&&(a=jo(n,a,1))}else a=i<0?s.to:s.from;return new me(r,a,l)}}return new me(r,i<0?n.text.length:0,i<0?"before":"after")}Bo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Bo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Bo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Bo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Bo.default=y?Bo.macDefault:Bo.pcDefault;var Go={selectAll:to,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Y)},killLine:function(e){return Vo(e,function(t){if(t.empty()){var n=se(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:me(t.head.line+1,0)}:{from:t.head,to:me(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Vo(e,function(t){return{from:me(t.from().line,0),to:xe(e.doc,me(t.to().line+1,0))}})},delLineLeft:function(e){return Vo(e,function(e){return{from:me(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Vo(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Vo(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(me(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(me(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Ko(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Xo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=se(e.doc,t),r=function(e){for(var t;t=Fe(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=fe(r)),$o(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},j)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},j)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Xo(e,t.head):r},j)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=F(e.getLine(o.line),o.ch,r);t.push(G(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return $r(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=se(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new me(i.line,i.ch-1)),i.ch>0)i=new me(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),me(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=se(e.doc,i.line-1).text;a&&(i=new me(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),me(i.line-1,a.length-1),i,"+transpose"))}n.push(new yi(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return $r(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Nr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Ko(e,t){var n=se(e.doc,t),r=ze(n);return r!=n&&(t=fe(r)),$o(!0,e,r,t,1)}function Xo(e,t){var n=Ko(e,t.line),r=se(e.doc,n.line),i=Je(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/));return me(n.line,t.line==n.line&&t.ch<=o&&t.ch?0:o,n.sticky)}return n}function Zo(e,t,n){if("string"==typeof t&&!(t=Go[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=U}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Jo=new H;function Qo(e,t,n,r){var i=e.state.keySeq;if(i){if(Wo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Jo.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),ea(e,i+" "+t,n,r))return!0}return ea(e,t,n,r)}function ea(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Ho(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Ho(t,e.options.extraKeys,n,e)||Ho(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&ln(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(lt(n),pr(e)),!!i}function ta(e,t){var n=Uo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?Qo(e,"Shift-"+n,t,function(t){return Zo(e,t,!0)})||Qo(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Zo(e,t)}):Qo(e,n,t,function(t){return Zo(e,t)}))}var na=null;function ra(e){var t=this;if(t.curOp.focus=A(),!it(t,e)){a&&s<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=ta(t,e);f&&(na=r?n:null,!r&&88==n&&!xt&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(N(t,"CodeMirror-crosshair"),nt(document,"keyup",n),nt(document,"mouseover",n))}L(t,"CodeMirror-crosshair"),et(document,"keyup",n),et(document,"mouseover",n)}(t)}}function ia(e){16==e.keyCode&&(this.doc.sel.shift=!1),it(this,e)}function oa(e){var t=this;if(!(xn(t.display,e)||it(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(f&&n==na)return na=null,void lt(e);if(!f||e.which&&!(e.which<10)||!ta(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return Qo(e,"'"+n+"'",t,function(t){return Zo(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var aa,sa,la=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ua(e){var t=this,n=t.display;if(!(it(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,xn(n,e))l||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!da(t,e)){var r=sr(t,e),i=ht(e),o=r?function(e,t){var n=+new Date;return sa&&sa.compare(n,e,t)?(aa=sa=null,"triple"):aa&&aa.compare(n,e,t)?(sa=new la(n,e,t),aa=null,"double"):(aa=new la(n,e,t),sa=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),Qo(e,zo(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,function(t){if("string"==typeof t&&(t=Go[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=U}finally{e.state.suppressEdits=!1}return r})}(t,i,r,o,e)||(1==i?r?function(e,t,n,r){a?setTimeout(B(mr,e),0):e.curOp.focus=A();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};return null==i.unit&&(i.unit=(b?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=y?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(y?n.altKey:n.ctrlKey)),i}(e,n,r),u=e.doc.sel;e.options.dragDrop&&gt&&!e.isReadOnly()&&"single"==n&&(i=u.contains(t))>-1&&(ge((i=u.ranges[i]).from(),t)<0||t.xRel>0)&&(ge(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,o=!1,u=Gr(e,function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,nt(i.wrapper.ownerDocument,"mouseup",u),nt(i.wrapper.ownerDocument,"mousemove",c),nt(i.scroller,"dragstart",f),nt(i.scroller,"drop",u),o||(lt(t),r.addNew||Ui(e.doc,n,null,null,r.extend),l||a&&9==s?setTimeout(function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()},20):i.input.focus())}),c=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},f=function(){return o=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=u,u.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),et(i.wrapper.ownerDocument,"mouseup",u),et(i.wrapper.ownerDocument,"mousemove",c),et(i.scroller,"dragstart",f),et(i.scroller,"drop",u),gr(e),setTimeout(function(){return i.input.focus()},20)}(e,r,t,o):function(e,t,n,r){var i=e.display,o=e.doc;lt(t);var a,s,l=o.sel,u=l.ranges;if(r.addNew&&!r.extend?(s=o.sel.contains(n),a=s>-1?u[s]:new yi(n,n)):(a=o.sel.primary(),s=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(a=new yi(n,n)),n=sr(e,t,!0,!0),s=-1;else{var c=ca(e,n,r.unit);a=r.extend?zi(a,c.anchor,c.head,r.extend):c}r.addNew?-1==s?(s=u.length,$i(o,bi(e,u.concat([a]),s),{scroll:!1,origin:"*mouse"})):u.length>1&&u[s].empty()&&"char"==r.unit&&!r.extend?($i(o,bi(e,u.slice(0,s).concat(u.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Vi(o,s,a,V):(s=0,$i(o,new vi([a],0),V),l=o.sel);var f=n,d=i.wrapper.getBoundingClientRect(),h=0;function p(t){e.state.selectingText=!1,h=1/0,lt(t),i.input.focus(),nt(i.wrapper.ownerDocument,"mousemove",m),nt(i.wrapper.ownerDocument,"mouseup",g),o.history.lastSelOrigin=null}var m=Gr(e,function(t){0!==t.buttons&&ht(t)?function t(u){var c=++h,p=sr(e,u,!0,"rectangle"==r.unit);if(p)if(0!=ge(p,f)){e.curOp.focus=A(),function(t){if(0!=ge(f,t))if(f=t,"rectangle"==r.unit){for(var i=[],u=e.options.tabSize,c=F(se(o,n.line).text,n.ch,u),d=F(se(o,t.line).text,t.ch,u),h=Math.min(c,d),p=Math.max(c,d),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=se(o,m).text,y=q(v,h,u);h==p?i.push(new yi(me(m,y),me(m,y))):v.length>y&&i.push(new yi(me(m,y),me(m,q(v,p,u))))}i.length||i.push(new yi(n,n)),$i(o,bi(e,l.ranges.slice(0,s).concat(i),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=a,C=ca(e,t,r.unit),x=w.anchor;ge(C.anchor,x)>0?(b=C.head,x=we(w.from(),C.anchor)):(b=C.anchor,x=be(w.to(),C.head));var S=l.ranges.slice(0);S[s]=function(e,t){var n=t.anchor,r=t.head,i=se(e.doc,n.line);if(0==ge(n,r)&&n.sticky==r.sticky)return t;var o=Je(i);if(!o)return t;var a=Xe(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return t;var l,u=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==u||u==o.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=Xe(o,r.ch,r.sticky),f=c-a||(r.ch-n.ch)*(1==s.level?-1:1);l=c==u-1||c==u?f<0:f>0}var d=o[u+(l?-1:0)],h=l==(1==d.level),p=h?d.from:d.to,m=h?"after":"before";return n.ch==p&&n.sticky==m?t:new yi(new me(n.line,p,m),r)}(e,new yi(xe(o,x),b)),$i(o,bi(e,S,s),V)}}(p);var m=Cr(i,o);(p.line>=m.to||p.line<m.from)&&setTimeout(Gr(e,function(){h==c&&t(u)}),150)}else{var g=u.clientY<d.top?-20:u.clientY>d.bottom?20:0;g&&setTimeout(Gr(e,function(){h==c&&(i.scroller.scrollTop+=g,t(u))}),50)}}(t):p(t)}),g=Gr(e,p);e.state.selectingText=g,et(i.wrapper.ownerDocument,"mousemove",m),et(i.wrapper.ownerDocument,"mouseup",g)}(e,r,t,o)}(t,r,o,e):dt(e)==n.scroller&&lt(e):2==i?(r&&Ui(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(S?t.display.input.onContextMenu(e):gr(t)))}}function ca(e,t,n){if("char"==n)return new yi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new yi(me(t.line,0),xe(e.doc,me(t.line+1,0)));var r=n(e,t);return new yi(r.from,r.to)}function fa(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&lt(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!at(e,n))return ct(t);o-=s.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=i)return rt(e,n,e,de(e.doc,o),e.options.gutters[l],t),ct(t)}}function da(e,t){return fa(e,t,"gutterClick",!0)}function ha(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Wn(e)}la.prototype.compare=function(e,t,n){return this.time+400>e&&0==ge(t,this.pos)&&n==this.button};var pa={toString:function(){return"CodeMirror.Init"}},ma={},ga={};function va(e){ci(e),Zr(e),xr(e)}function ya(e,t,n){if(!t!=!(n&&n!=pa)){var r=e.display.dragFunctions,i=t?et:nt;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function ba(e){e.options.lineWrapping?(L(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(N(e.display.wrapper,"CodeMirror-wrap"),Ge(e)),ar(e),Zr(e),Wn(e),setTimeout(function(){return Br(e)},100)}function wa(e,t){var r=this;if(!(this instanceof wa))return new wa(e,t);this.options=t=t?I(t):{},I(ma,t,!1),fi(t);var i=t.value;"string"==typeof i?i=new To(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var o=new wa.inputStyles[t.inputStyle](this),u=this.display=new function(e,t,r){var i=this;this.input=r,i.scrollbarFiller=D("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=D("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=O("div",null,"CodeMirror-code"),i.selectionDiv=D("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=D("div",null,"CodeMirror-cursors"),i.measure=D("div",null,"CodeMirror-measure"),i.lineMeasure=D("div",null,"CodeMirror-measure"),i.lineSpace=O("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=O("div",[i.lineSpace],"CodeMirror-lines");i.mover=D("div",[o],null,"position: relative"),i.sizer=D("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=D("div",null,null,"position: absolute; height: "+z+"px; width: 1px;"),i.gutters=D("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=D("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=D("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),a&&s<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),l||n&&v||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}(e,i,o);for(var c in u.wrapper.CodeMirror=this,ci(this),ha(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Hr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new H,keySeq:null,specialChars:null},t.autofocus&&!v&&u.input.focus(),a&&s<11&&setTimeout(function(){return r.display.input.reset(!0)},20),function(e){var t=e.display;et(t.scroller,"mousedown",Gr(e,ua)),et(t.scroller,"dblclick",a&&s<11?Gr(e,function(t){if(!it(e,t)){var n=sr(e,t);if(n&&!da(e,t)&&!xn(e.display,t)){lt(t);var r=e.findWordAt(n);Ui(e.doc,r.anchor,r.head)}}}):function(t){return it(e,t)||lt(t)}),et(t.scroller,"contextmenu",function(t){return function(e,t){xn(e.display,t)||function(e,t){return!!at(e,"gutterContextMenu")&&fa(e,t,"gutterContextMenu",!1)}(e,t)||it(e,t,"contextmenu")||S||e.display.input.onContextMenu(t)}(e,t)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}et(t.scroller,"touchstart",function(i){if(!it(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!da(e,i)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),et(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),et(t.scroller,"touchend",function(n){var r=t.activeTouch;if(r&&!xn(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,s=e.coordsChar(t.activeTouch,"page");a=!r.prev||o(r,r.prev)?new yi(s,s):!r.prev.prev||o(r,r.prev.prev)?e.findWordAt(s):new yi(me(s.line,0),xe(e.doc,me(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),lt(n)}i()}),et(t.scroller,"touchcancel",i),et(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Or(e,t.scroller.scrollTop),Ar(e,t.scroller.scrollLeft,!0),rt(e,"scroll",e))}),et(t.scroller,"mousewheel",function(t){return gi(e,t)}),et(t.scroller,"DOMMouseScroll",function(t){return gi(e,t)}),et(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){it(e,t)||ft(t)},over:function(t){it(e,t)||(function(e,t){var n=sr(e,t);if(n){var r=document.createDocumentFragment();fr(e,n,r),e.display.dragCursor||(e.display.dragCursor=D("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),E(e.display.dragCursor,r)}}(e,t),ft(t))},start:function(t){return function(e,t){if(a&&(!e.state.draggingText||+new Date-No<100))ft(t);else if(!it(e,t)&&!xn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!d)){var n=D("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}(e,t)},drop:Gr(e,_o),leave:function(t){it(e,t)||Eo(e)}};var l=t.input.getField();et(l,"keyup",function(t){return ia.call(e,t)}),et(l,"keydown",Gr(e,ra)),et(l,"keypress",Gr(e,oa)),et(l,"focus",function(t){return vr(e,t)}),et(l,"blur",function(t){return yr(e,t)})}(this),function(){var e;Oo||(et(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Do(Mo)},100))}),et(window,"blur",function(){return Do(yr)}),Oo=!0)}(),zr(this),this.curOp.forceUpdate=!0,Oi(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout(B(vr,this),20):yr(this),ga)ga.hasOwnProperty(c)&&ga[c](r,t[c],pa);Sr(this),t.finishInit&&t.finishInit(this);for(var h=0;h<Ca.length;++h)Ca[h](r);Ur(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(u.lineDiv).textRendering&&(u.lineDiv.style.textRendering="auto")}wa.defaults=ma,wa.optionHandlers=ga;var Ca=[];function xa(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=Ft(e,t).state:n="prev");var a=e.options.tabSize,s=se(o,t),l=F(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==U||u>150)){if(!r)return;n="prev"}}else u=0,n="not";"prev"==n?u=t>o.first?F(se(o,t-1).text,null,a):0:"add"==n?u=l+e.options.indentUnit:"subtract"==n?u=l-e.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var f="",d=0;if(e.options.indentWithTabs)for(var h=Math.floor(u/a);h;--h)d+=a,f+="\t";if(d<u&&(f+=G(u-d)),f!=c)return lo(o,f,me(t,0),me(t,c.length),"+input"),s.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var m=o.sel.ranges[p];if(m.head.line==t&&m.head.ch<c.length){var g=me(t,c.length);Vi(o,p,new yi(g,g));break}}}wa.defineInitHook=function(e){return Ca.push(e)};var Sa=null;function ka(e){Sa=e}function Ta(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a=e.state.pasteIncoming||"paste"==i,s=wt(t),l=null;if(a&&r.ranges.length>1)if(Sa&&Sa.text.join("\n")==t){if(r.ranges.length%Sa.text.length==0){l=[];for(var u=0;u<Sa.text.length;u++)l.push(o.splitLines(Sa.text[u]))}}else s.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(l=X(s,function(e){return[e]}));for(var c=e.curOp.updateInput,f=r.ranges.length-1;f>=0;f--){var d=r.ranges[f],h=d.from(),p=d.to();d.empty()&&(n&&n>0?h=me(h.line,h.ch-n):e.state.overwrite&&!a?p=me(p.line,Math.min(se(o,p.line).text.length,p.ch+K(s).length)):a&&Sa&&Sa.lineWise&&Sa.text.join("\n")==t&&(h=p=me(h.line,0)));var m={from:h,to:p,text:l?l[f%l.length]:s,origin:i||(a?"paste":e.state.cutIncoming?"cut":"+input")};ro(e.doc,m),ln(e,"inputRead",e,m)}t&&!a&&_a(e,t),Nr(e),e.curOp.updateInput<2&&(e.curOp.updateInput=c),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Na(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||$r(t,function(){return Ta(t,n,0,null,"paste")}),!0}function _a(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=xa(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(se(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=xa(e,i.head.line,"smart"));a&&ln(e,"electricInput",e,i.head.line)}}}function Ea(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:me(i,0),head:me(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Da(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Oa(){var e=D("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=D("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Da(e),t}function Ma(e,t,n,r,i){var o=t,a=n,s=se(e,t.line);function l(r){var o,a;if(null==(o=i?function(e,t,n,r){var i=Je(t,e.doc.direction);if(!i)return qo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=Xe(i,n.ch,n.sticky),a=i[o];if("ltr"==e.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return qo(t,n,r);var s,l=function(e,n){return jo(t,e instanceof me?e.ch:e,n)},u=function(n){return e.options.lineWrapping?(s=s||An(e,t),Jn(e,t,s,n)):{begin:0,end:t.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var f=1==a.level==r<0,d=l(n,f?1:-1);if(null!=d&&(f?d<=a.to&&d<=c.end:d>=a.from&&d>=c.begin))return new me(n.line,d,f?"before":"after")}var h=function(e,t,r){for(var o=function(e,t){return t?new me(n.line,l(e,1),"before"):new me(n.line,e,"after")};e>=0&&e<i.length;e+=t){var a=i[e],s=t>0==(1!=a.level),u=s?r.begin:l(r.end,-1);if(a.from<=u&&u<a.to)return o(u,s);if(u=s?a.from:l(a.to,-1),r.begin<=u&&u<r.end)return o(u,s)}},p=h(o+r,r,c);if(p)return p;var m=r>0?c.end:l(c.begin,-1);return null==m||r>0&&m==t.text.length||!(p=h(r>0?0:i.length-1,r,u(m)))?null:p}(e.cm,s,t,n):qo(s,t,n))){if(r||(a=t.line+n)<e.first||a>=e.first+e.size||(t=new me(a,t.ch,t.sticky),!(s=se(e,a))))return!1;t=$o(i,e.cm,s,t.line,n)}else t=o;return!0}if("char"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var u=null,c="group"==r,f=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(n<0)||l(!d);d=!1){var h=s.text.charAt(t.ch)||"\n",p=te(h,f)?"w":c&&"\n"==h?"n":!c||/\s/.test(h)?null:"p";if(!c||d||p||(p="s"),u&&u!=p){n<0&&(n=1,l(),t.sticky="after");break}if(p&&(u=p),n>0&&!l(!d))break}var m=Qi(e,t,o,a,!0);return ve(o,m)&&(m.hitSide=!0),m}function Aa(e,t,n,r){var i,o,a=e.doc,s=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*tr(e.display),3);i=(n>0?t.bottom:t.top)+n*u}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=Xn(e,s,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var La=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new H,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ra(e,t){var n=Mn(e,t.line);if(!n||n.hidden)return null;var r=se(e.doc,t.line),i=Dn(n,r,t.line),o=Je(r,e.doc.direction),a="left";o&&(a=Xe(o,t.ch)%2?"right":"left");var s=Bn(i.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function Pa(e,t){return t&&(e.bad=!0),e}function Ba(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Pa(e.clipPos(me(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return Ia(o,t,n)}}function Ia(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!M(r,t))return Pa(me(fe(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?K(e.rest):e.line;return Pa(me(fe(o),o.text.length),i)}var a=3==t.nodeType?t:null,s=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var l=e.measure,u=l.maps;function c(t,n,r){for(var i=-1;i<(u?u.length:0);i++)for(var o=i<0?l.map:u[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var c=fe(i<0?e.line:e.rest[i]),f=o[a]+r;return(r<0||s!=t)&&(f=o[a+(r?1:0)]),me(c,f)}}}var f=c(a,s,n);if(f)return Pa(f,i);for(var d=s.nextSibling,h=a?a.nodeValue.length-n:0;d;d=d.nextSibling){if(f=c(d,d.firstChild,0))return Pa(me(f.line,f.ch-h),i);h+=d.textContent.length}for(var p=s.previousSibling,m=n;p;p=p.previousSibling){if(f=c(p,p.firstChild,-1))return Pa(me(f.line,f.ch+m),i);m+=p.textContent.length}}La.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){if(!it(r,e)){if(r.somethingSelected())ka({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Ea(r);ka({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,Y),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=Sa.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var a=Oa(),s=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),s.value=Sa.text.join("\n");var l=document.activeElement;P(s),setTimeout(function(){r.display.lineSpace.removeChild(a),l.focus(),l==i&&n.showPrimarySelection()},50)}}Da(i,r.options.spellcheck),et(i,"paste",function(e){it(r,e)||Na(e,r)||s<=11&&setTimeout(Gr(r,function(){return t.updateFromDOM()}),20)}),et(i,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),et(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),et(i,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),et(i,"touchstart",function(){return n.forceCompositionEnd()}),et(i,"input",function(){t.composing||t.readFromDOMSoon()}),et(i,"copy",o),et(i,"cut",o)},La.prototype.prepareSelection=function(){var e=cr(this.cm,!1);return e.focus=this.cm.state.focused,e},La.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},La.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},La.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=Ba(t,e.anchorNode,e.anchorOffset),s=Ba(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=ge(we(a,s),i)||0!=ge(be(a,s),o)){var l=t.display.view,u=i.line>=t.display.viewFrom&&Ra(t,i)||{node:l[0].measure.map[2],offset:0},c=o.line<t.display.viewTo&&Ra(t,o);if(!c){var f=l[l.length-1].measure,d=f.maps?f.maps[f.maps.length-1]:f.map;c={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(u&&c){var h,p=e.rangeCount&&e.getRangeAt(0);try{h=T(u.node,u.offset,c.offset,c.node)}catch(e){}h&&(!n&&t.state.focused?(e.collapse(u.node,u.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},La.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},La.prototype.showMultipleSelections=function(e){E(this.cm.display.cursorDiv,e.cursors),E(this.cm.display.selectionDiv,e.selection)},La.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},La.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return M(this.div,t)},La.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},La.prototype.blur=function(){this.div.blur()},La.prototype.getField=function(){return this.div},La.prototype.supportsTouch=function(){return!0},La.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():$r(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},La.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},La.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&c&&this.cm.options.gutters.length&&function(t){for(var n=e.anchorNode;n;n=n.parentNode)if(/CodeMirror-gutter-wrapper/.test(n.className))return!0;return!1}())return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Ba(t,e.anchorNode,e.anchorOffset),r=Ba(t,e.focusNode,e.focusOffset);n&&r&&$r(t,function(){$i(t.doc,wi(n,r),Y),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},La.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=me(a.line-1,se(r.doc,a.line-1).length)),s.ch==se(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=me(s.line+1,0)),a.line<i.viewFrom||s.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=lr(r,a.line))?(t=fe(i.view[0].line),n=i.view[0].node):(t=fe(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,u,c=lr(r,s.line);if(c==i.view.length-1?(l=i.viewTo-1,u=i.lineDiv.lastChild):(l=fe(i.view[c+1].line)-1,u=i.view[c+1].node.previousSibling),!n)return!1;for(var f=r.doc.splitLines(function(e,t,n,r,i){var o="",a=!1,s=e.doc.lineSeparator(),l=!1;function u(){a&&(o+=s,l&&(o+=s),a=l=!1)}function c(e){e&&(u(),o+=e)}function f(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void c(n);var o,d=t.getAttribute("cm-marker");if(d){var h=e.findMarks(me(r,0),me(i+1,0),(g=+d,function(e){return e.id==g}));return void(h.length&&(o=h[0].find(0))&&c(le(e.doc,o.from,o.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;p&&u();for(var m=0;m<t.childNodes.length;m++)f(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),p&&(a=!0)}else 3==t.nodeType&&c(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;f(t),t!=n;)t=t.nextSibling,l=!1;return o}(r,n,u,t,l)),d=le(r.doc,me(t,0),me(l,se(r.doc,l).text.length));f.length>1&&d.length>1;)if(K(f)==K(d))f.pop(),d.pop(),l--;else{if(f[0]!=d[0])break;f.shift(),d.shift(),t++}for(var h=0,p=0,m=f[0],g=d[0],v=Math.min(m.length,g.length);h<v&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var y=K(f),b=K(d),w=Math.min(y.length-(1==f.length?h:0),b.length-(1==d.length?h:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==f.length&&1==d.length&&t==a.line)for(;h&&h>a.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)h--,p++;f[f.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(h).replace(/\u200b+$/,"");var C=me(t,h),x=me(l,d.length?K(d).length-p:0);return f.length>1||f[0]||ge(C,x)?(lo(r.doc,f,C,x,"+input"),!0):void 0},La.prototype.ensurePolled=function(){this.forceCompositionEnd()},La.prototype.reset=function(){this.forceCompositionEnd()},La.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},La.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},La.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||$r(this.cm,function(){return Zr(e.cm)})},La.prototype.setUneditable=function(e){e.contentEditable="false"},La.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Gr(this.cm,Ta)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},La.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},La.prototype.onContextMenu=function(){},La.prototype.resetPosition=function(){},La.prototype.needsContentAttribute=!0;var Fa=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new H,this.hasSelection=!1,this.composing=null};Fa.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!it(r,e)){if(r.somethingSelected())ka({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Ea(r);ka({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,Y):(n.prevInput="",i.value=t.text.join("\n"),P(i))}"cut"==e.type&&(r.state.cutIncoming=!0)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(i.style.width="0px"),et(i,"input",function(){a&&s>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),et(i,"paste",function(e){it(r,e)||Na(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())}),et(i,"cut",o),et(i,"copy",o),et(e.scroller,"paste",function(t){xn(e,t)||it(r,t)||(r.state.pasteIncoming=!0,n.focus())}),et(e.lineSpace,"selectstart",function(t){xn(e,t)||lt(t)}),et(i,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),et(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Fa.prototype.createField=function(e){this.wrapper=Oa(),this.textarea=this.wrapper.firstChild},Fa.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=cr(e);if(e.options.moveInputWithCursor){var i=$n(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},Fa.prototype.showSelection=function(e){var t=this.cm.display;E(t.cursorDiv,e.cursors),E(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Fa.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&P(this.textarea),a&&s>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},Fa.prototype.getField=function(){return this.textarea},Fa.prototype.supportsTouch=function(){return!1},Fa.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||A()!=this.textarea))try{this.textarea.focus()}catch(e){}},Fa.prototype.blur=function(){this.textarea.blur()},Fa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Fa.prototype.receivedFocus=function(){this.slowPoll()},Fa.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Fa.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Fa.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ct(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,u=Math.min(r.length,i.length);l<u&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return $r(t,function(){Ta(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Fa.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Fa.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},Fa.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=sr(n,e),u=r.scroller.scrollTop;if(o&&!f){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Gr(n,$i)(n.doc,wi(o),Y);var c,d=i.style.cssText,h=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(c=window.scrollY),r.input.focus(),l&&window.scrollTo(null,c),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=v,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&s>=9&&g(),S){ft(e);var m=function(){nt(window,"mouseup",m),setTimeout(v,20)};et(window,"mouseup",m)}else setTimeout(v,50)}function g(){if(null!=i.selectionStart){var e=n.somethingSelected(),o="\u200b"+(e?i.value:"");i.value="\u21da",i.value=o,t.prevInput=e?"":"\u200b",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=h,i.style.cssText=d,a&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=u),null!=i.selectionStart)){(!a||a&&s<9)&&g();var e=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==t.prevInput?Gr(n,to)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Fa.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Fa.prototype.setUneditable=function(){},Fa.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=pa&&i(e,t,n)}:i)}e.defineOption=n,e.Init=pa,n("value","",function(e,t){return e.setValue(t)},!0),n("mode",null,function(e,t){e.doc.modeOption=t,Ti(e)},!0),n("indentUnit",2,Ti,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(e){Ni(e),Wn(e),Zr(e)},!0),n("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(me(r,o))}r++});for(var i=n.length-1;i>=0;i--)lo(e.doc,t,n[i],me(n[i].line,n[i].ch+t.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=pa&&e.refresh()}),n("specialCharPlaceholder",Jt,function(e){return e.refresh()},!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",function(e){ha(e),va(e)},!0),n("keyMap","default",function(e,t,n){var r=Yo(t),i=n!=pa&&Yo(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,ba,!0),n("gutters",[],function(e){fi(e.options),va(e)},!0),n("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?ir(e.display)+"px":"0",e.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(e){return Br(e)},!0),n("scrollbarStyle","native",function(e){Hr(e),Br(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n("lineNumbers",!1,function(e){fi(e.options),va(e)},!0),n("firstLineNumber",1,va,!0),n("lineNumberFormatter",function(e){return e},va,!0),n("showCursorWhenSelecting",!1,ur,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(e,t){"nocursor"==t&&(yr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),n("dragDrop",!0,ya),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,ur,!0),n("singleCursorHeightPerLine",!0,ur,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ni,!0),n("addModeClass",!1,Ni,!0),n("pollInterval",100),n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),n("historyEventDelay",1250),n("viewportMargin",10,function(e){return e.refresh()},!0),n("maxHighlightLength",1e4,Ni,!0),n("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),n("autofocus",null),n("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),n("phrases",null)}(wa),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&Gr(this,t[e])(this,n,i),rt(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Yo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Kr(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Zr(this)}),removeOverlay:Kr(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Zr(this)}}),indentLine:Kr(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),he(this.doc,e)&&xa(this,e,t,n)}),indentSelection:Kr(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(xa(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Nr(this));else{var o=i.from(),a=i.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)xa(this,l,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[r].from().ch>0&&Vi(this.doc,r,new yi(o,u[r].to()),Y)}}}),getTokenAt:function(e,t){return Yt(this,e,t)},getLineTokens:function(e,t){return Yt(this,me(e),t,!0)},getTokenTypeAt:function(e){e=xe(this.doc,e);var t,n=It(this,se(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var s=i[o[t][a]];s&&r.push(s)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var u=i._global[l];u.pred(o,this)&&-1==W(r,u.val)&&r.push(u.val)}return r},getStateAfter:function(e,t){var n=this.doc;return Ft(this,(e=Ce(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return $n(this,null==e?n.head:"object"==typeof e?xe(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return qn(this,xe(this.doc,e),t||"page")},coordsChar:function(e,t){return Xn(this,(e=jn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=jn(this,{top:e,left:0},t||"page").top,de(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=se(this.doc,e)}else r=e;return Vn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-qe(r):0)},defaultTextHeight:function(){return tr(this.display)},defaultCharWidth:function(){return nr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,a,s=this.display,l=(e=$n(this,xe(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r)l=e.top;else if("above"==r||"near"==r){var c=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>c)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=c&&(l=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==i?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(null!=(a=kr(o=this,{left:u,top:l,right:u+t.offsetWidth,bottom:l+t.offsetHeight})).scrollTop&&Or(o,a.scrollTop),null!=a.scrollLeft&&Ar(o,a.scrollLeft))},triggerOnKeyDown:Kr(ra),triggerOnKeyPress:Kr(oa),triggerOnKeyUp:ia,triggerOnMouseDown:Kr(ua),execCommand:function(e){if(Go.hasOwnProperty(e))return Go[e].call(null,this)},triggerElectric:Kr(function(e){_a(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=xe(this.doc,e),a=0;a<t&&!(o=Ma(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:Kr(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Ma(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},j)}),deleteH:Kr(function(e,t){var n=this.doc;this.doc.sel.somethingSelected()?n.replaceSelection("",null,"+delete"):Vo(this,function(r){var i=Ma(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var a=xe(this.doc,e),s=0;s<t;++s){var l=$n(this,a,"div");if(null==o?o=l.left:l.left=o,(a=Aa(this,l,i,n)).hitSide)break}return a},moveV:Kr(function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=$n(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=Aa(n,s,e,t);return"page"==t&&a==r.sel.primary()&&Tr(n,qn(n,l,"div").top-s.top),l},j),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=se(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var o=t.charAt(n),a=te(o,i)?function(e){return te(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};n>0&&a(t.charAt(n-1));)--n;for(;r<t.length&&a(t.charAt(r));)++r}return new yi(me(e.line,n),me(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?L(this.display.cursorDiv,"CodeMirror-overwrite"):N(this.display.cursorDiv,"CodeMirror-overwrite"),rt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==A()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Kr(function(e,t){_r(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Nn(this)-this.display.barHeight,width:e.scrollWidth-Nn(this)-this.display.barWidth,clientHeight:En(this),clientWidth:_n(this)}},scrollIntoView:Kr(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:me(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Er(e),e.curOp.scrollToPos=t}(this,e):Dr(this,e.from,e.to,e.margin)}),setSize:Kr(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Hn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Jr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,rt(this,"refresh",this)}),operation:function(e){return $r(this,e)},startOperation:function(){return zr(this)},endOperation:function(){return Ur(this)},refresh:Kr(function(){var e=this.display.cachedTextHeight;Zr(this),this.curOp.forceUpdate=!0,Wn(this),_r(this,this.doc.scrollLeft,this.doc.scrollTop),li(this),(null==e||Math.abs(e-tr(this.display))>.5)&&ar(this),rt(this,"refresh",this)}),swapDoc:Kr(function(e){var t=this.doc;return t.cm=null,Oi(this,e),Wn(this),this.display.input.reset(),_r(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},st(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}(wa);var Ha="iter insert remove copy getEditor constructor".split(" ");for(var Wa in To.prototype)To.prototype.hasOwnProperty(Wa)&&W(Ha,Wa)<0&&(wa.prototype[Wa]=function(e){return function(){return e.apply(this.doc,arguments)}}(To.prototype[Wa]));return st(To),wa.inputStyles={textarea:Fa,contenteditable:La},wa.defineMode=function(e){wa.defaults.mode||"null"==e||(wa.defaults.mode=e),(function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),kt[e]=t}).apply(this,arguments)},wa.defineMIME=function(e,t){Tt[e]=t},wa.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),wa.defineMIME("text/plain","null"),wa.defineExtension=function(e,t){wa.prototype[e]=t},wa.defineDocExtension=function(e,t){To.prototype[e]=t},wa.fromTextArea=function(e,t){if((t=t?I(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=A();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=s.getValue()}var i;if(e.form&&(et(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(e){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(nt(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var s=wa(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s},function(e){e.off=nt,e.on=et,e.wheelEventPixels=mi,e.Doc=To,e.splitLines=wt,e.countColumn=F,e.findColumn=q,e.isWordChar=ee,e.Pass=U,e.signal=rt,e.Line=qt,e.changeEnd=Ci,e.scrollbarModel=Fr,e.Pos=me,e.cmpPos=ge,e.modes=kt,e.mimeModes=Tt,e.resolveMode=Nt,e.getMode=_t,e.modeExtensions=Et,e.extendMode=Dt,e.copyState=Ot,e.startState=At,e.innerMode=Mt,e.commands=Go,e.keyMap=Bo,e.keyName=Uo,e.isModifierKey=Wo,e.lookupKey=Ho,e.normalizeKeyMap=Fo,e.StringStream=Lt,e.SharedTextMarker=Co,e.TextMarker=bo,e.LineWidget=go,e.e_preventDefault=lt,e.e_stopPropagation=ut,e.e_stop=ft,e.addClass=L,e.contains=M,e.rmClass=N,e.keyNames=Ao}(wa),wa.version="5.42.2",wa}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},n={};function r(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function i(e,t){for(var n in e)for(var r=t[n]||(t[n]=[]),i=e[n],o=i.length-1;o>=0;o--)r.unshift(i[o])}e.defineMode("htmlmixed",function(o,a){var s=e.getMode(o,{name:"xml",htmlMode:!0,multilineTagIndentFactor:a.multilineTagIndentFactor,multilineTagIndentPastTag:a.multilineTagIndentPastTag}),l={},u=a&&a.tags,c=a&&a.scriptTypes;if(i(t,l),u&&i(u,l),c)for(var f=c.length-1;f>=0;f--)l.script.unshift(["type",c[f].matches,c[f].mode]);function d(t,i){var a,u=s.token(t,i.htmlState),c=/\btag\b/.test(u);if(c&&!/[<>\s\/]/.test(t.current())&&(a=i.htmlState.tagName&&i.htmlState.tagName.toLowerCase())&&l.hasOwnProperty(a))i.inTag=a+" ";else if(i.inTag&&c&&/>$/.test(t.current())){var f=/^([\S]+) (.*)/.exec(i.inTag);i.inTag=null;var h=">"==t.current()&&function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(!i[0]||i[1].test((o=t.match(function(e){return n[e]||(n[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(i[0])))?/^\s*(.*?)\s*$/.exec(o[2])[1]:""))return i[2]}var o}(l[f[1]],f[2]),p=e.getMode(o,h),m=r(f[1],!0),g=r(f[1],!1);i.token=function(e,t){return e.match(m,!1)?(t.token=d,t.localState=t.localMode=null,null):function(e,t,n){var r=e.current(),i=r.search(t);return i>-1?e.backUp(r.length-i):r.match(/<\/?$/)&&(e.backUp(r.length),e.match(t,!1)||e.match(r)),n}(e,g,t.localMode.token(e,t.localState))},i.localMode=p,i.localState=e.startState(p,s.indent(i.htmlState,""))}else i.inTag&&(i.inTag+=t.current(),t.eol()&&(i.inTag+=" "));return u}return{startState:function(){return{token:d,inTag:null,localMode:null,localState:null,htmlState:e.startState(s)}},copyState:function(t){var n;return t.localState&&(n=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:n,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n,r){return!t.localMode||/^\s*<\//.test(n)?s.indent(t.htmlState,n):t.localMode.indent?t.localMode.indent(t.localState,n,r):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")});